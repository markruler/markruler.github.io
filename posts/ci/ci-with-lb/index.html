<!DOCTYPE html>
<html lang="ko"><head>
<title>Load Balancerë¥¼ í™œìš©í•´ì„œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°œì„ í•´ë³´ì</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="G-FFMDWZ27TN">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5, user-scalable=5" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="ì—…ë¬´ ìë™í™”">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="Load Balancerë¥¼ í™œìš©í•´ì„œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°œì„ í•´ë³´ì" />
<meta property="og:description" content="ì—…ë¬´ ìë™í™”" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://markruler.github.io/posts/ci/ci-with-lb/" /><meta property="og:image" content="https://markruler.github.io/images/ci/old-system-2022.webp" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-17T03:44:00+09:00" />
<meta property="article:modified_time" content="2022-08-17T03:44:00+09:00" />






<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://markruler.github.io/images/ci/old-system-2022.webp"/>

<meta name="twitter:title" content="Load Balancerë¥¼ í™œìš©í•´ì„œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°œì„ í•´ë³´ì"/>
<meta name="twitter:description" content="ì—…ë¬´ ìë™í™”"/>







<script async src="https://www.googletagmanager.com/gtag/js?id=G-FFMDWZ27TN"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-FFMDWZ27TN', { 'anonymize_ip': false });
}
</script>







  




<link rel="icon" href="https://markruler.github.io/images/favicon.ico">



      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.02a482ebb330e36958a54ca8d1e6175b37fb0742710c08f013d129155839e07c.css" integrity="sha256-AqSC67Mw42lYpUyo0eYXWzf7B0JxDAjwE9EpFVg54Hw=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">



















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    About
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Posts
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ëª©ì°¨ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%9a%94" class="nav-ê°œìš”">
									ê°œìš”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ea%b8%b0%ec%a1%b4-%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4" class="nav-ê¸°ì¡´-í”„ë¡œì„¸ìŠ¤">
									ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%84%a0-%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4-continuous-delivery" class="nav-ê°œì„ -í”„ë¡œì„¸ìŠ¤-continuous-delivery">
									ê°œì„  í”„ë¡œì„¸ìŠ¤ (Continuous Delivery)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%eb%8f%84%ec%9e%85-%ea%b3%bc%ec%a0%95%ec%97%90%ec%84%9c-%eb%b0%9c%ec%83%9d%ed%95%9c-%eb%ac%b8%ec%a0%9c%eb%93%a4" class="nav-ë„ì…-ê³¼ì •ì—ì„œ-ë°œìƒí•œ-ë¬¸ì œë“¤">
									ë„ì… ê³¼ì •ì—ì„œ ë°œìƒí•œ ë¬¸ì œë“¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#active-health-check%ea%b0%80-%ed%95%84%ec%9a%94%ed%95%98%eb%8b%a4" class="nav-active-health-checkê°€-í•„ìš”í•˜ë‹¤">
									Active Health Checkê°€ í•„ìš”í•˜ë‹¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#iptables-%ec%84%9c%eb%b9%84%ec%8a%a4%eb%a5%bc-%eb%8b%a4%ec%8b%9c-%ec%8b%9c%ec%9e%91%ed%95%b4%ec%95%bc-%ed%95%a0-%eb%95%8c" class="nav-iptables-ì„œë¹„ìŠ¤ë¥¼-ë‹¤ì‹œ-ì‹œì‘í•´ì•¼-í• -ë•Œ">
									iptables ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•  ë•Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#httpd%eb%a5%bc-%eb%8b%a4%ec%8b%9c-%ec%8b%a4%ed%96%89%ed%95%b4%ec%95%bc-%ed%95%a0-%eb%95%8c" class="nav-httpdë¥¼-ë‹¤ì‹œ-ì‹¤í–‰í•´ì•¼-í• -ë•Œ">
									httpdë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•  ë•Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%84%a0%ec%9d%98-%ec%97%ac%ec%a7%80%ea%b0%80-%ec%9e%88%eb%8b%a4" class="nav-ê°œì„ ì˜-ì—¬ì§€ê°€-ìˆë‹¤">
									ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆë‹¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#sessionrepositoryfilter-%ec%97%90%eb%9f%ac-%ed%8e%98%ec%9d%b4%ec%a7%80-%ec%9d%91%eb%8b%b5" class="nav-sessionrepositoryfilter-ì—ëŸ¬-í˜ì´ì§€-ì‘ë‹µ">
									SessionRepositoryFilter ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#proxy" class="nav-proxy">
									Proxy
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#akamai-%ec%97%90%eb%9f%ac-%ed%8e%98%ec%9d%b4%ec%a7%80-%ec%9d%91%eb%8b%b5" class="nav-akamai-ì—ëŸ¬-í˜ì´ì§€-ì‘ë‹µ">
									Akamai ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#haproxy-%ec%a0%84%ed%99%98" class="nav-haproxy-ì „í™˜">
									HAProxy ì „í™˜
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ec%84%a0%ec%96%b8%ed%98%95-%eb%b0%b0%ed%8f%ac-gitops" class="nav-ì„ ì–¸í˜•-ë°°í¬-gitops">
									ì„ ì–¸í˜• ë°°í¬ (GitOps?)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%eb%8d%94-%ec%9d%bd%ec%9d%84-%ea%b1%b0%eb%a6%ac" class="nav-ë”-ì½ì„-ê±°ë¦¬">
									ë” ì½ì„ ê±°ë¦¬
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ea%b0%81%ec%a3%bc" class="nav-ê°ì£¼">
									ê°ì£¼
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://markruler.github.io/">
            ì„ì°½ìˆ˜
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://markruler.github.io/">
        <div class="single-column-header-title">ì„ì°½ìˆ˜</div>
        
        <div class="single-column-header-subtitle">What, Why, How.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://markruler.github.io/images/ci/old-system-2022.webp')"
                    
                
            >
                <div class="post-title">
                    Load Balancerë¥¼ í™œìš©í•´ì„œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°œì„ í•´ë³´ì
                    
                    <div class="post-subtitle">
                        ì—…ë¬´ ìë™í™”
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-08-17 03:44
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/">[case]</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/ci">ci</a>
                                &nbsp;
                            
                                <a href="/tags/cd">cd</a>
                                &nbsp;
                            
                                <a href="/tags/git">git</a>
                                &nbsp;
                            
                                <a href="/tags/devops">devops</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <ul>
<li><a href="#%EA%B0%9C%EC%9A%94">ê°œìš”</a>
<ul>
<li><a href="#%EA%B8%B0%EC%A1%B4-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4">ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤</a></li>
<li><a href="#%EA%B0%9C%EC%84%A0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-continuous-delivery">ê°œì„  í”„ë¡œì„¸ìŠ¤ (Continuous Delivery)</a></li>
</ul>
</li>
<li><a href="#%EB%8F%84%EC%9E%85-%EA%B3%BC%EC%A0%95%EC%97%90%EC%84%9C-%EB%B0%9C%EC%83%9D%ED%95%9C-%EB%AC%B8%EC%A0%9C%EB%93%A4">ë„ì… ê³¼ì •ì—ì„œ ë°œìƒí•œ ë¬¸ì œë“¤</a>
<ul>
<li><a href="#active-health-check%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%98%EB%8B%A4">Active Health Checkê°€ í•„ìš”í•˜ë‹¤</a></li>
<li><a href="#iptables-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A5%BC-%EB%8B%A4%EC%8B%9C-%EC%8B%9C%EC%9E%91%ED%95%B4%EC%95%BC-%ED%95%A0-%EB%95%8C">iptables ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•  ë•Œ</a></li>
<li><a href="#httpd%EB%A5%BC-%EB%8B%A4%EC%8B%9C-%EC%8B%A4%ED%96%89%ED%95%B4%EC%95%BC-%ED%95%A0-%EB%95%8C">httpdë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•  ë•Œ</a></li>
</ul>
</li>
<li><a href="#%EA%B0%9C%EC%84%A0%EC%9D%98-%EC%97%AC%EC%A7%80%EA%B0%80-%EC%9E%88%EB%8B%A4">ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆë‹¤</a>
<ul>
<li><a href="#sessionrepositoryfilter-%EC%97%90%EB%9F%AC-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9D%91%EB%8B%B5"><code>SessionRepositoryFilter</code> ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ</a></li>
<li><a href="#proxy">Proxy</a></li>
<li><a href="#akamai-%EC%97%90%EB%9F%AC-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9D%91%EB%8B%B5">Akamai ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ</a></li>
<li><a href="#haproxy-%EC%A0%84%ED%99%98">HAProxy ì „í™˜</a></li>
<li><a href="#%EC%84%A0%EC%96%B8%ED%98%95-%EB%B0%B0%ED%8F%AC-gitops">ì„ ì–¸í˜• ë°°í¬ (GitOps?)</a></li>
</ul>
</li>
<li><a href="#%EB%8D%94-%EC%9D%BD%EC%9D%84-%EA%B1%B0%EB%A6%AC">ë” ì½ì„ ê±°ë¦¬</a>
<ul>
<li><a href="#%EA%B0%81%EC%A3%BC">ê°ì£¼</a></li>
</ul>
</li>
</ul>
<h1 id="ê°œìš”">ê°œìš”</h1>
<p>í˜„ì¬ íŒ€ì—ì„œ ë¹Œë“œ-ë°°í¬ ë„êµ¬ë¡œ Bambooë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤.
ë†€ëê²Œë„ ê°œë°œìê°€ ì»¤ë°‹í•œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìš´ì˜ í™˜ê²½ì— ë°˜ì˜í•˜ê¸°ê¹Œì§€ 14ë‹¨ê³„ì˜ ìˆ˜ë™ ì‘ì—…ì´ í•„ìš”í–ˆë‹¤.
ê·¸ë˜ì„œ ê°œë°œíŒ€ ëª¨ë‘ê°€ ë°°í¬ ì‘ì—…ì— ë§ì€ ë¶€ë‹´ì„ ê°–ê³  ìˆì—ˆë‹¤.
í•œë²ˆ ë¹Œë“œí•˜ê³  ë°°í¬í•˜ëŠ”ë° ìµœì†Œ 30ë¶„ì—ì„œ ê¸¸ë©´ 1ì‹œê°„ê¹Œì§€ ê±¸ë¦¬ëŠ” ì´ ë¶ˆí•„ìš”í•œ ì‹œê°„ì„ ì¤„ì´ê³  ì‹¶ì—ˆë‹¤.</p>
<p><img src="/images/ci/old-system-2022.webp" alt="ê°œë°œì¤‘ì¸ ì„œë¹„ìŠ¤ì˜ ê¸°ì¡´ ì‹œìŠ¤í…œ"></p>
<p><em>í™”ì‚´í‘œ ë°©í–¥ì€ ë‹¨ìˆœíˆ ìš”ì²­ì˜ íë¦„ì„ ë‚˜íƒ€ë‚¸ë‹¤.</em></p>
<p>ë‹¨ì¼ ì„œë²„ì˜ ì²˜ë¦¬ëŸ‰(Capacity)ì„ ì´ˆê³¼í•œ ëŒ€ëŸ‰ ìš”ì²­ íŠ¸ë˜í”½ì€ ì†ë„ ì €í•˜ë‚˜ ì„œë¹„ìŠ¤ ì§€ì—° ë˜ëŠ” ì¥ì• ë¥¼ ìœ ë°œí•œë‹¤.
ì´ ìƒí™©ì„ ëŒ€ë¹„í•´ ë¶€í•˜(Load)ë¥¼ ì—¬ëŸ¬ ì„œë²„ë¡œ ë¶„ì‚°(Balancing)í•˜ëŠ” ê²ƒì„ ì„œë²„ ë¡œë“œ ë°¸ëŸ°ì‹±(SLB: Server Load Balancing)ì´ë¼ê³  í•œë‹¤.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>
ê¸°ì¡´ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” Alteon Application Switchë¥¼ Layer 4 ë¡œë“œ ë°¸ëŸ°ì„œë¡œ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤.
í•˜ì§€ë§Œ 80ë²ˆ í¬íŠ¸ì— ëŒ€í•œ Layer 4 í—¬ìŠ¤ì²´í¬ë§Œ í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì‹œ ì—°ê²°ì„ ë¹„í™œì„±í™”í•´ì•¼ í–ˆë‹¤.
ë°°í¬ ì‘ì—…ì˜ ëŒ€ë¶€ë¶„ì´ ì´ ì‘ì—…ì— ì˜ì¡´í–ˆë‹¤.
ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ ì¤‘ì¸ ì„œë²„ì— Apache HTTP ì„œë²„(<code>httpd</code>)ë„ ìˆì—ˆê¸° ë•Œë¬¸ì— ê°€ì¥ ë¹ ë¥´ê³  íš¨ê³¼ì ì¸ í•´ê²°ì±…ìœ¼ë¡œ Layer 7 Load Balancing ê¸°ëŠ¥ì„ ìƒê°í–ˆë‹¤.
ì •ë¦¬í•˜ìë©´ ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ì™€ ê°œì„  í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<h2 id="ê¸°ì¡´-í”„ë¡œì„¸ìŠ¤">ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤</h2>
<ol>
<li>ì½”ë“œ ë¦¬ë·°ë¥¼ ë§ˆì¹˜ê³  ì†ŒìŠ¤ ì½”ë“œê°€ ë°°í¬ ë¸Œëœì¹˜ì— ë³‘í•©ë˜ë©´ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¹Œë“œí•œë‹¤.
<ul>
<li>ëŒ€ë¶€ë¶„ì˜ ì´ìŠˆë“¤ì€ 2ê°œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜(<code>:38888</code>, <code>:39999</code>)ì— í•¨ê»˜ ë°˜ì˜ëœë‹¤.</li>
</ul>
</li>
<li><code>telnet</code> ì„ ì‚¬ìš©í•´ì„œ Alteon Switchì— ì ‘ì†í•œë‹¤.</li>
<li>ë°°í¬í•˜ê¸° ì „ì— ì„œë¹„ìŠ¤ ë„ë©”ì¸(<code>d1.markruler.com</code>, <code>d2.markruler.com</code>)ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.</li>
<li>ê°€ìƒ í˜¸ìŠ¤íŠ¸(vhost)ì— ë¬¶ì—¬ ìˆëŠ” <code>s1</code> ì„œë²„ë¥¼ ë¹„í™œì„±í™”í•œë‹¤.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-s" data-lang="s">&gt;&gt; Server Load Balancing Information<span style="color:#0f0"># /info/slb/virt 1</span>
  <span style="color:#f60">1</span>: IP4 &lt;vhost_IP_Address&gt;,   <span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>
  virtual ports:
  http: rport http, group <span style="color:#f60">1</span>, backup none, rtspslb none
      real servers:
          <span style="color:#f60">1</span>: &lt;s1_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
          <span style="color:#f60">2</span>: &lt;s2_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
  https: rport https, group <span style="color:#f60">1</span>, backup none, rtspslb none
      real servers:
          <span style="color:#f60">1</span>: &lt;s1_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
          <span style="color:#f60">2</span>: &lt;s2_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-s" data-lang="s">&gt;&gt; Main<span style="color:#0f0"># /cfg/slb/real 1/dis</span>
Current status: enabled
New status:     disabled

&gt;&gt; Main<span style="color:#0f0"># apply</span>
</code></pre></div><ol start="5">
<li>ë‹¤ì‹œ 3ë²ˆê³¼ ë™ì¼í•˜ê²Œ ì„œë¹„ìŠ¤ ë„ë©”ì¸ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.</li>
<li>Bambooë¥¼ ì‚¬ìš©í•´ì„œ ìƒˆë¡œìš´ ë²„ì „ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ 2ê°œ(<code>s1:38888</code>, <code>s1:39999</code>)ë¥¼ ë°°í¬í•œë‹¤.</li>
<li>ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë³„ë„ë¡œ í—¬ìŠ¤ì²´í¬ë¥¼ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìˆ˜ë™ìœ¼ë¡œ ì ‘ì†í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸(&ldquo;ìƒˆë¡œ ê³ ì¹¨&rdquo;)í•œë‹¤.</li>
<li>ì •ìƒì ìœ¼ë¡œ ì ‘ì†ë˜ë©´ Alteon Switchì—ì„œ <code>s1</code> ì„œë²„ë¥¼ í™œì„±í™”í•œë‹¤.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-s" data-lang="s">&gt;&gt; Main<span style="color:#0f0"># /cfg/slb/real 1/ena</span>
Current status: disabled
New status:     enabled

&gt;&gt; Main<span style="color:#0f0"># apply</span>
</code></pre></div><ol start="9">
<li>ê·¸ í›„ <code>s2</code> ì„œë²„ë¥¼ ë¹„í™œì„±í™”í•œë‹¤. (8ë²ˆê³¼ ë™ì‹œì— ì ìš©í•˜ë©´ Akamai CDN ì„œë¹„ìŠ¤ì—ì„œ <a href="#akamai-%EC%97%90%EB%9F%AC-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9D%91%EB%8B%B5"><code>ERR_ZERO_SIZE_OBJECT</code> ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤</a>)</li>
<li>ë‹¤ì‹œ 3ë²ˆê³¼ ë™ì¼í•˜ê²Œ ì„œë¹„ìŠ¤ ë„ë©”ì¸ì— ì ‘ì†í•  ìˆ˜  ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.</li>
<li>Bambooì—ì„œ ìƒˆë¡œìš´ ë²„ì „ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ 2ê°œ(<code>s2:38888</code>, <code>s2:39999</code>)ë¥¼ ë°°í¬í•œë‹¤.</li>
<li>ë‹¤ì‹œ 7ë²ˆê³¼ ë™ì¼í•œ ì´ìœ ë¡œ ì„œë¹„ìŠ¤ ë„ë©”ì¸ì— ì ‘ì†í•  ìˆ˜  ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.</li>
<li>ëª¨ë‘ ì ‘ì†ë˜ë©´ Alteon Switchì—ì„œ <code>s2</code> ì„œë²„ë¥¼ í™œì„±í™”í•œë‹¤.</li>
<li>ë§ˆì§€ë§‰ìœ¼ë¡œ ë°˜ì˜ ì‚¬í•­ì„ ê°ˆë¬´ë¦¬í•´ì„œ ì—…ë¬´ ë©”ì‹ ì €ì— ê³µìœ í•œë‹¤.</li>
</ol>
<h2 id="ê°œì„ -í”„ë¡œì„¸ìŠ¤-continuous-delivery">ê°œì„  í”„ë¡œì„¸ìŠ¤ (Continuous Delivery)</h2>
<p>ì›¹ ì„œë²„ê°€ ë™ì¼ ë¨¸ì‹ ì— ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ë§Œ ë°”ë¼ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ë¨¸ì‹ ì— ìˆëŠ” ì„œë²„ë„ ë°”ë¼ë³´ë„ë¡ ì„¤ì •í–ˆë‹¤.</p>
<p><img src="/images/ci/new-system-2022.webp" alt="ê°œë°œì¤‘ì¸ ì„œë¹„ìŠ¤ì˜ ìƒˆë¡œìš´ ì‹œìŠ¤í…œ"></p>
<blockquote>
<p>ì´ 14ë‹¨ê³„ì—ì„œ 1ë‹¨ê³„ê¹Œì§€ ì¤„ì˜€ë‹¤.
ë¨¼ì € ì½”ë“œ ë¦¬ë·°ë¥¼ ë§ˆì¹˜ê³  ì†ŒìŠ¤ ì½”ë“œê°€ í†µí•© ë¸Œëœì¹˜(trunk)ì— ë³‘í•©ë˜ë©´ ìë™ìœ¼ë¡œ ë¹Œë“œëœë‹¤.</p>
</blockquote>
<ol>
<li>ìš´ì˜ í™˜ê²½ì— ë°˜ì˜í•˜ê¸° ìœ„í•´ ë°°í¬ ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤.
<ul>
<li>
<p>ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•´ ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ ë²„ì „ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  í—¬ìŠ¤ì²´í¬í•œë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#e5e5e5">#!/usr/bin/env bash
</span><span style="color:#e5e5e5"></span>
<span style="color:#f00">while</span> ! curl --silent --output /dev/null --head --fail --max-time <span style="color:#f60">3</span> --location <span style="color:#87ceeb">${</span><span style="color:#eedd82">1</span><span style="color:#87ceeb">}</span>; <span style="color:#f00">do</span>
  echo <span style="color:#87ceeb">&#34;Healthchecking...</span><span style="color:#87ceeb">${</span><span style="color:#eedd82">1</span><span style="color:#87ceeb">}</span><span style="color:#87ceeb">&#34;</span>
  sleep <span style="color:#f60">2</span>
<span style="color:#f00">done</span>
</code></pre></div></li>
</ul>
</li>
</ol>
<ul>
<li><del>ë§ˆì§€ë§‰ìœ¼ë¡œ ë°˜ì˜ ì‚¬í•­ì„ ê°ˆë¬´ë¦¬í•´ì„œ ì—…ë¬´ ë©”ì‹ ì €ì— ê³µìœ í•œë‹¤.</del>
<ul>
<li>ì—…ë¬´ ë©”ì‹ ì €ê°€ Slackì—ì„œ NAVER Worksë¡œ ë³€ê²½ë˜ê³  ì—°ë™ì„ ëª»í•˜ê³  ìˆì—ˆëŠ”ë°
<a href="https://github.com/markruler/naver-works-plugin">Jenkins í”ŒëŸ¬ê·¸ì¸</a>ì„ ì§ì ‘ ë§Œë“¤ì–´ì„œ ì•Œë¦¼ ë©”ì‹œì§€ê°€ ê°€ë„ë¡ ë§Œë“¤ì—ˆë‹¤.</li>
</ul>
</li>
</ul>
<h1 id="ë„ì…-ê³¼ì •ì—ì„œ-ë°œìƒí•œ-ë¬¸ì œë“¤">ë„ì… ê³¼ì •ì—ì„œ ë°œìƒí•œ ë¬¸ì œë“¤</h1>
<h2 id="active-health-checkê°€-í•„ìš”í•˜ë‹¤">Active Health Checkê°€ í•„ìš”í•˜ë‹¤</h2>
<blockquote>
<p><a href="https://www.haproxy.com/documentation/hapee/2-5r1/load-balancing/health-checking/active-health-checks/">Active Health Check</a>ë€
ì£¼ê¸°ì ìœ¼ë¡œ ì„œë²„ì— ì—°ê²°ì„ ì‹œë„í•˜ê±°ë‚˜ HTTP ìš”ì²­ì„ ë³´ë‚´ì„œ ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•œë‹¤.
ë°˜ë©´ <a href="https://www.haproxy.com/documentation/hapee/2-5r1/load-balancing/health-checking/passive-health-checks/">Passive Health Check</a>ëŠ”
ì˜¤ë¥˜ê°€ ìˆëŠ”ì§€ í™œì„± íŠ¸ë˜í”½(active traffic)ë§Œ ê²€ì‚¬í•œë‹¤.</p>
</blockquote>
<p><code>s1</code> ê³¼ <code>s2</code> ì„œë²„ì—ëŠ” CentOS 7ì´ ì„¤ì¹˜ë˜ì–´ìˆë‹¤.
í•´ë‹¹ OSì—ì„œëŠ” httpdë¥¼ <strong>2.4.6 ë²„ì „</strong>ê¹Œì§€ë§Œ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">&gt; yum info httpd
...
Available Packages
Name        : httpd
Arch        : x86_64
Version     : 2.4.6
...
</code></pre></div><p>Layer 7 í—¬ìŠ¤ì²´í¬ë¥¼ ìœ„í•œ <code>mod_proxy_hcheck</code> ëª¨ë“ˆì€
<strong>2.4.21 ë²„ì „</strong>ë¶€í„° ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— OS ë³€ê²½ì´ ë¶ˆê°€í”¼í–ˆë‹¤.
í•˜ì§€ë§Œ í´ë¼ìš°ë“œ ì»´í“¨íŠ¸ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ
IDC ë¬¼ë¦¬ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— OS êµì²´ëŠ” ìƒë‹¹íˆ í° ë¶€ë‹´ì´ì—ˆë‹¤.
ê·¸ë˜ì„œ ì»¨í…Œì´ë„ˆë¥¼ ë„ì…í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.</p>
<p>ì„¤ì • íŒŒì¼(<code>httpd.conf</code>)ì€ ê¸°ì¡´ ì„¤ì •ì„ ìµœëŒ€í•œ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.
<code>volumes</code> ê²½ë¡œëŠ” ì–´ëŠ í™˜ê²½ì—ì„œë“  ë™ì¼í•˜ë„ë¡ ê°€ê¸‰ì  ì ˆëŒ€ ê²½ë¡œë¥¼ ì‚¬ìš©í–ˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">&gt; cd <span style="color:#87ceeb">${</span><span style="color:#eedd82">HOME</span><span style="color:#87ceeb">}</span>/httpd
&gt; ls
docker-compose.yaml  httpd.conf
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#0f0"># docker-compose.yaml</span>
version: <span style="color:#87ceeb">&#34;3.8&#34;</span>

services:
  slb:
    image: httpd:2.4.54-alpine
    container_name: slb
    hostname: markruler.com
    ports:
      - <span style="color:#f60">80</span>:<span style="color:#f60">80</span>
      - <span style="color:#f60">443</span>:<span style="color:#f60">443</span>
    volumes:
      <span style="color:#0f0"># httpd</span>
      - <span style="color:#87ceeb">&#39;/home/markruler/httpd/httpd.conf:/usr/local/apache2/conf/httpd.conf&#39;</span>

      <span style="color:#0f0"># logs</span>
      - <span style="color:#87ceeb">&#39;/etc/httpd/logs/d1.markruler:/usr/local/apache2/logs/d1.markruler&#39;</span>

      <span style="color:#0f0"># SSL</span>
      - <span style="color:#87ceeb">&#39;/etc/ssl/certs/d1.crt:/etc/ssl/certs/d1/cert.pem&#39;</span>
      - <span style="color:#87ceeb">&#39;/etc/ssl/certs/d1.key:/etc/ssl/certs/d1/privkey.pem&#39;</span>
      - <span style="color:#87ceeb">&#39;/etc/ssl/certs/d1.chain.crt:/etc/ssl/certs/d1/chain.pem&#39;</span>
      - <span style="color:#87ceeb">&#39;/etc/ssl/certs/CA_AAA_CERTIFICATE_SERVICES.crt:/etc/ssl/certs/d1/ca.pem&#39;</span>

      <span style="color:#0f0"># SSL Key Password</span>
      - <span style="color:#87ceeb">&#39;/etc/ssl/certs/key_password.sh:/etc/ssl/certs/d1/key_password.sh&#39;</span>

networks:
  default:
    driver_opts:
      com.docker.network.enable_ipv6: <span style="color:#87ceeb">&#34;false&#34;</span>
    ipam:
      driver: default
      config:
        - subnet: <span style="color:#f60">172.18.0.0</span>/16 <span style="color:#0f0"># 255.255.0.0</span>
          gateway: <span style="color:#f60">172.18.0.1</span>
</code></pre></div><p><code>httpd -t</code> ëª…ë ¹ì–´ë¡œ ì„œë²„ ì‹¤í–‰ ì „ ì„¤ì • íŒŒì¼ì„ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">sudo docker compose run --rm slb httpd -t
</code></pre></div><p><code>up</code> ëª…ë ¹ì–´ë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•œë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#0f0"># sudo docker compose up --detach</span>
sudo docker compose -f <span style="color:#87ceeb">${</span><span style="color:#eedd82">HOME</span><span style="color:#87ceeb">}</span>/httpd/docker-compose.yaml up -d
</code></pre></div><p><code>docker inspect</code> ëª…ë ¹ì–´ë¡œ ì‹¤ì œ ì‹¤í–‰ëœ ì»¨í…Œì´ë„ˆì˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">sudo docker inspect slb
</code></pre></div><h2 id="iptables-ì„œë¹„ìŠ¤ë¥¼-ë‹¤ì‹œ-ì‹œì‘í•´ì•¼-í• -ë•Œ">iptables ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•  ë•Œ</h2>
<p>iptables ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ë©´ <code>/etc/sysconfig/iptables</code> íŒŒì¼ì—
ìˆëŠ” ê·œì¹™ë“¤ë§Œ ì ìš©ë˜ê¸° ë•Œë¬¸ì— Dockerì—ì„œ ì„¤ì •í•˜ëŠ” iptables ê·œì¹™ì´ ì‚¬ë¼ì§„ë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">&gt; systemctl restart iptables
</code></pre></div><p>ì‹¤ì œë¡œ Docker ë„ì… ì‚¬ì‹¤ì„ IDC ë§¤ë‹ˆì €ì™€ ê³µìœ í•˜ì§€ ì•Šì•˜ë‹¤ê°€ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.
IDC ë§¤ë‹ˆì €ê°€ ìš°ë¦¬ íšŒì‚¬ ì¸¡ ìš”ì²­ìœ¼ë¡œ iptables ê·œì¹™ì„ ë³€ê²½í•˜ê³  ì¬ì‹œì‘í–ˆëŠ”ë°
í•´ë‹¹ ì„œë²„ì˜ Docker ë„¤íŠ¸ì›Œí¬ ê·œì¹™ë“¤ì´ ì‚¬ë¼ì ¸ì„œ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ì§€ ëª»í•˜ê³  ìˆì—ˆë‹¤.
í˜„ì¬ëŠ” iptablesë¥¼ ì¬ì‹¤í–‰í•  ë•Œ Dockerë„ ê°™ì´ ì¬ì‹¤í–‰í•œë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">&gt; systemctl restart docker
&gt; iptables -nvL
</code></pre></div><p>ì¶”ê°€ë¡œ ì»¨í…Œì´ë„ˆì—ì„œ ê° ì„œë¹„ìŠ¤ë¡œ íŠ¸ë˜í”½ì„ ë³´ë‚´ê¸° ìœ„í•´ iptables ê·œì¹™ì„ ì¶”ê°€í•œë‹¤.
Docker ë°ëª¬ì€ ê¸°ë³¸ì ìœ¼ë¡œ <code>docker0</code> ë¼ëŠ” ë¸Œë¦¿ì§€ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° IP address rangeë¥¼
<a href="https://github.com/moby/moby/blob/a77317882d010b884a9101c6ad0b2d7db141082f/libnetwork/docs/network.md">172.17.0.1/16</a> ìœ¼ë¡œ ì„¤ì •í•œë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">&gt; ip -br -c a
lo               UNKNOWN        127.0.0.1/8 ::1/128
docker0          DOWN           172.17.0.1/16 <span style="color:#0f0"># HERE!</span>
</code></pre></div><p>iptables ê·œì¹™ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ë¥¼ ê³ ì •ì‹œì¼°ë‹¤.
<a href="https://docs.docker.com/network/bridge/">bip</a>ëŠ” Docker ë°ëª¬ì´ ì‚¬ìš©í•  bridge network IP address rangeë¥¼ ì§€ì •í•˜ëŠ” ì˜µì…˜ì´ë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-sh" data-lang="sh"><span style="color:#0f0"># ê¸°ë³¸ ì„¤ì •</span>
cat <span style="color:#87ceeb">&lt;&lt;EOF | sudo tee /etc/docker/daemon.json
</span><span style="color:#87ceeb">{
</span><span style="color:#87ceeb">  &#34;bip&#34;: &#34;172.17.0.1/16&#34;
</span><span style="color:#87ceeb">}
</span><span style="color:#87ceeb">EOF</span>
</code></pre></div><p>Docker ë°ëª¬ì„ ì¬ì‹œì‘í•˜ë©´ <code>docker0</code> ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ê°€ ë³€ê²½ë˜ì–´ ìˆì„ ê²ƒì´ë‹¤.
ì´ì œ ì»¨í…Œì´ë„ˆì—ì„œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ íŒ¨í‚·ì„ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ iptables ê·œì¹™ì„ ì¶”ê°€í•œë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">&gt; vi /etc/sysconfig/iptables

-A INPUT -m state --state NEW -s 172.16.0.0/12 -m tcp -p tcp --dport <span style="color:#f60">38888</span> -j ACCEPT
-A INPUT -m state --state NEW -s 172.16.0.0/12 -m tcp -p tcp --dport <span style="color:#f60">39999</span> -j ACCEPT
</code></pre></div><p><code>172.16.0.0/12</code> ë¡œ ì„¤ì •í•œ ì´ìœ ëŠ” docker-composeë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ê²½ìš°
ì´ë¯¸ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ ì¶”ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
ë§Œì•½ <code>docker0</code> ì™€ ë™ì¼í•œ <code>172.17.0.1/16</code> ìœ¼ë¡œ ìƒì„±í•˜ë ¤ê³  ì‹œë„í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">failed to create network httpd_default: Error response from daemon: Pool overlaps with other one on this address space
</code></pre></div><p>Dockerì—ì„œ ì¶”ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ <code>172.17-31.x.x/16</code>, <code>192.168.x.x/20</code> ë²”ìœ„ì—ì„œ ì¶”ê°€í•˜ê²Œ ëœë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go"><span style="color:#0f0">// https://github.com/moby/moby/blob/df650a1aeb190a319287c4d26bd3593b5343fb72/libnetwork/ipamutils/utils.go
</span><span style="color:#0f0"></span><span style="color:#f00">var</span> (
  <span style="color:#0f0">// PredefinedLocalScopeDefaultNetworks contains a list of 31 IPv4 private networks with host size 16 and 12
</span><span style="color:#0f0"></span>  <span style="color:#0f0">// (172.17-31.x.x/16, 192.168.x.x/20) which do not overlap with the networks in `PredefinedGlobalScopeDefaultNetworks`
</span><span style="color:#0f0"></span>  PredefinedLocalScopeDefaultNetworks []*net.IPNet
  <span style="color:#0f0">// PredefinedGlobalScopeDefaultNetworks contains a list of 64K IPv4 private networks with host size 8
</span><span style="color:#0f0"></span>  <span style="color:#0f0">// (10.x.x.x/24) which do not overlap with the networks in `PredefinedLocalScopeDefaultNetworks`
</span><span style="color:#0f0"></span>  PredefinedGlobalScopeDefaultNetworks []*net.IPNet
  mutex                                sync.Mutex
  localScopeDefaultNetworks = []*NetworkToSplit{{<span style="color:#87ceeb">&#34;172.17.0.0/16&#34;</span>, <span style="color:#f60">16</span>},
                                                {<span style="color:#87ceeb">&#34;172.18.0.0/16&#34;</span>, <span style="color:#f60">16</span>},
                                                {<span style="color:#87ceeb">&#34;172.19.0.0/16&#34;</span>, <span style="color:#f60">16</span>},
                                                {<span style="color:#87ceeb">&#34;172.20.0.0/14&#34;</span>, <span style="color:#f60">16</span>},
                                                {<span style="color:#87ceeb">&#34;172.24.0.0/14&#34;</span>, <span style="color:#f60">16</span>},
                                                {<span style="color:#87ceeb">&#34;172.28.0.0/14&#34;</span>, <span style="color:#f60">16</span>},
                                                {<span style="color:#87ceeb">&#34;192.168.0.0/16&#34;</span>, <span style="color:#f60">20</span>}}
  globalScopeDefaultNetworks = []*NetworkToSplit{{<span style="color:#87ceeb">&#34;10.0.0.0/8&#34;</span>, <span style="color:#f60">24</span>}}
)

<span style="color:#f00">func</span> <span style="color:#ff0">init</span>() {
  <span style="color:#f00">var</span> err <span style="color:#ee82ee">error</span>
  <span style="color:#f00">if</span> PredefinedGlobalScopeDefaultNetworks, err = <span style="color:#ff0">splitNetworks</span>(globalScopeDefaultNetworks); err != <span style="color:#f00">nil</span> {
    panic(<span style="color:#87ceeb">&#34;failed to initialize the global scope default address pool: &#34;</span> + err.<span style="color:#ff0">Error</span>())
  }

  <span style="color:#f00">if</span> PredefinedLocalScopeDefaultNetworks, err = <span style="color:#ff0">splitNetworks</span>(localScopeDefaultNetworks); err != <span style="color:#f00">nil</span> {
    panic(<span style="color:#87ceeb">&#34;failed to initialize the local scope default address pool: &#34;</span> + err.<span style="color:#ff0">Error</span>())
  }
}
</code></pre></div><p>ë§Œì•½ ë²”ìœ„ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´ <a href="https://docs.mirantis.com/mke/3.4/install/plan-deployment/mcr-considerations/default-address-pools.html">Mirantis ë¬¸ì„œ</a>ì²˜ëŸ¼ <code>default-address-pools</code> ì˜µì…˜ì„ ì§ì ‘ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">{
  <span style="color:#87ceeb">&#34;default-address-pools&#34;</span>: [
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.17.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>}, &lt;-- docker0
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.18.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.19.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.20.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.21.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.22.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.23.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.24.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.25.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.26.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.27.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.28.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.29.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;172.30.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">16</span>},
    {<span style="color:#87ceeb">&#34;base&#34;</span>:<span style="color:#87ceeb">&#34;192.168.0.0/16&#34;</span>,<span style="color:#87ceeb">&#34;size&#34;</span>:<span style="color:#f60">20</span>}
  ]
}
</code></pre></div><p>ì„¤ì •ì´ ëë‚¬ë‹¤ë©´ iptablesë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.</p>
<h2 id="httpdë¥¼-ë‹¤ì‹œ-ì‹¤í–‰í•´ì•¼-í• -ë•Œ">httpdë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•  ë•Œ</h2>
<blockquote>
<p>httpd ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹¤í–‰(restart)í•˜ì§€ ì•Šê³ ë„ ì„¤ì • íŒŒì¼ì„ ë‹¤ì‹œ ì ìš©(reload)í•˜ëŠ” ë°©ë²•ì„ ì•„ì§ ì°¾ì§€ ëª»í–ˆë‹¤.</p>
</blockquote>
<p>í…ŒìŠ¤íŠ¸ í™˜ê²½ì˜ Alteon Switchì—ì„œ Layer 4 í—¬ìŠ¤ì²´í¬ê°€ ì˜ ë˜ëŠ”ì§€ í™•ì¸í•´ ë³¸ë‹¤.
ê·¸ëŸ¬ê³ ëŠ” <code>s2</code> ì„œë²„ì˜ <code>httpd</code> ë¥¼ ì£½ì—¬ë³¸ë‹¤.
<code>FAILED</code> ìƒíƒœê°€ ë˜ê³  íŠ¸ë˜í”½ì„ ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-s" data-lang="s">&gt;&gt; Server Load Balancing Information<span style="color:#0f0"># /info/slb/virt 1</span>
   <span style="color:#f60">1</span>: IP4 &lt;vhost_IP_Address&gt;,   <span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>
    virtual ports:
    http: rport http, group <span style="color:#f60">1</span>, backup none, rtspslb none
        real servers:
           <span style="color:#f60">1</span>: &lt;s1_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
           <span style="color:#f60">2</span>: &lt;s2_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, FAILED <span style="color:#0f0"># HERE!</span>
    https: rport https, group <span style="color:#f60">1</span>, backup none, rtspslb none
        real servers:
           <span style="color:#f60">1</span>: &lt;s1_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
           <span style="color:#f60">2</span>: &lt;s2_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, FAILED <span style="color:#0f0"># HERE!</span>
</code></pre></div><p>ë‹¤ì‹œ <code>httpd</code> ë¥¼ ì‚´ë ¤ë³¸ë‹¤.
<code>up</code> ìƒíƒœê°€ ë˜ê³  íŠ¸ë˜í”½ì„ ë³´ë‚¸ë‹¤!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-s" data-lang="s">&gt;&gt; Server Load Balancing Information<span style="color:#0f0"># /info/slb/virt 1</span>
   <span style="color:#f60">1</span>: IP4 &lt;vhost_IP_Address&gt;,   <span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>:<span style="color:#f60">00</span>
    virtual ports:
    http: rport http, group <span style="color:#f60">1</span>, backup none, rtspslb none, slowstart
        real servers:
           <span style="color:#f60">1</span>: &lt;s1_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
           <span style="color:#f60">2</span>: &lt;s2_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up <span style="color:#0f0"># HERE!</span>
    https: rport https, group <span style="color:#f60">1</span>, backup none, rtspslb none, slowstart
        real servers:
           <span style="color:#f60">1</span>: &lt;s1_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up
           <span style="color:#f60">2</span>: &lt;s2_IP_Address&gt;, backup none, <span style="color:#f60">0</span> ms, group ena, up <span style="color:#0f0"># HERE!</span>
</code></pre></div><h1 id="ê°œì„ ì˜-ì—¬ì§€ê°€-ìˆë‹¤">ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆë‹¤</h1>
<p>ì•„ë˜ì—ì„œ ì–¸ê¸‰í•  ì‚¬í•­ë“¤ì€ ìœ„ì—ì„œ ë„ì…í•œ ê¸°ìˆ ê³¼ ë³„ê°œë¡œ ê¸°ì¡´ì—ë„ ë°œìƒí•˜ë˜ ë¬¸ì œë‹¤.</p>
<h2 id="sessionrepositoryfilter-ì—ëŸ¬-í˜ì´ì§€-ì‘ë‹µ"><code>SessionRepositoryFilter</code> ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ</h2>
<p>Tomcat Shutdown ì§í›„ ì¼ì‹œì ìœ¼ë¡œ ì‘ë‹µë°›ì„ ìˆ˜ ìˆë‹¤. Graceful Shutdown, ìš”ì²­ ì¬ì‹œë„(retry) ë“±ì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java">Type - Exception report
Message - Request processing failed; nested exception is java.lang.NullPointerException
Description - The server encountered an internal error that prevented it from fulfilling <span style="color:#f00">this</span> request.

Exception
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException
  ...
  org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:105)
  ...
  org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
  org.apache.catalina.filters.HttpHeaderSecurityFilter.doFilter(HttpHeaderSecurityFilter.java:126)
  org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316)
  ...

Root Cause
java.lang.NullPointerException
  org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$SessionCommittingRequestDispatcher.forward(SessionRepositoryFilter.java:447)
  ...
</code></pre></div><h2 id="proxy">Proxy</h2>
<p>upstream ì„œë²„(Tomcat)ì˜ ì‘ë‹µì´ ëŠ¦ì–´ì§ˆ ê²½ìš° ë°œìƒí•  ìˆ˜ ìˆë‹¤.
<code>mod_proxy</code> ì˜ timeout ê°’ì„ ì¡°ì ˆí•˜ì—¬ ì‘ë‹µì´ ëŠ¦ì–´ì§€ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-html" data-lang="html"><span style="color:#0f0">&lt;!-- 502 Bad Gateway --&gt;</span>
Proxy Error

The proxy server received an invalid response from an upstream server.
The proxy server could not handle the request

Reason: Error reading from remote server
</code></pre></div><h2 id="akamai-ì—ëŸ¬-í˜ì´ì§€-ì‘ë‹µ">Akamai ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ</h2>
<p>Layer 4 Switchì—ì„œ 1ë²ˆ ì„œë²„ì™€ 2ë²ˆ ì„œë²„ ìƒíƒœë¥¼ ë™ì‹œì— êµì²´í•  ê²½ìš° ì‘ë‹µë°›ì„ ìˆ˜ ìˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, 1ë²ˆ ì„œë²„ëŠ” <code>disable</code>, 2ë²ˆ ì„œë²„ëŠ” <code>enable</code> ìƒíƒœì¼ ë•Œ
1ë²ˆ ì„œë²„ë¥¼ <code>enable</code>, 2ë²ˆ ì„œë²„ë¥¼ <code>disable</code> ìƒíƒœë¡œ ë³€ê²½í•œ í›„ <code>apply</code> í•˜ë©´
ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">Service Unavailable - Zero size object

The server is temporarily unable to service your request. Please try again later.

Reference <span style="color:#0f0">#15.6f4bc817.1651592357.1872133</span>
</code></pre></div><p>2ë²ˆ ì„œë²„ë¡œ ê°”ë˜ íŒ¨í‚·ì´ ê°‘ìê¸° ìœ ì‹¤ë˜ë©´ CDNì—ì„œ ë°›ëŠ” ì‘ë‹µ ë°ì´í„°ê°€ ì—†ì–´ì„œ ë°œìƒí•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì¸¡í•˜ê³  ìˆë‹¤. ğŸ¤¯
<a href="https://techdocs.akamai.com/edge-diagnostics/docs/error-codes">Akamai Reference</a>ì— ë”°ë¥´ë©´ <code>#15.x.x.x</code>ëŠ” <code>ERR_ZERO_SIZE_OBJECT</code> ì—ëŸ¬ë‹¤.</p>
<blockquote>
<p><code>ERR_ZERO_SIZE_OBJECT</code> â€” A response from the origin server has zero length.</p>
</blockquote>
<p>Akamaiì— ë¬¸ì˜ ê²°ê³¼ í•´ë‹¹ í˜ì´ì§€ëŠ” ì»¤ìŠ¤í…€ í•  ìˆ˜ ì—†ë‹¤ê³  í•œë‹¤.
ë²„ë ¤ì§€ëŠ” ìš”ì²­ë“¤ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€ ê³ ë¯¼ì´ í•„ìš”í•˜ë‹¤.</p>
<h2 id="haproxy-ì „í™˜">HAProxy ì „í™˜</h2>
<p>ì´ë¯¸ ë¶€ë¶„ì ìœ¼ë¡œ HAProxyë¥¼ ì‚¬ìš©í•´ì„œ ì„œë¹„ìŠ¤ë¥¼ ì´ì¤‘í™”í•˜ê³  ìˆì—ˆë‹¤.
HAProxyë¥¼ ì„ íƒí•œ ì´ìœ ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <a href="https://www.haproxy.com/blog/exploring-the-haproxy-stats-page/">statistics ê¸°ëŠ¥ì´ Web UIë¡œ ì œê³µ</a>ë˜ë©´ì„œ
Layer 4, Layer 7 ìŠ¤ìœ„ì¹˜ë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ì—ˆë‹¤.</p>
<p><img src="/images/web/haproxy-statistics-report.webp" alt="HAProxy"></p>
<p><strong>ë¬´ì—‡ë³´ë‹¤ë„ XML í˜•ì‹ì¸ httpd ì„¤ì • íŒŒì¼ì— ë¹„í•´ HAProxyì˜ ì„¤ì • íŒŒì¼ì€ ì •ë§ ê°„ì†Œí•˜ê²Œ ëŠê»´ì¡Œê¸° ë•Œë¬¸ì— ì „í™˜í•˜ê³  ì‹¶ì—ˆë‹¤.</strong>
ë˜í•œ ê°€ì¥ í”íˆ ì“°ëŠ” ê²ƒ ê°™ì€ NGINXë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë˜ ì´ìœ ëŠ” ê°€ì¥ ì›í–ˆë˜ ê¸°ëŠ¥ì¸
<a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/http-health-check/">Active Healthcheckê°€ ìœ ë£Œ(NGINX Plus) ê¸°ëŠ¥</a>ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p>
<h2 id="ì„ ì–¸í˜•-ë°°í¬-gitops">ì„ ì–¸í˜• ë°°í¬ (GitOps?)</h2>
<p>Bambooì—ì„œëŠ” <a href="https://confluence.atlassian.com/bamboo/bamboo-specs-894743906.html">Bamboo Specs</a>ë¼ëŠ” ëª…ì¹­ìœ¼ë¡œ Infrastructure as Code(IaC)ë¥¼ êµ¬í˜„í•œë‹¤.
â€” <a href="https://confluence.atlassian.com/bamboo/bamboo-yaml-specs-938844479.html">YAML Specs</a>ì˜
ì„¤ì • íŒŒì¼ì—ì„œëŠ” SCP, SSH ë“± ì£¼ìš” í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—
<a href="https://confluence.atlassian.com/bamboo/bamboo-java-specs-941616821.html">Java Specs</a>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#0f0"># Task com.atlassian.bamboo.plugins.bamboo-scp-plugin:scptask is not supported yet</span>
<span style="color:#0f0"># Task com.atlassian.bamboo.plugins.bamboo-scp-plugin:sshtask is not supported yet</span>
</code></pre></div><p>ë°˜ë©´ JenkinsëŠ” ì‚¬ìš©ìê°€ ë§ê¸° ë•Œë¬¸ì— ë¹„êµì  ë§ì€ í”ŒëŸ¬ê·¸ì¸ì„ ì§€ì›í•˜ë©° ë ˆí¼ëŸ°ìŠ¤ë„ ë§ë‹¤.
Jenkins Pipelineì„ í™œìš©í•˜ë©´ <code>Jenkinsfile</code> ì„ ì‚¬ìš©í•´ì„œ ì„ ì–¸í˜• ë°°í¬ ë°©ì‹ìœ¼ë¡œ ì‰½ê²Œ ì´ì „í•  ìˆ˜ë„ ìˆë‹¤.
ê·¸ëŸ¼ ë¹Œë“œ-ë°°í¬ ê³¼ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹¤ìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆê³ , ì„¤ì • ì •ë³´ë¥¼ ë²„ì „ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.</p>
<p>ë˜í•œ BambooëŠ” Slackìœ¼ë¡œ ì•Œë¦¼ì„ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” Instant Message(IM) ì„œë²„ê°€ í•„ìš”í•˜ë‹¤.
ë°˜ë©´ JenkinsëŠ” Slack ì—°ë™ í”ŒëŸ¬ê·¸ì¸ë§Œ ì„¤ì¹˜í•˜ë©´ ì‰½ê²Œ ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.
ê·¸ëŸ¼ ë°°í¬ ì‘ì—…ì€ ë‹¨ 1ë‹¨ê³„ë¡œ ì¤„ì–´ë“ ë‹¤.
â€” ë‹¤ë§Œ ê¸°ì¡´ì—ëŠ” ë°˜ì˜ ì‚¬í•­ì„ ê³µìœ í•  ë•Œ Bambooì™€ ì—°ë™ë˜ì–´ ìˆëŠ” Jira ì´ìŠˆë§Œ ê°„ë‹¨íˆ ìº¡ì²˜í•˜ë©´ ëì§€ë§Œ,
ì•„ì§ Jenkinsì™€ Jiraë¥¼ ì—°ë™í•˜ì§€ ëª»í•´ì„œ ì–´ë–»ê²Œ ê³µìœ í•´ì•¼ í• ì§€ ê³ ë¯¼ì´ í•„ìš”í•˜ë‹¤.</p>
<h1 id="ë”-ì½ì„-ê±°ë¦¬">ë” ì½ì„ ê±°ë¦¬</h1>
<ul>
<li>CI/CD
<ul>
<li><a href="https://github.com/xpdojo/docs/blob/da871cd8fc4e59736a5f5ab5a44908534505b29f/reference/agile/ci-cd.md">CI/CD ì •ë¦¬</a> - markruler</li>
<li><a href="https://github.com/xpdojo/docs/blob/da871cd8fc4e59736a5f5ab5a44908534505b29f/reference/agile/continuous-integration.md">&lt;ì§€ì†ì ì¸ í†µí•©&gt; ìš”ì•½</a> - markruler</li>
<li><a href="https://blog.banksalad.com/tech/become-an-organization-that-deploys-1000-times-a-day/">í•˜ë£¨ì— 1000ë²ˆ ë°°í¬í•˜ëŠ” ì¡°ì§ ë˜ê¸°</a> - Banksalad</li>
<li><a href="https://tech.kakaoenterprise.com/113">Release Note í†ºì•„ë³´ê¸°</a> - kakao enterprise</li>
</ul>
</li>
<li>Proxy Server
<ul>
<li><a href="https://www.lesstif.com/system-admin/forward-proxy-reverse-proxy-21430345.html">í¬ì›Œë“œ í”„ë¡ì‹œ(forward proxy) ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ(reverse proxy)ì˜ ì°¨ì´</a> - lesstif
<ul>
<li><a href="https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/">Proxy servers explained</a> - Cloudflare</li>
<li><a href="https://oxylabs.io/blog/reverse-proxy-vs-forward-proxy">Reverse Proxy vs. Forward Proxy: The Differences</a> - Oxylabs</li>
</ul>
</li>
</ul>
</li>
<li>SLB: Server Load Balancing
<ul>
<li><a href="https://www.nginx.com/resources/glossary/layer-7-load-balancing/">Differences Between Layer 4 and Layer 7 Load Balancing</a> - NGINX
<ul>
<li><a href="https://blog.cloudflare.com/high-availability-load-balancers-with-maglev/">High Availability Load Balancers with Maglev</a> - Cloudflare</li>
<li><a href="https://vincent.bernat.ch/en/blog/2018-multi-tier-loadbalancer">Multi-tier load-balancing with Linux</a> - Vincent Bernat</li>
<li><a href="https://blog.cloudflare.com/a-primer-on-proxies/">A Primer on Proxies</a> - Cloudflare</li>
<li><a href="https://levelup.gitconnected.com/l4-vs-l7-load-balancing-d2012e271f56">L4 vs L7 Load Balancing</a> - Mohak Puri</li>
<li><a href="https://www.nowwatersblog.com/backend/serverLoad/L4L7">L4 &amp; L7</a> - nowwater</li>
</ul>
</li>
<li>&lt;ì¸í”„ë¼/ë„¤íŠ¸ì›Œí¬ ì—”ì§€ë‹ˆì–´ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ì´í•´ ë° ì„¤ê³„ ê°€ì´ë“œ&gt; - ë¯¸ì•¼íƒ€ íˆë¡œì‹œ</li>
<li>&lt;ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ì˜ êµê³¼ì„œ: ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬í¸&gt; - ê¸°ìˆ í‰ë¡ ì‚¬ ì—®ìŒ</li>
<li>&lt;ì›¹ ì—”ì§€ë‹ˆì–´ê°€ ì•Œì•„ì•¼ í•  ì¸í”„ë¼ì˜ ê¸°ë³¸&gt; - ë°”ë°” í† ì‹œì•„í‚¤</li>
<li><a href="https://tech.kakao.com/2014/05/30/l4/">L4 ì¥ë¹„ì˜ ë™ì‘ê³¼ ì„œë¹„ìŠ¤ ë°°í¬ì‹œ ìœ ì˜ì </a> - Kakao</li>
<li><a href="https://elky84.github.io/2018/08/19/network_issue/">L4 ìŠ¤ìœ„ì¹˜ ë„ì…ì‹œ ìƒê²¼ë˜ ì´ì•¼ê¸°</a> - elky84</li>
<li><a href="https://meetup.toast.com/posts/189">Safe Deploy - ì•ˆì „í•˜ê²Œ L4 ì—ì„œ ì œì™¸í•˜ëŠ” ë°©ë²•</a> - NHN</li>
<li><a href="https://d2.naver.com/helloworld/284659">L4/L7 ìŠ¤ìœ„ì¹˜ì˜ ëŒ€ì•ˆ, ì˜¤í”ˆ ì†ŒìŠ¤ ë¡œë“œ ë°¸ëŸ°ì„œ HAProxy</a> - NAVER D2</li>
</ul>
</li>
<li>Docker
<ul>
<li><a href="https://subicura.com/2016/06/07/zero-downtime-docker-deployment.html">ë„ì»¤ë¥¼ ì´ìš©í•œ ì›¹ì„œë¹„ìŠ¤ ë¬´ì¤‘ë‹¨ ë°°í¬í•˜ê¸°</a> - subicura</li>
<li><a href="https://straz.to/2021-09-08-docker-address-pools/">The definitive guide to docker&rsquo;s default-address-pools option</a></li>
</ul>
</li>
</ul>
<h2 id="ê°ì£¼">ê°ì£¼</h2>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>&lt;AWS í† í´ë¡œì§€ë¡œ ì´í•´í•˜ëŠ” Amazon VPC&gt; 10ì¥. ë¶„ì‚° ì œì–´ - ì°¨ì •ë„&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">ìµœì¢… ìˆ˜ì •: 2022-08-17</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/gui/x-based-desktop/">
			ë‹¤ìŒê¸€<br>X Window System
                </a>
                
                
                
                <a class="older-posts" href="/posts/java/jvm-monitoring/">
			ì´ì „ê¸€<br>JVM ëª¨ë‹ˆí„°ë§
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












            </div>
        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://markruler.github.io/">
    
        <div class="nav-title">
            ì„ì°½ìˆ˜
        </div>
        
        <div class="nav-subtitle">
            What, Why, How.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                About
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Posts
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        


Hugo Theme <a style="color: #0054B8; text-decoration: underline;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
by <a style="color: #0054B8; text-decoration: underline;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0054B8; text-decoration: underline;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s
<a style="color: #0054B8; text-decoration: underline;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu 2020 - 2024
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ëª©ì°¨ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%9a%94" class="nav-ê°œìš”">
									ê°œìš”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ea%b8%b0%ec%a1%b4-%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4" class="nav-ê¸°ì¡´-í”„ë¡œì„¸ìŠ¤">
									ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%84%a0-%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4-continuous-delivery" class="nav-ê°œì„ -í”„ë¡œì„¸ìŠ¤-continuous-delivery">
									ê°œì„  í”„ë¡œì„¸ìŠ¤ (Continuous Delivery)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%eb%8f%84%ec%9e%85-%ea%b3%bc%ec%a0%95%ec%97%90%ec%84%9c-%eb%b0%9c%ec%83%9d%ed%95%9c-%eb%ac%b8%ec%a0%9c%eb%93%a4" class="nav-ë„ì…-ê³¼ì •ì—ì„œ-ë°œìƒí•œ-ë¬¸ì œë“¤">
									ë„ì… ê³¼ì •ì—ì„œ ë°œìƒí•œ ë¬¸ì œë“¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#active-health-check%ea%b0%80-%ed%95%84%ec%9a%94%ed%95%98%eb%8b%a4" class="nav-active-health-checkê°€-í•„ìš”í•˜ë‹¤">
									Active Health Checkê°€ í•„ìš”í•˜ë‹¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#iptables-%ec%84%9c%eb%b9%84%ec%8a%a4%eb%a5%bc-%eb%8b%a4%ec%8b%9c-%ec%8b%9c%ec%9e%91%ed%95%b4%ec%95%bc-%ed%95%a0-%eb%95%8c" class="nav-iptables-ì„œë¹„ìŠ¤ë¥¼-ë‹¤ì‹œ-ì‹œì‘í•´ì•¼-í• -ë•Œ">
									iptables ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•  ë•Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#httpd%eb%a5%bc-%eb%8b%a4%ec%8b%9c-%ec%8b%a4%ed%96%89%ed%95%b4%ec%95%bc-%ed%95%a0-%eb%95%8c" class="nav-httpdë¥¼-ë‹¤ì‹œ-ì‹¤í–‰í•´ì•¼-í• -ë•Œ">
									httpdë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•  ë•Œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%84%a0%ec%9d%98-%ec%97%ac%ec%a7%80%ea%b0%80-%ec%9e%88%eb%8b%a4" class="nav-ê°œì„ ì˜-ì—¬ì§€ê°€-ìˆë‹¤">
									ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆë‹¤
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#sessionrepositoryfilter-%ec%97%90%eb%9f%ac-%ed%8e%98%ec%9d%b4%ec%a7%80-%ec%9d%91%eb%8b%b5" class="nav-sessionrepositoryfilter-ì—ëŸ¬-í˜ì´ì§€-ì‘ë‹µ">
									SessionRepositoryFilter ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#proxy" class="nav-proxy">
									Proxy
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#akamai-%ec%97%90%eb%9f%ac-%ed%8e%98%ec%9d%b4%ec%a7%80-%ec%9d%91%eb%8b%b5" class="nav-akamai-ì—ëŸ¬-í˜ì´ì§€-ì‘ë‹µ">
									Akamai ì—ëŸ¬ í˜ì´ì§€ ì‘ë‹µ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#haproxy-%ec%a0%84%ed%99%98" class="nav-haproxy-ì „í™˜">
									HAProxy ì „í™˜
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ec%84%a0%ec%96%b8%ed%98%95-%eb%b0%b0%ed%8f%ac-gitops" class="nav-ì„ ì–¸í˜•-ë°°í¬-gitops">
									ì„ ì–¸í˜• ë°°í¬ (GitOps?)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%eb%8d%94-%ec%9d%bd%ec%9d%84-%ea%b1%b0%eb%a6%ac" class="nav-ë”-ì½ì„-ê±°ë¦¬">
									ë” ì½ì„ ê±°ë¦¬
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ea%b0%81%ec%a3%bc" class="nav-ê°ì£¼">
									ê°ì£¼
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>

<div id="single-column-footer">


Hugo Theme <a style="color: #0054B8; text-decoration: underline;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
by <a style="color: #0054B8; text-decoration: underline;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0054B8; text-decoration: underline;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s
<a style="color: #0054B8; text-decoration: underline;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu 2020 - 2024
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
