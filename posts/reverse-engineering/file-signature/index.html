<!DOCTYPE html>
<html lang="ko"><head>

<title>
  
  임창수
  
  | 파일 시그니처와 파일 카빙: 바이너리 데이터가 이상한 문자열로 표현되는 이유
  
  
</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="G-FFMDWZ27TN">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5, user-scalable=5" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="파일 포맷, 데이터의 저장과 표현">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">
<link rel="manifest" href="/manifest.json">



<meta property="og:url" content="https://markruler.github.io/posts/reverse-engineering/file-signature/">
  <meta property="og:site_name" content="임창수">
  <meta property="og:title" content="파일 시그니처와 파일 카빙: 바이너리 데이터가 이상한 문자열로 표현되는 이유">
  <meta property="og:description" content="파일 포맷, 데이터의 저장과 표현">
  <meta property="og:locale" content="ko_kr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-12-10T22:46:00+09:00">
    <meta property="article:modified_time" content="2024-12-15T23:30:00+09:00">
    <meta property="article:tag" content="Reverse-Engineering">
    <meta property="article:tag" content="File-Signature">
    <meta property="article:tag" content="File-Carving">
    <meta property="og:image" content="https://markruler.github.io/images/reverse-engineering/file-signature/pexels-markusspiske-1089438.jpg">






  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://markruler.github.io/images/reverse-engineering/file-signature/pexels-markusspiske-1089438.jpg">
  <meta name="twitter:title" content="파일 시그니처와 파일 카빙: 바이너리 데이터가 이상한 문자열로 표현되는 이유">
  <meta name="twitter:description" content="파일 포맷, 데이터의 저장과 표현">







      <script async src="https://www.googletagmanager.com/gtag/js?id=G-FFMDWZ27TN"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-FFMDWZ27TN');
        }
      </script>






  




<link rel="icon" href="https://markruler.github.io/images/favicon.ico">



      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.52b719ea00393598857c62455f90282e8c6209937ed56f5ca2cf431f99cbc6c3.css" integrity="sha256-UrcZ6gA5NZiFfGJFX5AoLoxiCZN&#43;1W9cos9DH5nLxsM=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">



















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    About
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Posts
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 목차 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%9a%94" class="nav-개요">
									개요
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ed%8c%8c%ec%9d%bc-%ec%8b%9c%ea%b7%b8%eb%8b%88%ec%b2%98" class="nav-파일-시그니처">
									파일 시그니처
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ed%8c%8c%ec%9d%bc-%ec%b9%b4%eb%b9%99" class="nav-파일-카빙">
									파일 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1-%ec%8b%9c%ea%b7%b8%eb%8b%88%ec%b2%98-%ea%b8%b0%eb%b0%98-%ec%b9%b4%eb%b9%99" class="nav-1-시그니처-기반-카빙">
									1. 시그니처 기반 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2-%ed%8c%8c%ec%9d%bc-%ea%b5%ac%ec%a1%b0%ec%b2%b4-%ec%b9%b4%eb%b9%99" class="nav-2-파일-구조체-카빙">
									2. 파일 구조체 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3-%eb%9e%a8-%ec%8a%ac%eb%9e%99-%ec%b9%b4%eb%b9%99" class="nav-3-램-슬랙-카빙">
									3. 램 슬랙 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%eb%8d%94-%ec%9d%bd%ec%9d%84%ea%b1%b0%eb%a6%ac" class="nav-더-읽을거리">
									더 읽을거리
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://markruler.github.io/">
            임창수
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <button
        class="read-random-mobile"
        data-target-prefix="/posts">
        Navigate to Random Post
    </button>
    <a href="https://markruler.github.io/">
        <div class="single-column-header-title">임창수</div>
        
        <div class="single-column-header-subtitle">What, Why, How.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://markruler.github.io/images/reverse-engineering/file-signature/pexels-markusspiske-1089438.jpg')"
                    
                
            >
                <div class="post-title">
                    파일 시그니처와 파일 카빙: 바이너리 데이터가 이상한 문자열로 표현되는 이유
                    
                    <div class="post-subtitle">
                        파일 포맷, 데이터의 저장과 표현
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2024-12-10 22:46
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/wiki">[wiki]</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/reverse-engineering">reverse-engineering</a>
                                &nbsp;
                            
                                <a href="/tags/file-signature">file-signature</a>
                                &nbsp;
                            
                                <a href="/tags/file-carving">file-carving</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="개요">개요</h1>
<p>이미지를 다운로드하면 응답 데이터로 이상한 문자열이 출력됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># Youtube의 빈 썸네일 이미지를 다운로드 받습니다.</span>
</span></span><span style="display:flex;"><span>curl -L -o - https://i.ytimg.com/
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>����JFIF���
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>�      !�
</span></span><span style="display:flex;"><span>!<span style="color:#87ceeb">&#34;12ARaBqr��U�����������Qbd�������
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">                                  ?�@��t��2�4�2�4��&amp;`�f�b��*)��6�j�pVZ7՚�ތC:#uf��§���&lt;�Z�W
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">�oMku�@��&lt;\�O����H����M?^_��n
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">                             Z��W�:&gt;vW���ҟ˃lr�h�8e�z*ڷ�zw�ie4�
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">e�C�#:=(���R�&#39;F��0���e�
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">                       �
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">                        ���T���9�p�z�n/1
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">                                        �mSV��t�V�&#34;</span>��U �MI�;w��{O%��q
</span></span><span style="display:flex;"><span>                                                                     �[<span style="color:#eedd82">$x</span>�7UV��⫫�t����=6�l�<span style="color:#87ceeb">`</span>Si)u7	u�^z*UW��[���L�˭��a?
</span></span><span style="display:flex;"><span>                                                                                                                            yn��mN���K��:��Z��&amp;_
</span></span><span style="display:flex;"><span>                                                                                                                                                ���{
</span></span><span style="display:flex;"><span>  ����j�sj�j-T���U�^m�2<span style="color:#87ceeb">\�</span>O7��M�{�V�v��Vݝz�ԞRe|8��?�4qL5�i��Z��V�2e�ʝ��&#39;����%zV����v�8
</span></span><span style="display:flex;"><span>.A.@��F���&gt;�8]�JU��ҕj�z�Vb~��o)*�Ҍ������/�n���{m�Ա��vI��U�qoZ�+U��Z{�&amp;Z��;��B�������k�XЏR�;*t��	|J�-���ku�Kk5_s�[8�te��d�kĮl��%�{]�i���ɩ{5}%Y���in��sYa��*�ɭ��߯ko&gt;��� f��,[��ٷ�h��?X|Yg�j?��1���s��t��� HJ�
</span></span><span style="display:flex;"><span>                                             �^�f�4��Vނu-m�շ�����<span style="color:#87ceeb">`</span>l���^���U{
</span></span><span style="display:flex;"><span>                                                                            &amp;H��%
</span></span></code></pre></div><p>�는 유니코드 replacement character(<code>U+FFFD</code>)로, 해석할 수 없는 문자를 표시하기 위해 사용됩니다.</p>
<p>이번엔 hexdump로 만들어주는 <code>xxd</code> 명령어를 파이프로 이어보겠습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>whatis xxd
</span></span><span style="display:flex;"><span><span style="color:#0f0"># xxd (1)              - make a hexdump or do the reverse.</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl -L -o - https://i.ytimg.com/ | xxd
</span></span></code></pre></div><p>뭔지 모르겠지만 응답 데이터 앞쪽에 <code>JFIF</code>가 적혀있습니다.
JFIF 파일 포맷일까요?
이후엔 또 알 수 없는 문자열이 출력됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style="display:flex;"><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style="display:flex;"><span><span style="color:#f60">100</span>  <span style="color:#f60">1097</span>  <span style="color:#f60">100</span>  <span style="color:#f60">1097</span>    <span style="color:#f60">0</span>     <span style="color:#f60">0</span>   <span style="color:#f60">4712</span>      <span style="color:#f60">0</span> --:--:-- --:--:-- --:--:--  <span style="color:#f60">4728</span>
</span></span><span style="display:flex;"><span>00000000: ffd8 ffe0 <span style="color:#f60">0010</span> 4a46 <span style="color:#f60">4946</span> <span style="color:#f60">0001</span> <span style="color:#f60">0100</span> <span style="color:#f60">0001</span>  ......JFIF......
</span></span><span style="display:flex;"><span>00000010: <span style="color:#f60">0001</span> <span style="color:#f60">0000</span> ffdb <span style="color:#f60">0084</span> <span style="color:#f60">0005</span> <span style="color:#f60">0304</span> <span style="color:#f60">0705</span> <span style="color:#f60">0705</span>  ................
</span></span><span style="display:flex;"><span>00000020: <span style="color:#f60">0505</span> <span style="color:#f60">0506</span> <span style="color:#f60">0508</span> <span style="color:#f60">0506</span> <span style="color:#f60">0505</span> <span style="color:#f60">0505</span> <span style="color:#f60">0805</span> <span style="color:#f60">0507</span>  ................
</span></span><span style="display:flex;"><span>00000030: <span style="color:#f60">0508</span> <span style="color:#f60">0505</span> <span style="color:#f60">0509</span> <span style="color:#f60">0608</span> <span style="color:#f60">0905</span> <span style="color:#f60">0513</span> 0a1c 0b07  ................
</span></span><span style="display:flex;"><span>00000040: 081a <span style="color:#f60">0908</span> 050e <span style="color:#f60">2118</span> 1a1d 111f 131f 130b  ......!.........
</span></span><span style="display:flex;"><span>00000050: <span style="color:#f60">2218</span> 221e 181c <span style="color:#f60">1213</span> <span style="color:#f60">1201</span> <span style="color:#f60">0505</span> <span style="color:#f60">0507</span> <span style="color:#f60">0607</span>  <span style="color:#87ceeb">&#34;.&#34;</span>.............
</span></span><span style="display:flex;"><span>00000060: <span style="color:#f60">0508</span> <span style="color:#f60">0805</span> <span style="color:#f60">1208</span> <span style="color:#f60">0508</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span>  ................
</span></span><span style="display:flex;"><span>00000070: <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span>  ................
</span></span><span style="display:flex;"><span>00000080: <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span>  ................
</span></span><span style="display:flex;"><span>00000090: <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> <span style="color:#f60">1212</span> ffc0 <span style="color:#f60">0011</span> <span style="color:#f60">0800</span>  ................
</span></span><span style="display:flex;"><span>000000a0: 5a00 <span style="color:#f60">7803</span> <span style="color:#f60">0122</span> <span style="color:#f60">0002</span> <span style="color:#f60">1101</span> <span style="color:#f60">0311</span> 01ff c400  Z.x..<span style="color:#87ceeb">&#34;..........
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">000000b0: 1b00 0100 0203 0101 0000 0000 0000 0000  ................
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">000000c0: 0000 0001 0402 0307 0605 ffc4 003d 1000  .............=..
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">000000d0: 0201 0203 0307 060d 0500 0000 0000 0000  ................
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">000000e0: 0201 0304 0511 1206 1321 0722 3132 4152  .........!.&#34;</span>12AR
</span></span><span style="display:flex;"><span>000000f0: <span style="color:#f60">6114</span> <span style="color:#f60">4271</span> <span style="color:#f60">7292</span> d215 <span style="color:#f60">5581</span> <span style="color:#f60">8491</span> 94b1 c1c2  a.Bqr...U.......
</span></span><span style="display:flex;"><span>00000100: c3d1 d3f0 <span style="color:#f60">1751</span> <span style="color:#f60">6264</span> b3ff c400 <span style="color:#f60">1401</span> <span style="color:#f60">0100</span>  .....Qbd........
</span></span><span style="display:flex;"><span>00000110: <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> 00ff  ................
</span></span><span style="display:flex;"><span>00000120: c400 <span style="color:#f60">1411</span> <span style="color:#f60">0100</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span>  ................
</span></span><span style="display:flex;"><span>00000130: <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> 00ff da00 0c03 <span style="color:#f60">0100</span> <span style="color:#f60">0211</span> <span style="color:#f60">0311</span>  ................
</span></span><span style="display:flex;"><span>00000140: 003f 00ef <span style="color:#f60">4000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0098</span> <span style="color:#f60">8274</span> <span style="color:#f60">8188</span> 32d0  .?..@......t..2.
</span></span><span style="display:flex;"><span>00000150: <span style="color:#f60">3401</span> <span style="color:#f60">8832</span> d034 <span style="color:#f60">8188</span> <span style="color:#f60">2660</span> <span style="color:#f60">8000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span>  4..2.4..&amp;<span style="color:#87ceeb">`</span>......
</span></span><span style="display:flex;"><span>00000160: <span style="color:#f60">0010</span> 66aa 62a5 8a2a <span style="color:#f60">0129</span> 1b96 81f2 <span style="color:#f60">3683</span>  ..f.b..*.)....6.
</span></span><span style="display:flex;"><span>00000170: 6aec <span style="color:#f60">7056</span> 5a37 1bda d59a 15da de8c 433a  j.pVZ7........C:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>000003b0: 495a 369b c7de cae4 af5a <span style="color:#f60">5251</span> <span style="color:#f60">1297</span> 7a63  IZ6......ZRQ..zc
</span></span><span style="display:flex;"><span>000003c0: <span style="color:#f60">5673</span> 97de 74ba 8c06 a620 <span style="color:#f60">4800</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span>  Vs..t.... H.....
</span></span><span style="display:flex;"><span>000003d0: 4ac9 000d 9ab5 <span style="color:#f60">7359</span> 61a3 bb2a b31e c9ad  J.....sYa..*....
</span></span><span style="display:flex;"><span>000003e0: adad dfaf 6b6f 3eb5 bd19 fc20 <span style="color:#f60">6606</span> a6c3  ....ko&gt;.... f...
</span></span><span style="display:flex;"><span>000003f0: 2c5b ad87 d9b7 cd68 fba6 3f04 587c <span style="color:#f60">5967</span>  ,[.....h..?.X|Yg
</span></span><span style="display:flex;"><span>00000400: f56a 3fa1 bf31 981a d70c b25e ae1f 66bf  .j?..1.....^..f.
</span></span><span style="display:flex;"><span>00000410: 34a3 ee9b 56de <span style="color:#f60">8275</span> 2d6d d3d5 b7a2 bf84  4...V..u-m......
</span></span><span style="display:flex;"><span>00000420: 8cc6 606c 97ec ec5e aac7 058f 557b 0c26  ..<span style="color:#87ceeb">`</span>l...^....U{.&amp;
</span></span><span style="display:flex;"><span>00000430: <span style="color:#f60">4800</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span>  H...............
</span></span><span style="display:flex;"><span>00000440: <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> <span style="color:#f60">0000</span> 7fff d9                   .........
</span></span></code></pre></div><p>이는 이진(binary) 데이터를 16진수(hexadecimal) 혹은 터미널, 브라우저와 같은 실행 프로그램에서 지원하는 문자열로 표현된 것입니다.</p>
<p>이번엔 HTML 문서를 PDF로 변환해서 응답하는 서버로 테스트 해보겠습니다.
<a href="https://github.com/markruler/htmltopdf">데모 서버</a>를 실행 후
다음과 같은 코드로 요청을 보내면 PDF 파일을 받을 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#f00">let</span> myHeaders = <span style="color:#f00">new</span> Headers();
</span></span><span style="display:flex;"><span>myHeaders.append(<span style="color:#87ceeb">&#34;Content-Type&#34;</span>, <span style="color:#87ceeb">&#34;application/x-www-form-urlencoded&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">let</span> urlencoded = <span style="color:#f00">new</span> URLSearchParams();
</span></span><span style="display:flex;"><span>urlencoded.append(<span style="color:#87ceeb">&#34;html&#34;</span>, <span style="color:#87ceeb">&#34;&lt;div&gt;&lt;span&gt;Test&lt;/span&gt; Text&lt;/div&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>urlencoded.append(<span style="color:#87ceeb">&#34;css&#34;</span>, <span style="color:#87ceeb">&#34;span{color:red;}span{font-size:30px;}&#34;</span>);
</span></span><span style="display:flex;"><span>urlencoded.append(<span style="color:#87ceeb">&#34;orientation&#34;</span>, <span style="color:#87ceeb">&#34;landscape&#34;</span>);
</span></span><span style="display:flex;"><span>urlencoded.append(<span style="color:#87ceeb">&#34;filename&#34;</span>, <span style="color:#87ceeb">&#34;test-filename&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">let</span> requestOptions = {
</span></span><span style="display:flex;"><span>  method: <span style="color:#87ceeb">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>  headers: myHeaders,
</span></span><span style="display:flex;"><span>  body: urlencoded,
</span></span><span style="display:flex;"><span>  redirect: <span style="color:#87ceeb">&#39;follow&#39;</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fetch(<span style="color:#87ceeb">&#34;/pdf/content&#34;</span>, requestOptions)
</span></span><span style="display:flex;"><span>  .then(response =&gt; response.text())
</span></span><span style="display:flex;"><span>  .then(result =&gt; console.log(result))
</span></span><span style="display:flex;"><span>  .<span style="color:#f00">catch</span>(error =&gt; console.log(<span style="color:#87ceeb">&#39;error&#39;</span>, error));
</span></span></code></pre></div><p><code>console.log()</code>로 출력된 응답 데이터는 <code>%PDF</code>라는 문자를 시작으로 다양한 형식의 데이터가 혼합되어 있습니다.
PDF 형식이라는 것을 유추할 수 있습니다.
반면 네트워크 패널에서 응답(Response) 데이터는 16진수로 표현됩니다.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p><img src="/images/reverse-engineering/file-signature/hex-pdf.png" alt="Hexadecimal PDF"></p>
<p>크롬 브라우저는 그동안 네트워크 패널에서 바이너리 데이터를 응답받으면
&ldquo;The request has no response data available.&ldquo;이라는 메시지와 함께 표시하지 않거나 UTF-8로 디코딩하여 출력했습니다.
최근 업데이트<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup> 이후 16진수로 표현하도록 변경되었습니다.</p>
<p><img src="/images/reverse-engineering/file-signature/google-chrome-123.0.6312.122-network-img-response.png" alt="google-chrome-123.0.6312.122-network-img-response"></p>
<p>크롬의 Preview 탭은 해당 파일 포맷에 맞게 미리보기가 출력됩니다.</p>
<p><img src="/images/reverse-engineering/file-signature/google-chrome-123.0.6312.122-network-img-preview.png" alt="google-chrome-123.0.6312.122-network-img-preview"></p>
<p>그렇다면 이 괴상한 문자열들은 어떻게 해석해야 할까요?</p>
<h1 id="파일-시그니처">파일 시그니처</h1>
<p>파일 시그니처(File Signature)는 파일의 특정 부분에 위치한 고유한 바이트 패턴입니다.
파일이 어떤 포맷인지 알려주는 식별자 역할을 합니다.
매직 넘버(magic numbers)라고도 부르죠.</p>
<p>실행 프로그램(Reader)들은 파일 시그니처를 확인하여 파일 포맷을 판별하고,
해당 파일 포맷에 맞게 데이터를 해석하고 표현합니다.
가장 먼저 봤던 <code>JFIF</code> 파일이나 <code>%PDF</code> 모두 파일의 앞쪽에 위치하는 헤더 시그니처입니다.
(모든 파일 형식이 이름과 동일하게 시그니처를 정하진 않습니다.)</p>
<p>파일의 시그니처를 확인하는 번거로운 작업을 줄이기 위해
웹에서는 응답 헤더에 &ldquo;Content-Type&quot;을 지정하고
GUI 환경 데스크탑에서는 &ldquo;파일 확장자(File Extension)&ldquo;를 지정합니다.</p>
<h1 id="파일-카빙">파일 카빙</h1>
<p>파일 카빙(File Carving)은 파일 시그니처 기반으로 저장 매체에서 파일 내용을 복구하는 기술입니다<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>.</p>
<ul>
<li><a href="https://dfrc.korea.ac.kr/">DFRC (Digital Forensic Research Center)</a> 자료를 참조했습니다.
<ul>
<li><a href="https://web.archive.org/web/20180815025824/http://forensic.korea.ac.kr/DFWIKI/index.php/%EB%8D%B0%EC%9D%B4%ED%84%B0_%EB%B3%B5%EA%B5%AC">파일 복구</a></li>
<li><a href="https://youtu.be/URsDgiD0FwA?list=PLx4zTdLSy3x7wBShSxO-gykGUPrH1LF4L&amp;t=1657">램 슬랙</a></li>
</ul>
</li>
</ul>
<h2 id="1-시그니처-기반-카빙">1. 시그니처 기반 카빙</h2>
<ul>
<li>주요 과정
<ul>
<li>header 시그니처 탐지: 저장 매체의 로우 데이터(raw data)에서 파일 헤더 시그니처를 검색합니다.</li>
<li>footer 시그니처 탐지: 같은 방식으로 파일의 푸터 시그니처를 검색합니다.</li>
<li>데이터 추출: 헤더 시그니처와 푸터 시그니처 사이의 데이터를 추출하여 파일로 복원합니다.</li>
<li>파일 검사 및 재구성: 복원된 파일의 무결성과 유효성을 검사하여 제대로 복구되었는지 확인합니다.</li>
</ul>
</li>
<li>한계점
<ul>
<li>조각난 파일(Fragmented File): 파일이 여러 조각으로 분리되어 저장된 경우 복구가 어렵습니다.</li>
<li>파일 손상: 데이터 일부가 손실되었거나 덮어씌워진 경우 복원이 불완전할 수 있습니다.</li>
<li>정확도: 잘못된 시그니처 탐지로 인해 오탐(False Positive)이 발생할 수 있습니다.</li>
</ul>
</li>
</ul>
<h2 id="2-파일-구조체-카빙">2. 파일 구조체 카빙</h2>
<p>파일의 내부 구조를 분석하고 검증하여 파일을 복구합니다.</p>
<ul>
<li>파일 미리보기 지원하는 파일은 파일 포맷 내부에 실제 내용과 썸네일(Thumbnail)을 포함하는데,
썸네일도 해당 파일 포맷과 동일한 구조로 되어 있어 시그니처가 2개 이상 존재합니다.</li>
<li>ZIP 파일의 경우 헤더 시그니처가 <code>PK34</code>(hex: <code>50 4B 03 04</code>)이며, 푸터 시그니처가 <code>PK56</code>(hex: <code>50 4B 05 06</code>) 입니다.
파일 헤더에는 파일 크기와 CRC32 체크섬이 포함된 메타데이터가 있습니다.
단편화된 파일을 재구성하는 경우 파일 구조를 바탕으로 데이터 블록을 논리적으로 연결합니다.
이후 메타데이터에서 체크섬을 검증하여 파일의 무결성을 확인합니다.</li>
</ul>
<h2 id="3-램-슬랙-카빙">3. 램 슬랙 카빙</h2>
<p>파일의 내용을 디스크에 기록할 때 파일 크기가 512의 배수가 되지 않으면 <code>0x00</code>으로 채워지는 영역을 램 슬랙이라고 합니다.
디스크 섹터의 크기가 512 bytes일 때 파일의 크기가 512의 배수가 아닌 경우 나머지 부분은 램 슬랙으로 채워집니다.
시그니처 기반 카빙 기법에서 푸터 시그니처와 함께 램 슬랙을 확인하게 되면 많은 오탐을 줄일 수 있습니다.</p>
<h1 id="더-읽을거리">더 읽을거리</h1>
<ul>
<li><a href="https://youtu.be/M-_Fdgf9IZo?list=PLx4zTdLSy3x7wBShSxO-gykGUPrH1LF4L">(Youtube) 디지털 데이터의 저장과 표현: 문자 코드와 파일</a> - DFRC (Digital Forensic Research Center)</li>
<li><a href="https://www.garykessler.net/library/file_sigs.html">GCK&rsquo;S FILE SIGNATURES TABLE</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_file_signatures">List of file signatures</a> - Wikipedia</li>
<li><a href="https://www.file-recovery.com/signatures.htm">The concept of file signatures recovery</a> - Active@ File Recovery</li>
<li><a href="https://en.wikipedia.org/wiki/File_carving">File Carving</a> - Wikipedia</li>
</ul>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://developer.chrome.com/docs/devtools/memory-inspector">Memory Inspector</a>가 네트워크 패널에도 적용된 것으로 보입니다.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>정확히 언제인지는 모르겠지만 Google Chrome 131 전후로&hellip;&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a href="https://youtu.be/60FtdnBey-E?list=PLx4zTdLSy3x7wBShSxO-gykGUPrH1LF4L&amp;t=745">(Youtube) 삭제 파일 복구 기술</a> - DFRC (Digital Forensic Research Center)&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">최종 수정: 2024-12-15</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/reverse-engineering/game-localization/">
			다음글<br>한국어를 지원하지 않는 게임의 비공식 한국어 패치 만들기
                </a>
                
                
                
                <a class="older-posts" href="/posts/web/respond-web-page/">
			이전글<br>웹 페이지 응답 방법과 프레임워크
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












            </div>

            





<section class="social-share">
  <ul class="share-icons">
    
    
    <li>
      <a href="https://twitter.com/intent/tweet?hashtags=markruler,dev&amp;url=https%3a%2f%2fmarkruler.github.io%2fposts%2freverse-engineering%2ffile-signature%2f&amp;text=%ed%8c%8c%ec%9d%bc%20%ec%8b%9c%ea%b7%b8%eb%8b%88%ec%b2%98%ec%99%80%20%ed%8c%8c%ec%9d%bc%20%ec%b9%b4%eb%b9%99%3a%20%eb%b0%94%ec%9d%b4%eb%84%88%eb%a6%ac%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ea%b0%80%20%ec%9d%b4%ec%83%81%ed%95%9c%20%eb%ac%b8%ec%9e%90%ec%97%b4%eb%a1%9c%20%ed%91%9c%ed%98%84%eb%90%98%eb%8a%94%20%ec%9d%b4%ec%9c%a0" target="_blank" rel="noopener" aria-label="Share on Twitter" class="share-btn twitter">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" id="twitter" viewBox="0 0 48 48" overflow="hidden">
  <defs></defs>
  <g style="pointer-events:all">
    <title style="pointer-events:inherit">bg</title>
    <circle cx="24" cy="24" fill="#1CB7EB" r="24" style="pointer-events:inherit" id="svg_1"></circle>
    <path d="M36.8,15.4C35.9,15.9 34.8,16.2 33.8,16.3C34.9,15.6 35.7,14.5 36.1,13.2C35.1,13.8 34,14.3 32.7,14.6C31.7,13.5 30.4,12.8 28.9,12.8C26,12.8 23.6,15.3 23.6,18.5C23.6,18.9 23.6,19.4 23.7,19.8C19.3,19.6 15.4,17.3 12.8,13.9C12.3,14.7 12.1,15.7 12.1,16.8C12.1,18.8 13,20.5 14.4,21.5C13.5,21.5 12.7,21.2 12,20.8C12,20.8 12,20.9 12,20.9C12,23.6 13.8,25.9 16.2,26.5C15.8,26.6 15.3,26.7 14.8,26.7C14.5,26.7 14.1,26.7 13.8,26.6C14.5,28.9 16.4,30.5 18.7,30.5C16.9,32 14.6,32.9 12.2,32.9C11.8,32.9 11.4,32.9 10.9,32.8C13.2,34.4 16,35.4 19,35.4C28.7,35.4 34,26.8 34,19.3C34,19.1 34,18.8 34,18.6C35.2,17.6 36.1,16.6 36.8,15.4z" fill="#FFFFFF" style="pointer-events:inherit" id="svg_4"></path>
  </g>
</svg>
        <p>Twitter</p>
      </a>
    </li>
    

    
    
    <li>
      <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fmarkruler.github.io%2fposts%2freverse-engineering%2ffile-signature%2f" target="_blank" rel="noopener" aria-label="Share on Facebook" class="share-btn facebook">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 48 48" id="facebook" version="1.1" viewBox="0 0 48 48" xml:space="preserve">
  <circle cx="24" cy="24" fill="#4E71A8" r="24" />
  <path d="M29.9,19.5h-4v-2.6c0-1,0.7-1.2,1.1-1.2c0.5,0,2.8,0,2.8,0v-4.4l-3.9,0c-4.4,0-5.3,3.3-5.3,5.3v2.9h-2.5V24  h2.5c0,5.8,0,12.7,0,12.7h5.3c0,0,0-7,0-12.7h3.6L29.9,19.5z" fill="#FFFFFF" />
</svg>
        <p>Facebook</p>
        </a>
    </li>
    

    
    

    
    

    
    
    <li>
      <a href="mailto:?subject=%ec%9e%84%ec%b0%bd%ec%88%98 - %ed%8c%8c%ec%9d%bc%20%ec%8b%9c%ea%b7%b8%eb%8b%88%ec%b2%98%ec%99%80%20%ed%8c%8c%ec%9d%bc%20%ec%b9%b4%eb%b9%99%3a%20%eb%b0%94%ec%9d%b4%eb%84%88%eb%a6%ac%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ea%b0%80%20%ec%9d%b4%ec%83%81%ed%95%9c%20%eb%ac%b8%ec%9e%90%ec%97%b4%eb%a1%9c%20%ed%91%9c%ed%98%84%eb%90%98%eb%8a%94%20%ec%9d%b4%ec%9c%a0.&amp;body=%ed%8c%8c%ec%9d%bc%20%ec%8b%9c%ea%b7%b8%eb%8b%88%ec%b2%98%ec%99%80%20%ed%8c%8c%ec%9d%bc%20%ec%b9%b4%eb%b9%99%3a%20%eb%b0%94%ec%9d%b4%eb%84%88%eb%a6%ac%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ea%b0%80%20%ec%9d%b4%ec%83%81%ed%95%9c%20%eb%ac%b8%ec%9e%90%ec%97%b4%eb%a1%9c%20%ed%91%9c%ed%98%84%eb%90%98%eb%8a%94%20%ec%9d%b4%ec%9c%a0%2c%20by%20%ec%9e%84%ec%b0%bd%ec%88%98%0a%ed%8c%8c%ec%9d%bc%20%ed%8f%ac%eb%a7%b7%2c%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9d%98%20%ec%a0%80%ec%9e%a5%ea%b3%bc%20%ed%91%9c%ed%98%84%0a%0ahttps%3a%2f%2fmarkruler.github.io%2fposts%2freverse-engineering%2ffile-signature%2f%0a" target="_blank" class="share-btn email">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" id="email" overflow="hidden">
  <defs></defs>
  <g style="pointer-events:none">
    <title style="pointer-events:inherit">background</title>
    <rect x="-1" y="-1" width="582" height="402" id="canvas_background" fill="none" style="pointer-events:inherit"></rect>
  </g>
  <g style="pointer-events:all">
    <title style="pointer-events:inherit">Layer 1</title>
    <path d="M16,0C7.163,0 0,7.163 0,16C0,24.836 7.163,32 16,32S32,24.836 32,16C32,7.163 24.837,0 16,0z" fill="#333333" style="pointer-events:inherit" id="svg_2"></path>
    <polygon fill="#FFFFFF" points="6.518,21.815 11.707,15.291 6.518,12.119   " style="pointer-events:inherit" id="svg_4"></polygon>
    <polygon fill="#FFFFFF" points="19.5,15.746 15.989,17.908 12.472,15.758 7.11,22.5 24.867,22.5   " style="pointer-events:inherit" id="svg_5"></polygon>
    <polygon fill="#FFFFFF" points="15.988,16.864 25.482,11.017 25.482,9.5 6.518,9.5 6.518,11.076   " style="pointer-events:inherit" id="svg_6"></polygon>
    <polygon fill="#FFFFFF" points="20.263,15.276 25.482,21.843 25.482,12.062   " style="pointer-events:inherit" id="svg_7"></polygon>
  </g>
</svg>
        <p>Email</p>
      </a>
    </li>
  </ul>
</section>


        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://markruler.github.io/">
    
        <div class="nav-title">
            임창수
        </div>
        
        <div class="nav-subtitle">
            What, Why, How.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                About
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Posts
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
        <a
            class="read-random a-block nav-link-item false"
            data-target-prefix="/posts">
            Navigate to Random Post
        </a>
    </div>

    <div class="nav-footer">
        


Hugo Theme <a style="color: #0054B8; text-decoration: underline;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
by <a style="color: #0054B8; text-decoration: underline;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0054B8; text-decoration: underline;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s
<a style="color: #0054B8; text-decoration: underline;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu | Since 2020
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 목차 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ea%b0%9c%ec%9a%94" class="nav-개요">
									개요
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ed%8c%8c%ec%9d%bc-%ec%8b%9c%ea%b7%b8%eb%8b%88%ec%b2%98" class="nav-파일-시그니처">
									파일 시그니처
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ed%8c%8c%ec%9d%bc-%ec%b9%b4%eb%b9%99" class="nav-파일-카빙">
									파일 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1-%ec%8b%9c%ea%b7%b8%eb%8b%88%ec%b2%98-%ea%b8%b0%eb%b0%98-%ec%b9%b4%eb%b9%99" class="nav-1-시그니처-기반-카빙">
									1. 시그니처 기반 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2-%ed%8c%8c%ec%9d%bc-%ea%b5%ac%ec%a1%b0%ec%b2%b4-%ec%b9%b4%eb%b9%99" class="nav-2-파일-구조체-카빙">
									2. 파일 구조체 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3-%eb%9e%a8-%ec%8a%ac%eb%9e%99-%ec%b9%b4%eb%b9%99" class="nav-3-램-슬랙-카빙">
									3. 램 슬랙 카빙
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%eb%8d%94-%ec%9d%bd%ec%9d%84%ea%b1%b0%eb%a6%ac" class="nav-더-읽을거리">
									더 읽을거리
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>

<div id="single-column-footer">


Hugo Theme <a style="color: #0054B8; text-decoration: underline;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
by <a style="color: #0054B8; text-decoration: underline;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0054B8; text-decoration: underline;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s
<a style="color: #0054B8; text-decoration: underline;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu | Since 2020
	
</div>
            </div>
    
    <script src="/js/journal.js"></script><script src="/js/read-random.js"></script>

    <script>
        
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('/js/sw.js')
            .then(registration => {
              console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch(error => {
              console.log('Service Worker registration failed:', error);
            });
        }
      </script>
    </body>
</html>
