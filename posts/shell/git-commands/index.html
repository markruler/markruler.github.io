<!DOCTYPE html>
<html lang="ko"><head>

<title>
  
  임창수
  
  | 깃(Git) CLI 환경에서 소스 코드 관리하기
  
  
</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="G-FFMDWZ27TN">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5, user-scalable=5" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="자주 쓰는 Git 명령어">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">
<link rel="manifest" href="/manifest.json">



<meta property="og:url" content="https://markruler.github.io/posts/shell/git-commands/">
  <meta property="og:site_name" content="임창수">
  <meta property="og:title" content="깃(Git) CLI 환경에서 소스 코드 관리하기">
  <meta property="og:description" content="자주 쓰는 Git 명령어">
  <meta property="og:locale" content="ko_kr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-12-01T23:28:00+09:00">
    <meta property="article:modified_time" content="2024-12-29T11:55:00+09:00">
    <meta property="article:tag" content="Git">
    <meta property="article:tag" content="Shell">
    <meta property="og:image" content="https://markruler.github.io/images/shell/git-logo-2color.png">






  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://markruler.github.io/images/shell/git-logo-2color.png">
  <meta name="twitter:title" content="깃(Git) CLI 환경에서 소스 코드 관리하기">
  <meta name="twitter:description" content="자주 쓰는 Git 명령어">







      <script async src="https://www.googletagmanager.com/gtag/js?id=G-FFMDWZ27TN"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-FFMDWZ27TN');
        }
      </script>






  




<link rel="icon" href="https://markruler.github.io/images/favicon.ico">



      <script src="/js/toc.js"></script>
    
    
    <link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<link rel="stylesheet" as="style" href="/scss/dark-mode.min.52b719ea00393598857c62455f90282e8c6209937ed56f5ca2cf431f99cbc6c3.css" integrity="sha256-UrcZ6gA5NZiFfGJFX5AoLoxiCZN&#43;1W9cos9DH5nLxsM=" media="screen">




















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    About
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Posts
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 목차 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#git-internal" class="nav-git-internal">
									Git Internal
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ec%b0%a8%ec%9d%b4%ea%b0%80-%ec%95%84%eb%8b%88%eb%9d%bc-%ec%8a%a4%eb%83%85%ec%83%b7" class="nav-차이가-아니라-스냅샷">
									차이가 아니라 스냅샷
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9d%98-%eb%ac%b4%ea%b2%b0%ec%84%b1" class="nav-데이터의-무결성">
									데이터의 무결성
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#git-%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%ec%9d%98-%ec%84%b8-%ea%b0%80%ec%a7%80-%eb%8b%a8%ea%b3%84" class="nav-git-프로젝트의-세-가지-단계">
									Git 프로젝트의 세 가지 단계
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#git-directory" class="nav-git-directory">
									Git directory
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#head" class="nav-head">
									HEAD
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#refs" class="nav-refs">
									refs
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#info" class="nav-info">
									info
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#objects" class="nav-objects">
									objects
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#tree" class="nav-tree">
									tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#blob-binary-large-object" class="nav-blob-binary-large-object">
									blob (binary large object)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#commit" class="nav-commit">
									commit
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#tag" class="nav-tag">
									tag
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#index" class="nav-index">
									index
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#hash-function" class="nav-hash-function">
									Hash Function
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#config" class="nav-config">
									config
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#scm-source-code-management" class="nav-scm-source-code-management">
									SCM: Source Code Management
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ed%8f%ac%ec%85%80%eb%a6%b0porcelain-%eb%aa%85%eb%a0%b9%ec%96%b4" class="nav-포셀린porcelain-명령어">
									포셀린(Porcelain) 명령어
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#init" class="nav-init">
									init
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#clone" class="nav-clone">
									clone
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#submodule" class="nav-submodule">
									submodule
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#subtree" class="nav-subtree">
									subtree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#branch" class="nav-branch">
									branch
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#xargs" class="nav-xargs">
									xargs
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#tag-1" class="nav-tag-1">
									tag
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#switch" class="nav-switch">
									switch
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#upstream" class="nav-upstream">
									upstream
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#status" class="nav-status">
									status
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#add" class="nav-add">
									add
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#fetch" class="nav-fetch">
									fetch
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#commit-1" class="nav-commit-1">
									commit
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#merge" class="nav-merge">
									merge
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#pull" class="nav-pull">
									pull
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#rebase" class="nav-rebase">
									rebase
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#squash%ec%99%80-fixup" class="nav-squash와-fixup">
									squash와 fixup
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#cherry-pick" class="nav-cherry-pick">
									cherry-pick
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#stash" class="nav-stash">
									stash
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#how-git-stash-works" class="nav-how-git-stash-works">
									How git stash works
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#reset" class="nav-reset">
									reset
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#restore" class="nav-restore">
									restore
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#revert" class="nav-revert">
									revert
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#git%ec%9c%bc%eb%a1%9c-%eb%b2%84%ea%b7%b8-%ec%b0%be%ea%b8%b0" class="nav-git으로-버그-찾기">
									Git으로 버그 찾기
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#blame" class="nav-blame">
									blame
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#bisect" class="nav-bisect">
									bisect
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#show" class="nav-show">
									show
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#log" class="nav-log">
									log
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#triple-dot" class="nav-triple-dot">
									Triple Dot(…)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#reflog-reference-logs" class="nav-reflog-reference-logs">
									reflog: Reference logs
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#diff" class="nav-diff">
									diff
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#push" class="nav-push">
									push
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%ed%94%8c%eb%9f%ac%eb%b0%8dplumbing-%eb%aa%85%eb%a0%b9%ec%96%b4" class="nav-플러밍plumbing-명령어">
									플러밍(Plumbing) 명령어
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#rev-parse" class="nav-rev-parse">
									rev-parse
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#hash-object" class="nav-hash-object">
									hash-object
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#ls-tree" class="nav-ls-tree">
									ls-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#ls-files" class="nav-ls-files">
									ls-files
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cat-file" class="nav-cat-file">
									cat-file
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#write-tree" class="nav-write-tree">
									write-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#commit-tree" class="nav-commit-tree">
									commit-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#read-tree" class="nav-read-tree">
									read-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#update-index" class="nav-update-index">
									update-index
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#advanced" class="nav-advanced">
									Advanced
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#git-hooks" class="nav-git-hooks">
									Git Hooks
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#garbage-collection" class="nav-garbage-collection">
									Garbage Collection
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#packfiles" class="nav-packfiles">
									Packfiles
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#gc" class="nav-gc">
									gc
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#prune" class="nav-prune">
									prune
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#git-server" class="nav-git-server">
									Git Server
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#fork" class="nav-fork">
									Fork
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%eb%b8%8c%eb%9e%9c%ec%b9%98-%eb%b3%b4%ed%98%b8-%ea%b7%9c%ec%b9%99-%ec%a0%95%ed%95%98%ea%b8%b0-branch-protection-rules" class="nav-브랜치-보호-규칙-정하기-branch-protection-rules">
									브랜치 보호 규칙 정하기: Branch protection rules
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%ec%b0%b8%ea%b3%a0" class="nav-참고">
									참고
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            📜
        </button>
        <a id="navTitle" class="navbar-brand" href="https://markruler.github.io/">
            임창수
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            🌙
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
    v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <button
        class="read-random-mobile"
        data-target-prefix="/posts">
        Navigate to Random Post
    </button>
    <a href="https://markruler.github.io/">
        <div class="single-column-header-title">임창수</div>
        
        <div class="single-column-header-subtitle">What, Why, How.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://markruler.github.io/images/shell/git-logo-2color.png')"
                    
                
            >
                <div class="post-title">
                    깃(Git) CLI 환경에서 소스 코드 관리하기
                    
                    <div class="post-subtitle">
                        자주 쓰는 Git 명령어
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2021-12-01 23:28
                        </time>
                        

                        
                            <a href="/categories/wiki">[wiki]</a>
                            &nbsp;
                        

                        
                            
                                <a href="/tags/git">git</a>
                                &nbsp;
                            
                                <a href="/tags/shell">shell</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <blockquote>
<p>Git의 모든 기능을 지원하는 것은 CLI 뿐이다.
GUI 프로그램의 대부분은 Git 기능 중 일부만 구현하기 때문에 비교적 단순하다.
CLI를 사용할 줄 알면 GUI도 사용할 수 있지만 반대는 성립하지 않는다. -
&lt;<a href="https://git-scm.com/book/en/v2">Pro Git</a>&gt; Scott Chacon, Ben Straub</p>
</blockquote>
<h1 id="git-internal">Git Internal</h1>
<h2 id="차이가-아니라-스냅샷">차이가 아니라 스냅샷</h2>
<ul>
<li><a href="https://github.blog/2020-12-17-commits-are-snapshots-not-diffs/">Commits are snapshots, not diffs</a></li>
</ul>
<p>CVS, Subversion, Perforce, Bazaar 등의 시스템은 각 파일의 변화를 시간순으로 관리하면서 파일들의 집합을 관리합니다.</p>
<p><img src="/images/shell/git/storing-data-as-changes.png" alt="Storing data as changes to a base version of each file"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Getting-Started-What-is-Git%3F">Storing data as changes to a base version of each file</a></em></p>
<p>Git은 데이터를 스냅샷의 스트림처럼 취급합니다.
파일이 달라지지 않았으면 이전 상태의 파일에 대한 링크만 저장합니다.</p>
<p><img src="/images/shell/git/storing-data-as-snapshots.png" alt="Storing data as snapshots of the project over time"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Getting-Started-What-is-Git%3F">Storing data as snapshots of the project over time</a></em></p>
<h2 id="데이터의-무결성">데이터의 무결성</h2>
<p>Git에서 데이터를 저장하기 전에 가장 먼저 하는 작업은 Hash function을 사용해서 체크섬을 계산하는 것입니다.
그리고 이 체크섬으로 데이터를 관리합니다.</p>
<p>이것은 <a href="https://www.youtube.com/watch?v=4XpnKHJAok8&amp;t=56m25s">데이터를 신뢰하기 위해</a> 무결성을 검사하는 과정입니다.
예를 들어 제가 오늘 작성한 파일이 내일 혹은 10년 뒤에도 같다고 믿을 수 있게 되는 것이죠.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>echo <span style="color:#87ceeb">&#34;test&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>git hash-object test.txt
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 9daeafb9864cf43055ae93beb0afd6c7d144bfa4</span>
</span></span></code></pre></div><p>파일명을 변경하더라도 체크섬은 바뀌지 않습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>mv test.txt test2.md
</span></span><span style="display:flex;"><span>git hash-object test2.md
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 9daeafb9864cf43055ae93beb0afd6c7d144bfa4</span>
</span></span></code></pre></div><p>내용을 변경하면 체크섬은 바뀝니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>echo <span style="color:#87ceeb">&#34; &#34;</span> &gt;&gt; test2.md
</span></span><span style="display:flex;"><span>git hash-object test2.md
</span></span><span style="display:flex;"><span><span style="color:#0f0"># d698e83c7a0b75a29e815371e584973062b4cab9</span>
</span></span></code></pre></div><p>Git은 SHA-1 알고리즘을 사용하여 체크섬을 구합니다.
체크섬은 40자 길이의 16진수 문자열입니다.
파일의 내용이나 디렉터리 구조를 이용하여 체크섬을 구합니다.</p>
<blockquote>
<p><em><a href="https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-%EB%A6%AC%EB%B9%84%EC%A0%84-%EC%A1%B0%ED%9A%8C%ED%95%98%EA%B8%B0">Git을 쓰는 사람들은 언젠가 SHA-1 값이 중복될까 봐 걱정한다.
정말 그렇게 되면 어떤 일이 벌어질까?</a></em></p>
</blockquote>
<p>이미 있는 SHA-1 값이 Git 데이터베이스에 커밋되면 새로운 객체라고 해도 이미 커밋된 것으로 생각하고 이전의 커밋을 재사용합니다.
그래서 해당 SHA-1 값의 커밋을 Checkout 하면 항상 처음 저장한 커밋만 Checkout 됩니다.</p>
<p>그러나 해시 값이 중복되는 일은 일어나기 어렵습니다.
SHA-1 값의 크기는 20 Bytes(160 Bits)입니다.
해시 값이 중복될 확률이 50%가 되는 데 필요한 객체의 수는 2^80입니다.</p>
<ul>
<li><a href="https://lore.kernel.org/git/20180609224913.GC38834@genre.crustytoothpaste.net/">2018년부터 SHA-256으로 전환하고 있고</a>, Git 2.29부터 지원하고 있습니다.</li>
</ul>
<p>해시 값 앞부분이 중복되지 않으면 checksum은 앞 4자만 있어도 됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git ls-tree ee85
</span></span></code></pre></div><p>앞부분이 중복된다면 아래와 같은 에러가 발생합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ferror: short object ID ee85 is ambiguous
</span></span><span style="display:flex;"><span>hint: The candidates are:
</span></span><span style="display:flex;"><span>hint:   ee8597496 commit 2022-01-12 - 제가 작성한 커밋 메시지입니다
</span></span><span style="display:flex;"><span>hint:   ee85c50d6 tree
</span></span><span style="display:flex;"><span>hint:   ee8574581 blob
</span></span><span style="display:flex;"><span>fatal: Not a valid object name ee85
</span></span></code></pre></div><p>몇 글자를 더 입력해주면 정상적으로 조회됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git ls-tree ee859
</span></span></code></pre></div><h2 id="git-프로젝트의-세-가지-단계">Git 프로젝트의 세 가지 단계</h2>
<p>Git은 파일을 세 가지 상태로 관리합니다.</p>
<p><img src="/images/shell/git/lifecycle-file-status.png" alt="The lifecycle of the status of your files"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository">The lifecycle of the status of your files</a></em></p>
<ul>
<li><code>Modified</code> 수정한 파일을 아직 로컬 데이터베이스에 커밋하지 않은 상태입니다.</li>
<li><code>Staged</code> 현재 수정한 파일을 곧 커밋할 것이라고 표시한 상태입니다. 파일을 Stage하면 Git 저장소에 파일을 Blob으로 저장하고 Staging Area에 해당 파일의 체크섬을 저장합니다.
<ul>
<li><code>Tracked</code> 관리 대상에 있는 파일입니다. 이미 스냅샷에 포함되어 있던 파일입니다.</li>
<li><code>Untracked</code> Unmodified, Modified, Staged 상태가 아닌 나머지 파일은 모두 Untracked 파일입니다. 다시 말해서 Staging Area(index)에도 포함되지 않았고 스냅샷으로 저장되어 있지 않은 파일입니다.</li>
</ul>
</li>
<li><code>Committed</code> 데이터가 로컬 데이터베이스에 안전하게 저장된 상태입니다. 루트 디렉토리와 각 하위 디렉토리의 트리 객체(Object)를 체크섬과 함께 저장소에 저장합니다. 그 후 커밋 객체를 만들고 메타데이터와 루트 디렉터리 트리 객체를 가리키는 포인터 정보를 커밋 객체에 넣어 저장합니다. 그래서 필요하면 언제든지 스냅샷을 다시 만들 수 있습니다.</li>
<li>아래는 커밋의 객체들을 나타냅니다.</li>
</ul>
<p><img src="/images/shell/git/commit-and-its-tree.png" alt="A commit and its tree"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell">A commit and its tree</a></em></p>
<ul>
<li>아래는 커밋과 이전 커밋들을 나타냅니다.</li>
</ul>
<p><img src="/images/shell/git/commit-and-its-parent.png" alt="Commits and their parents"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell">Commits and their parents</a></em></p>
<p>파일의 세 가지 상태는 Git 프로젝트의 세 가지 단계와 연결됩니다.</p>
<p><img src="/images/shell/git/git-three-step.png" alt="Working tree, staging area, and Git directory"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Getting-Started-What-is-Git%3F#_the_three_states">Working tree, staging area, and Git directory</a></em></p>
<ul>
<li>Working Tree - 프로젝트의 특정 버전을 Checkout 한 것입니다. Git Directory 안에 압축된 DB에서 파일을 가져와 워킹 트리를 만듭니다.</li>
<li>Staging Area - 곧 커밋할 파일에 대한 정보를 담고 있으며 Git Directory 안(<code>.git/index</code>)에 저장됩니다. Index라고도 불립니다.
<ul>
<li><code>stage</code>라는 용어는 두루 쓰이기 때문에 한번 생각해 볼 만합니다.
stage는 &ldquo;과정이나 발전, 성장 등의 단계&quot;라는 뜻을 가지고 있습니다.
그래서 &ldquo;목표로 하는 것의 이전 단계&quot;라고 생각하면 쉽습니다.
Git에서의 staging area는 저장소에 커밋하기 전 단계이고,
배포 환경에서의 staging 서버는 production 서버에 배포하기 전 단계에 있는 서버입니다.</li>
</ul>
</li>
</ul>
<p>Git으로 하는 일은 기본적으로 아래와 같습니다.</p>
<ol>
<li>Working Tree에서 파일을 수정한다.</li>
<li>Staging Area에 파일을 Stage 해서 커밋할 스냅샷을 만든다.</li>
<li>Staging Area에 있는 파일들을 커밋해서 Git Direcoty에 영구적인 스냅샷으로 저장한다.</li>
</ol>
<h1 id="git-directory">Git directory</h1>
<p><code>.git/</code></p>
<p>Git이 프로젝트의 메타데이터와 객체 데이터베이스를 저장하는 곳입니다.
description 파일은 기본적으로 GitWeb 프로그램에서만 사용하기 때문에 이 파일은 신경쓰지 않아도 됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>tree -L <span style="color:#f60">2</span> .git
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>.git
</span></span><span style="display:flex;"><span>├── branches
</span></span><span style="display:flex;"><span>├── COMMIT_EDITMSG
</span></span><span style="display:flex;"><span>├── config
</span></span><span style="display:flex;"><span>├── description
</span></span><span style="display:flex;"><span>├── FETCH_HEAD
</span></span><span style="display:flex;"><span>├── HEAD
</span></span><span style="display:flex;"><span>├── hooks
</span></span><span style="display:flex;"><span>│   ├── commit-msg.sample
</span></span><span style="display:flex;"><span>│   ├── prepare-commit-msg.sample
</span></span><span style="display:flex;"><span>│   ├── pre-push.sample
</span></span><span style="display:flex;"><span>│   ├── ...
</span></span><span style="display:flex;"><span>├── index
</span></span><span style="display:flex;"><span>├── info
</span></span><span style="display:flex;"><span>│   └── exclude
</span></span><span style="display:flex;"><span>├── logs
</span></span><span style="display:flex;"><span>│   ├── HEAD
</span></span><span style="display:flex;"><span>│   └── refs
</span></span><span style="display:flex;"><span>├── objects
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#f60">00</span>
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#f60">01</span>
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#f60">02</span>
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#f60">03</span>
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#f60">04</span>
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#f60">05</span>
</span></span><span style="display:flex;"><span>│   ├── ...
</span></span><span style="display:flex;"><span>│   ├── info
</span></span><span style="display:flex;"><span>│   └── pack
</span></span><span style="display:flex;"><span>├── ORIG_HEAD
</span></span><span style="display:flex;"><span>├── packed-refs
</span></span><span style="display:flex;"><span>└── refs
</span></span><span style="display:flex;"><span>    ├── heads
</span></span><span style="display:flex;"><span>    ├── remotes
</span></span><span style="display:flex;"><span>    ├── stash
</span></span><span style="display:flex;"><span>    └── tags
</span></span></code></pre></div><h2 id="head">HEAD</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat HEAD
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ref: refs/heads/main</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat refs/heads/main
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 4436e4b582c7a8c942f11746d54cf4338325442c</span>
</span></span></code></pre></div><table>
  <thead>
      <tr>
          <th>이름</th>
          <th>설명</th>
          <th>파일 내용</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>HEAD</td>
          <td>지금 작업하고 있는 로컬 브랜치를 가리키는 포인터. 로컬 브랜치는 해당 브랜치의 마지막 커밋을 가리킨다.</td>
          <td>ref: refs/heads/main</td>
      </tr>
      <tr>
          <td>ORIG_HEAD</td>
          <td>HEAD의 이전 커밋을 백업</td>
          <td>ec2a7f1e03bca5485627b8af6b76129aa3f49b8a</td>
      </tr>
      <tr>
          <td>FETCH_HEAD</td>
          <td>가장 최근에 fetch한 브랜치와 그 브랜치의 HEAD</td>
          <td>2a6464fe3e243a15ceeef19c32e930374481e87f not-for-merge branch &lsquo;main&rsquo; of github.com:markruler/markruler.github.io</td>
      </tr>
      <tr>
          <td>MERGE_HEAD, CHERRY_PICK_HEAD, REVERT_HEAD, BISECT_HEAD, &hellip;</td>
          <td>-</td>
          <td>-</td>
      </tr>
  </tbody>
</table>
<h2 id="refs">refs</h2>
<p>commit 객체의 포인터를 저장합니다.</p>
<h2 id="info">info</h2>
<p>저장소에 관한 추가 정보들은 이 디렉터리 안에 저장됩니다.
<code>.gitignore</code> 파일처럼 무시할 파일의 패턴을 적어둘 수 있습니다.
다만 <code>.git/info/exclude</code>은 <code>.git</code> 디렉토리 안에 있기 때문에 동료와 공유할 수 없습니다.</p>
<h2 id="objects">objects</h2>
<p>다른 VCS의 저장소처럼 Git의 저장소는 파일에 대한 유지, 복제, 수정 등의 이력을 관리하는데 필요한 모든 데이터를 포함하는 데이터베이스입니다.
하지만 Git의 이런 작업들을 처리하는 방식은 다른 VCS들과 차별화되어 있습니다.</p>
<p>Git은 유입되는 모든 것을 Object로 간주합니다.
대표적으로 blob, tree, commit, tag가 있습니다.</p>
<p><img src="/images/shell/git/simple-git-data-model.png" alt="Simple version of the Git data model"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Git-Internals-Git-Objects">Simple version of the Git data model</a></em></p>
<h3 id="tree">tree</h3>
<p>Git은 유닉스 파일 시스템과 비슷한 방법으로 저장하지만 좀 더 단순합니다.
모든 것을 tree와 blob 객체로 저장합니다.
tree는 유닉스의 디렉토리에 대응되고 blob은 inode나 일반 파일에 대응됩니다.
tree 객체 하나는 항목을 여러 개 가질 수 있습니다.
그리고 그 항목에는 blob 객체나 하위 tree 객체를 가리키는 SHA-1 포인터, 파일 모드, 객체 타입, 파일 이름이 들어 있습니다.
<code>write-tree</code> 명령으로 생성합니다.</p>
<h3 id="blob-binary-large-object">blob (binary large object)</h3>
<p>blob은 데이터 구조에 상관없이 모든 종류의 파일을 저장합니다.
파일의 위치나 이름과 같은 파일의 메타 데이터가 아닌 파일 내용 자체를 저장합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git cat-file -p d8329fc1cc938780ffdd9f94e0d364e0ea74f579
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 blob 83baae61804e65cc73a7201a7252750c76066a30      test.txt</span>
</span></span></code></pre></div><p>여기서 blob의 파일 모드는 보통의 파일을 나타내는 <code>100644</code>,
실행파일을 나타내는 <code>100755</code>,
심볼릭 링크를 나타내는 <code>120000</code> 세 가지만 사용합니다.</p>
<h3 id="commit">commit</h3>
<p>스냅샷에 관한 모든 메타 데이터를 보유하는 객체입니다.
메타 데이터는 스냅샷을 누가, 언제, 왜 저장했는지에 대한 정보를 포함합니다.
<code>commit-tree</code> 명령으로 생성합니다.</p>
<p><img src="/images/shell/git/reachable-objects.png" alt="All the reachable objects in your Git directory"></p>
<p><em><a href="https://git-scm.com/book/en/v2/Git-Internals-Git-Objects">All the reachable objects in your Git directory</a></em></p>
<h3 id="tag">tag</h3>
<p>커밋 객체를 쉽게 참조할 수 있도록 도와주는 labeling 객체입니다.</p>
<h2 id="index">index</h2>
<p>Staging Area에 관한 정보가 저장되어 있습니다.
즉, 저장소에 커밋할 파일을 보관하는 장소입니다.</p>
<h2 id="hash-function">Hash Function</h2>
<p>체크섬을 계산합니다.</p>
<h2 id="config">config</h2>
<p>git 설정을 저장합니다.
설정 데이터는 우선순위가 있는데 범위가 좁은 Local이 가장 우선 적용됩니다.
Local (<code>.git/config</code>) &gt; Global (<code>$HOME/.gitconfig</code>) &gt; System (<code>/etc/gitconfig</code>) 순서입니다.
config 파일은 INI file(<code>.ini</code>) 형식입니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span><span style="color:#0f0"># $HOME/.gitconfig</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[user]</span>
</span></span><span style="display:flex;"><span>  email = <span style="color:#87ceeb">imcxsu@gmail.com
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  name = Changsu Im</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[core]</span>
</span></span><span style="display:flex;"><span>  editor = <span style="color:#87ceeb">vim</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[diff]</span>
</span></span><span style="display:flex;"><span>  tool = <span style="color:#87ceeb">vimdiff</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[difftool]</span>
</span></span><span style="display:flex;"><span>  prompt = <span style="color:#87ceeb">false
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  # Be able to abort all diffs with `:cq` or `:qa!`
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  # `:cq` to quit without saving and make Vim return non-zero error (i.e. exit with error)
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  # `:qa` to quit all (short for :quitall)
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  trustExitCode = true</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[alias]</span>
</span></span><span style="display:flex;"><span>  fix = <span style="color:#87ceeb">&#34;!git commit --fixup $(git log -n 20 --pretty=format:&#39;%Cred%h - %s&#39; --graph --abbrev-commit | fzf --reverse | awk &#39;{print $2}&#39;)&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  lg = log --graph --format=format:&#39;%C(bold blue)%h%C(reset) - %C(bold cyan)%aD %C(bold green)(%ar)%C(bold yellow)    +++ %d%C(reset)%n&#39;L&#39;          %C(white)%s %C(dim white)- %an&#39; --all</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># .git/config</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[core]</span>
</span></span><span style="display:flex;"><span>  repositoryformatversion = <span style="color:#87ceeb">0
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  filemode = true
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  bare = false
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  logallrefupdates = true</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[remote &#34;origin&#34;]</span>
</span></span><span style="display:flex;"><span>  url = <span style="color:#87ceeb">git@github.com:okbut/corporate-library-api.git
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  fetch = +refs/heads/*:refs/remotes/origin/*</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">[branch &#34;main&#34;]</span>
</span></span><span style="display:flex;"><span>  remote = <span style="color:#87ceeb">origin
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb">  merge = refs/heads/main</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git config --global user.name Changsu Im
</span></span><span style="display:flex;"><span>git config --global user.email imcxsu@gmail.com
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># config 목록 출력</span>
</span></span><span style="display:flex;"><span>git config --list
</span></span><span style="display:flex;"><span>git config --list --global
</span></span></code></pre></div><h1 id="scm-source-code-management">SCM: Source Code Management</h1>
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/source-code-management">Source code management</a> - Atlassian</li>
<li>What? 코드 변경 사항을 추적하고 관리하는 방법입니다. &lsquo;Version Control System&rsquo;으로도 불립니다.</li>
<li>Why? 팀의 커뮤니케이션 오버헤드를 줄이고 릴리스 속도를 높일 수 있습니다.
<ul>
<li>개인적인 사례를 들면, 저는 첫 회사에서 <a href="https://en.wikipedia.org/wiki/PVCS">PVCS</a>라는 SCM을 사용했는데 Local에서만 사용할 수 있었습니다.
그래서 PVCS에서 수정할 파일을 동료들에게 알리고 잠금(<code>Lock</code>) 상태로 만듭니다.
서버에 FTP로 파일을 업로드해서 교체합니다.
병합 과정없이 Overwrite합니다. 그래서 동료들에게 알려야 했습니다. 같은 파일을 수정하는 동료가 있다면 수동으로 병합 과정을 거쳐야 하기 때문입니다.</li>
</ul>
</li>
<li>How? 각종 명령어와 분산 VCS(distributed version control system) 특징을 활용합니다.</li>
</ul>
<h1 id="포셀린porcelain-명령어">포셀린(Porcelain) 명령어</h1>
<p>사용자 친화적인 명령어 모음입니다.
Git을 관리하는 <strong>상위 수준의 인터페이스</strong>입니다.
명령어 사용 시 시스템 내부의 복잡한 동작은 숨겨지고 직관적인 결과만 보여줍니다.</p>
<p><a href="../cs-visualized-useful-git-commands/">&lsquo;CS Visualized: 유용한 깃(Git) 명령어&rsquo;</a>를 함께 읽으면 도움됩니다.</p>
<h2 id="init">init</h2>
<p>현재 디렉토리에 <code>.git</code> 디렉터리를 생성하고 Git 프로젝트로 초기화합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git init
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Initialized empty Git repository in /home/markruler/toy/.git/</span>
</span></span></code></pre></div><h2 id="clone">clone</h2>
<p>remote 리포지토리의 설정 정보를 제외한 모든 데이터를 로컬 머신에 복제합니다.
그 과정은 다음과 같습니다.</p>
<ol>
<li>대상 디렉토리가 존재하지 않는다면 생성하고, 대상 디렉토리를 GIt 디렉토리로 초기화한다.</li>
<li>대상 디렉토리 안에 소스 저장소의 브랜치와 동일한 추적 브랜치들을 설정한다. (git remote)</li>
<li><code>.git</code> 디렉토리 내부에 objects와 references를 연결한다.</li>
<li>최신 버전을 checkout한다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git clone <span style="color:#87ceeb">${</span><span style="color:#eedd82">origin</span><span style="color:#87ceeb">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>Cloning into <span style="color:#87ceeb">&#39;my-origin-repo&#39;</span>...
</span></span><span style="display:flex;"><span>remote: Enumerating objects: 22940, <span style="color:#f00">done</span>.
</span></span><span style="display:flex;"><span>remote: Counting objects: 100% (1929/1929), <span style="color:#f00">done</span>.
</span></span><span style="display:flex;"><span>remote: Compressing objects: 100% (780/780), <span style="color:#f00">done</span>.
</span></span><span style="display:flex;"><span>remote: Total <span style="color:#f60">22940</span> (delta 1277), reused <span style="color:#f60">1675</span> (delta 1131), pack-reused <span style="color:#f60">21011</span>
</span></span><span style="display:flex;"><span>Receiving objects: 100% (22940/22940), 41.19 MiB | 9.49 MiB/s, <span style="color:#f00">done</span>.
</span></span><span style="display:flex;"><span>Resolving deltas: 100% (16109/16109), <span style="color:#f00">done</span>.
</span></span></code></pre></div><h2 id="submodule">submodule</h2>
<p>submodule을 사용하면 다른 리포지터리의 특정 스냅샷을 참조할 수 있습니다.
submodule을 추가하면 <code>.gitmodules</code> 파일이 생성됩니다.</p>
<p>submodule을 새로 추가합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git submodule add https://github.com/markruler/repository
</span></span></code></pre></div><p>의존하는 submodule 리포지터리를 clone합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git submodule update --init --recursive
</span></span></code></pre></div><h2 id="subtree">subtree</h2>
<p>submodule은 하위 프로젝트의 체크섬만 참조하는 반면 subtree는 <code>.gitmodule</code>과 같은 메타 데이터없이 데이터를 그대로 복제합니다.</p>
<ul>
<li>왜 submodule 대신 subtree를 사용해야 할까?
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/git-subtree">Git subtree: the alternative to Git submodule</a> - Atlassian</li>
<li><a href="https://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/">Why your company shouldn&rsquo;t use Git submodules</a> - Amber</li>
</ul>
</li>
</ul>
<p><img src="/images/shell/git/tree-subtree-concept.png" alt="tree-subtree-concept"></p>
<p><em><a href="https://opensource.com/article/20/5/git-submodules-subtrees">일반적인 Tree 개념</a></em></p>
<h2 id="branch">branch</h2>
<p>브랜치(branch)는 나뭇가지나 지점, 분기를 의미합니다.
Git의 브랜치는 커밋 사이를 가볍게 이동할 수 있는 포인터 같은 것입니다.
흔히 말하는 master, main 브랜치는 트렁크(trunk, 줄기) 브랜치라고 불리는데 소스 코드 통합의 중심이 되는 브랜치이기 때문입니다.</p>
<p>branch 명령을 실행하면 다음의 단계를 수행합니다.</p>
<ol>
<li><code>.git/refs/heads/</code>에서 모든 브랜치명을 수집한다.</li>
<li><code>.git/HEAD</code>에 위치한 HEAD를 참조해 현재 작업 중인 브랜치를 찾는다.</li>
<li>모든 브랜치를 오름차순으로 정렬하고, 현재 작업 중인 브랜치에 별표(*)를 표시한다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git branch
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>* feature
</span></span><span style="display:flex;"><span> master
</span></span></code></pre></div><h3 id="xargs">xargs</h3>
<p>eXtended ARGuments, Git 명령어는 아니지만 함께 사용하면 유용합니다.</p>
<ul>
<li><a href="https://www.baeldung.com/linux/xargs">When to Use xargs</a> - Baeldung</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>echo {0..9} | xargs -n <span style="color:#f60">2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 0 1</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 2 3</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 4 5</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 6 7</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 8 9</span>
</span></span></code></pre></div><p>branch 명령과 xargs 명령을 파이프(<code>|</code>)로 연결해서 사용하지 않는 작업 브랜치를 한꺼번에 정리할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># master, stable, main, 현재 브랜치 외 모든 브랜치 삭제</span>
</span></span><span style="display:flex;"><span>git branch | grep -v <span style="color:#87ceeb">&#34;master\|stable\|main\|\*&#34;</span> | xargs git branch -D
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 현재 브랜치 제외하고 삭제</span>
</span></span><span style="display:flex;"><span>git branch | grep -v <span style="color:#87ceeb">&#34;\*&#34;</span> | xargs git branch -D
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-s" data-lang="s"><span style="display:flex;"><span><span style="color:#0f0"># 모두 삭제</span>
</span></span><span style="display:flex;"><span>git branch | grep -v <span style="color:#87ceeb">&#39;^*&#39;</span> | xargs git branch -D
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 정규표현식으로 특정 브랜치 삭제</span>
</span></span><span style="display:flex;"><span>git branch | grep -Eo <span style="color:#87ceeb">&#39;feature/.*&#39;</span> | xargs git branch -D
</span></span></code></pre></div><h2 id="tag-1">tag</h2>
<p>커밋을 참조하기 쉽도록 꼬리표(tag)를 붙입니다.
Lightweight 태그와 Annotated 태그 두 종류가 있습니다.</p>
<ul>
<li>Lightweight 태그는 단순히 특정 커밋에 대한 포인터일 뿐이다.</li>
<li>Annotated 태그는 Git 데이터베이스에 태그를 만든 사람의 이름, 이메일과 태그를 만든 날짜, 그리고 태그 메시지도 저장한다.
GPG(GNU Privacy Guard)로 서명할 수도 있다.
일반적으로 Annotated 태그를 만들어 이 모든 정보를 사용할 수 있도록 하는 것이 좋다.
하지만 임시로 생성하는 태그거나 이러한 정보를 유지할 필요가 없는 경우에는 Lightweight 태그를 사용할 수도 있다.</li>
</ul>
<p>태그 달기(Annotated tag)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git tag -a 1.0.0 -m <span style="color:#87ceeb">&#34;test tag&#34;</span>
</span></span></code></pre></div><p>tag 목록을 확인합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git tag
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 1.0.0</span>
</span></span></code></pre></div><p>tag 내용을 확인합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git show 1.0.0
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>tag 1.0.0
</span></span><span style="display:flex;"><span>Tagger: Changsu Im &lt;imcxsu@gmail.com&gt;
</span></span><span style="display:flex;"><span>Date:   Sat Jan <span style="color:#f60">15</span> 20:38:46 <span style="color:#f60">2022</span> +0900
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>test tag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>commit 49ef168385a2fe63f6e47055c1da79a0465039dc (HEAD -&gt; master, tag: 1.0.0)
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git show-ref --tags
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 02618f768d91cc1d21f5998c8d10ad62aacf278b refs/tags/1.0.0</span>
</span></span></code></pre></div><p>tag 명령어를 실행하면 다음과 같은 단계를 수행합니다.</p>
<ol>
<li>커밋이 참조하고 있는 체크섬을 가져온다.</li>
<li>존재하는 태그명들 중 주어진 태그명을 검증한다.</li>
<li>새로운 태그명이라면 naming convention을 검증한다.</li>
<li>태그 객체가 생성된다. (<code>.git/refs/tags/</code>)</li>
</ol>
<h2 id="switch">switch</h2>
<p>브랜치를 변경합니다.</p>
<ul>
<li><a href="https://github.com/git/git/blob/v2.23.0/Documentation/RelNotes/2.23.0.txt#L61">git@v2.23.0</a> 부터 <code>checkout</code> 명령어는 <code>git-switch</code>와 <code>git-restore</code>로 분리되었습니다.
이유는 checkout이 하는 기능이 많기 때문입니다.
<ul>
<li><a href="https://github.blog/2019-08-16-highlights-from-git-2-23/">Highlights from Git 2.23</a> - GitHub Blog</li>
<li><a href="https://www.infoq.com/news/2019/08/git-2-23-switch-restore/">Git 2.23 Adds Switch and Restore Commands</a> - Sergio De Simone</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 1. 원격 리포지터리에서 해결하려는 Issue에 맞는 브랜치를 생성한다.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 2. 로컬 환경에서 원격 리포지터리의 업데이트 사항을 가져온다.</span>
</span></span><span style="display:flex;"><span>git fetch --all
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 3. 해당 브랜치를 tracking하는 로컬 브랜치를 생성한다.</span>
</span></span><span style="display:flex;"><span>git switch -c feature/local-test -t origin/feature/remote-test
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Branch &#39;feature/local-test&#39; set up to track remote branch &#39;feature/remote-test&#39; from &#39;origin&#39;.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Switched to a new branch &#39;feature/local-test&#39;</span>
</span></span></code></pre></div><p>브랜치를 Local에서 먼저 생성하는 경우도 있습니다.
이 경우 upstream까지 지정합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 1. 브랜치를 생성한다.</span>
</span></span><span style="display:flex;"><span>git switch -c test-rebase
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 2. push하면서 upstream을 지정한다.</span>
</span></span><span style="display:flex;"><span>git push origin HEAD --set-upstream
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Branch &#39;test-rebase&#39; set up to track remote branch &#39;test-rebase&#39; from &#39;origin&#39;.</span>
</span></span></code></pre></div><h3 id="upstream">upstream</h3>
<p><img src="/images/shell/git/triangular-workflow.png" alt="Triangular Workflow"></p>
<p><a href="https://github.blog/2015-07-29-git-2-5-including-multiple-worktrees-and-triangular-workflows/">Triangular Workflow</a></p>
<p>upstream이라는 용어는 헷갈릴 수 있습니다.
협업 프로젝트에서 보통 위와 같은 원본 저장소를 <code>upstream</code>이라고 부르고
그것을 <a href="#fork">fork</a>한 저장소를 <code>origin</code>,
upstream에서 fetch한 로컬 환경을 <code>local</code>이라고 부릅니다.
아래 명령어는 지정한 <code>upstream</code> 브랜치로 push하도록 합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git push origin HEAD --set-upstream
</span></span><span style="display:flex;"><span><span style="color:#0f0"># push 후</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Branch &#39;feature/test-upstream&#39; set up to track remote branch &#39;feature/test-upstream&#39; from &#39;origin&#39;.</span>
</span></span></code></pre></div><p>잠깐! fork한 <code>origin</code> 저장소가 아니라 <code>upstream</code>으로 push?</p>
<p>사실 upstream이라는 용어는 Git에서만 쓰이는 건 아닙니다.
흔히 downstream과 대비해서 네트워크에서도 쓰이는 용어입니다.
예를 들어 로컬에서 원격으로, 클라이언트에서 서버로 데이터를 전송하는 것을 upstream이라고 말하고, downstream은 그 반대입니다.
즉, upload/download의 방향을 말하며 Git에서 upstream은 push하려는 방향을 말합니다.</p>
<p>여기서 중요한 점은 Git에서 절대적인 upstream/downstream이 없다는 것입니다.
Git은 DVCS(Distributed Version Control System)입니다.
다시 말해서 origin이 upstream일 수 있고, upstream은 또 다른 저장소의 downstream일 수 있습니다.
Triangular Workflow는 하나의 효과적인 방식일 뿐입니다.</p>
<h2 id="status">status</h2>
<p>index 파일과 HEAD 커밋, index 파일과 working tree를 비교해서 차이나는 부분을 표시합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git status -sb
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0">## feature...master [ahead 2, behind 1]</span>
</span></span><span style="display:flex;"><span>D  README.md
</span></span><span style="display:flex;"><span>D  a.c
</span></span><span style="display:flex;"><span>D  c.c
</span></span><span style="display:flex;"><span>?? README.md
</span></span><span style="display:flex;"><span>?? a-1.c
</span></span><span style="display:flex;"><span>?? test
</span></span></code></pre></div><h2 id="add">add</h2>
<p>Working Directory의 변경 사항들을 Staging Area에 포함시킵니다.
index를 갱신하고 다음 커밋에 대한 내용을 준비합니다.
그 과정은 다음과 같습니다.</p>
<ol>
<li>컨텐츠에 대한 SHA-1 체크섬을 계산한다.</li>
<li>기존의 blob 객체에 새로운 컨텐츠나 링크를 만들지 여부를 결정한다.</li>
<li>실제로 생성하거나 blob에 연결한다.</li>
<li>컨텐츠에 위치를 추적할 tree 객체를 생성한다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 모든 변경 사항을 staging area에 추가</span>
</span></span><span style="display:flex;"><span>git add -A
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 현재 디렉토리의 변경 사항을 staging area에 추가</span>
</span></span><span style="display:flex;"><span>git add .
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 특정 변경 사항만 추가</span>
</span></span><span style="display:flex;"><span>git add <span style="color:#87ceeb">&#39;*Detail.java&#39;</span>
</span></span><span style="display:flex;"><span>git add src/
</span></span></code></pre></div><h2 id="fetch">fetch</h2>
<p>커밋, 파일 및 참조를 원격 저장소에서 로컬 저장소로 다운로드합니다.
다른 사람들이 작업한 것을 보고 싶을 때 사용할 수 있습니다.
다음과 같은 단계를 수행합니다.</p>
<ol>
<li>URL이나 원격 저장소 이름을 검증하고, 지정된 저장소에 대한 유효성을 확인한다.</li>
<li>정의된 것이 없다면 설정 파일을 읽어서 기본 설정된 원격 저장소를 찾는다.</li>
<li>찾았다면 원격 저장소로부터 이름이 지정된 참조(heads와 tags)와 관련된 객체들까지 가져온다.</li>
<li>복구 가능한 참조들은 나중에 병합이 가능하도록 <code>.git/FETCH_HEAD</code>에 저장한다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git fetch &lt;branch&gt;
</span></span><span style="display:flex;"><span>git fetch --all <span style="color:#0f0"># Fetch all remotes.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Fetching origin</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git merge &lt;origin/branch&gt; &lt;commit&gt;
</span></span><span style="display:flex;"><span>git merge FETCH_HEAD
</span></span></code></pre></div><h2 id="commit-1">commit</h2>
<p>관리 대상(Tracked)에 있는 변경 사항들을 HEAD에 반영합니다.
즉, staging area(index)에 있는 변경 사항들을 local repository에 반영합니다.
그렇다고 working tree나 staging area의 내용들을 지우지 않습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git commit
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#87ceeb">&#34;commit message&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 마지막 커밋의 author를 변경할 수 있다.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 특정 커밋의 author를 변경하고 싶다면 rebase를 사용한다.</span>
</span></span><span style="display:flex;"><span>git commit --amend --author=<span style="color:#87ceeb">&#34;Changsu Im &lt;imcxsu@gmail.com&gt;&#34;</span>
</span></span></code></pre></div><h2 id="merge">merge</h2>
<p>소스 코드를 병합합니다.
다음과 같은 단계를 수행합니다.</p>
<ol>
<li>지정된 파라미터를 기반으로 <code>.git/refs/heads</code> 디렉토리로부터 병합 후보들을 식별한다.</li>
<li>모든 heads의 공통된 조상을 찾아 메모리에 있는 모든 대상 객체들을 로드한다.</li>
<li>공통 조상과 HEAD 사이의 차이를 판별한다.</li>
<li>두 head를 비교한다.</li>
<li>head 사이의 공통된 영역에서 변경 사항이 있다면 마커를 통해 충돌을 표시하고 사용자에게 안내한다.</li>
<li>충돌한 곳이 없다면, 콘텐츠를 병합하고, 병합을 기술한 메타데이터를 커밋한다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># feature 브랜치에서 main 브랜치`를` 병합한다.</span>
</span></span><span style="display:flex;"><span>git switch feature
</span></span><span style="display:flex;"><span>git merge main
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 위 명령어들은 한 줄로 실행할 수 있다.</span>
</span></span><span style="display:flex;"><span>git merge feature main
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># merge 과정에서 충돌이 발생했다면 --abort 옵션으로 취소할 수 있다.</span>
</span></span><span style="display:flex;"><span>git merge --abort
</span></span></code></pre></div><p><img src="/images/shell/git/merging-main-into-the-feature-branch.png" alt="Merging main into the feature branch"></p>
<p><em><a href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing">Merging main into the feature branch</a></em></p>
<p>병합은 두 가지 방식이 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># fast-forward</span>
</span></span><span style="display:flex;"><span>git merge --ff
</span></span></code></pre></div><p>먼저 Fast Forward 방식입니다.
현재 브랜치의 커밋(2nd commit)이 병합하려는 커밋(1st commit)을 조상(ancestor)으로 두고 있다면
별도의 Merge 과정 없이 그저 최신 커밋(1st commit ← 2nd commit)으로 이동합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># no-fast-forward</span>
</span></span><span style="display:flex;"><span>git merge --no-ff
</span></span></code></pre></div><p>두 번째는 <a href="https://en.wikipedia.org/wiki/Merge_(version_control)#Three-way_merge">3-way-merge</a> 방식을 사용한 No Fast Forward 방식입니다.
현재 브랜치의 커밋(2nd commit)이 병합하려는 커밋(1st commit)을 조상으로 두지 않는다면 공통 조상 하나를 사용하여 병합합니다.
단순히 브랜치 포인터를 최신 커밋으로 옮기는 게 아니라 3-way-merge의 결과를
별도의 <strong>Merge 커밋</strong>으로 만들고 나서 해당 브랜치의 HEAD가 그 커밋들을 가리키도록 이동시킵니다.
이 Merge 커밋은 부모 커밋을 2개 가집니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>*   commit aec54781c060c26eeb5a6475ea3fede4a47dc178
</span></span><span style="display:flex;"><span>|<span style="color:#87ceeb">\ </span> Merge: be1dacb bf50160 <span style="color:#0f0"># 부모 커밋이 2개</span>
</span></span><span style="display:flex;"><span>| | Author: Changsu &lt;imcxsu@gmail.com&gt;
</span></span><span style="display:flex;"><span>| | Date:   Wed Dec <span style="color:#f60">15</span> 05:46:44 <span style="color:#f60">2021</span> +0900
</span></span><span style="display:flex;"><span>| |
</span></span><span style="display:flex;"><span>| |     Merge pull request <span style="color:#0f0">#16 from markruler/test-merge-branch</span>
</span></span><span style="display:flex;"><span>| |
</span></span><span style="display:flex;"><span>| |     Testing merge commit
</span></span><span style="display:flex;"><span>| |
</span></span><span style="display:flex;"><span>| * commit bf50160af864cab37ba8eca54c97c6e448886b62 (test-merge-branch)
</span></span></code></pre></div><p>만약 병합하는 두 브랜치에서 같은 파일의 같은 부분을 동시에 수정하고 병합하면 GIt은 해당 부분을 병합하지 못합니다.
3-way-merge가 실패하고 충돌(Conflict)이 발생합니다.
<code>git mergetool</code>을 활용하면 간편하게 충돌을 해결할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git mergetool
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>This message is displayed because <span style="color:#87ceeb">&#39;merge.tool&#39;</span> is not configured.
</span></span><span style="display:flex;"><span>See <span style="color:#87ceeb">&#39;git mergetool --tool-help&#39;</span> or <span style="color:#87ceeb">&#39;git help config&#39;</span> <span style="color:#f00">for</span> more details.
</span></span><span style="display:flex;"><span><span style="color:#87ceeb">&#39;git mergetool&#39;</span> will now attempt to use one of the following tools:
</span></span><span style="display:flex;"><span>opendiff kdiff3 tkdiff xxdiff meld tortoisemerge gvimdiff diffuse diffmerge ecmerge p4merge araxis bc codecompare smerge emerge vimdiff nvimdiff
</span></span><span style="display:flex;"><span>No files need merging
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git mergetool --tool-help
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#87ceeb">&#39;git mergetool --tool=&lt;tool&gt;&#39;</span> may be set to one of the following:
</span></span><span style="display:flex;"><span>    vimdiff
</span></span><span style="display:flex;"><span>    vimdiff2
</span></span><span style="display:flex;"><span>    vimdiff3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The following tools are valid, but not currently available:
</span></span><span style="display:flex;"><span>    araxis
</span></span><span style="display:flex;"><span>    bc
</span></span><span style="display:flex;"><span>    bc3
</span></span><span style="display:flex;"><span>    codecompare
</span></span><span style="display:flex;"><span>    deltawalker
</span></span><span style="display:flex;"><span>    diffmerge
</span></span><span style="display:flex;"><span>    diffuse
</span></span><span style="display:flex;"><span>    ecmerge
</span></span><span style="display:flex;"><span>    emerge
</span></span><span style="display:flex;"><span>    examdiff
</span></span><span style="display:flex;"><span>    guiffy
</span></span><span style="display:flex;"><span>    gvimdiff
</span></span><span style="display:flex;"><span>    gvimdiff2
</span></span><span style="display:flex;"><span>    gvimdiff3
</span></span><span style="display:flex;"><span>    kdiff3
</span></span><span style="display:flex;"><span>    meld
</span></span><span style="display:flex;"><span>    opendiff
</span></span><span style="display:flex;"><span>    p4merge
</span></span><span style="display:flex;"><span>    smerge
</span></span><span style="display:flex;"><span>    tkdiff
</span></span><span style="display:flex;"><span>    tortoisemerge
</span></span><span style="display:flex;"><span>    winmerge
</span></span><span style="display:flex;"><span>    xxdiff
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Some of the tools listed above only work in a windowed
</span></span><span style="display:flex;"><span>environment. If run in a terminal-only session, they will fail.
</span></span></code></pre></div><h2 id="pull">pull</h2>
<p>해당 명령은 내부적으로 다음의 과정을 수행합니다.</p>
<ol>
<li>주어진 파라미터를 가지고 <code>git fetch</code>를 수행합니다.</li>
<li><code>git merge</code>를 호출해 현재 브랜치의 HEAD와 지정한 브랜치의 HEAD를 병합합니다.</li>
</ol>
<p>Git 서버의 Pull Request는 협업 과정에서 &ldquo;제가 이런 작업들을 origin 저장소에 병합하니까 pull 부탁드려요~&ldquo;라고 하는 것과 같습니다.</p>
<h2 id="rebase">rebase</h2>
<blockquote>
<p><a href="https://www.facebook.com/photo?fbid=4291246567585200">rebase는 Git의 꽃이다.</a></p>
</blockquote>
<p>merge는 병합하려는 commit 객체를 그대로 가져오는 non-destructive 명령입니다.
반면 rebase는 내용은 같지만 새로운 commit 객체를 생성해서 HEAD에 배치합니다.
그래서 만약 rebase를 이용해 소스를 병합한다면 이미 병합한 작업 브랜치는 더 이상 사용할 수 없습니다.</p>
<p>rebase를 하든지, merge를 하든지 최종 결과물은 같지만 커밋 히스토리가 다릅니다.
보통 원격 브랜치에 커밋 히스토리를 깔끔하게 적용하고 싶을 때 사용합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># oldBase 브랜치에서 newBase 브랜치로 rebase한다.</span>
</span></span><span style="display:flex;"><span>git rebase &lt;newBase&gt; &lt;oldBase&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># feature 브랜치에서 main 브랜치`로` 재배치(rebase)한다.</span>
</span></span><span style="display:flex;"><span>git switch feature
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>       A---B---C feature
</span></span><span style="display:flex;"><span>      /
</span></span><span style="display:flex;"><span> D---E---F---G main
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git rebase main
</span></span><span style="display:flex;"><span>git rebase main feature
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>               A<span style="color:#87ceeb">&#39;--B&#39;</span>--C&#39; feature
</span></span><span style="display:flex;"><span>              /
</span></span><span style="display:flex;"><span> D---E---F---G main
</span></span></code></pre></div><p><img src="/images/shell/git/rebasing-the-feature-branch-onto-main.png" alt="Rebasing the feature branch onto main"></p>
<p><em><a href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing">Rebasing the feature branch onto main</a></em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>o---o---o---o---o  main
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">\
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb"></span>         o---o---o---o---o  featureA
</span></span><span style="display:flex;"><span>              <span style="color:#87ceeb">\
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb"></span>               o---o---o  featureB
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git rebase --onto main featureA featureB
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>                      o---o---o  featureB
</span></span><span style="display:flex;"><span>                     /
</span></span><span style="display:flex;"><span>    o---o---o---o---o  main
</span></span><span style="display:flex;"><span>     <span style="color:#87ceeb">\
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb"></span>      o---o---o---o---o  featureA
</span></span></code></pre></div><p>interactive 모드를 사용하면 커밋 목록을 나열한 후 todo 목록을 작성해서 rebase 작업을 진행할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 돌아가고 싶은 커밋의 직전 커밋까지</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># -i 옵션은 --interactive의 short option</span>
</span></span><span style="display:flex;"><span>git rebase -i &lt;commit&gt;^
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># root 커밋부터</span>
</span></span><span style="display:flex;"><span>git rebase -i --root
</span></span></code></pre></div><p>아래와 같은 하위 명령어들이 있습니다.
나열된 커밋의 순서를 바꾸는 것만으로도 실제 커밋 순서가 변경됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># p, pick &lt;commit&gt; = use commit</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># e, edit &lt;commit&gt; = use commit, but stop for amending</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># f, fixup &lt;commit&gt; = like &#34;squash&#34;, but discard this commit&#39;s log message</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># b, break = stop here (continue rebase later with &#39;git rebase --continue&#39;)</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># d, drop &lt;commit&gt; = remove commit</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># l, label &lt;label&gt; = label current HEAD with a name</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># t, reset &lt;label&gt; = reset HEAD to a label</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># .       create a merge commit using the original merge commit&#39;s</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># .       message (or the oneline, if no original merge commit was</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># .       specified). Use -c &lt;commit&gt; to reword the commit message.</span>
</span></span></code></pre></div><h3 id="squash와-fixup">squash와 fixup</h3>
<p>squash는 <strong>커밋 메시지를 확인하고 편집한 후</strong> squash and merge 합니다.
대상 커밋 뿐만 아니라 이후의 커밋들도 다시 저장해야 하기 때문에 체크섬이 변경됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git --no-pager log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 399e2ef (HEAD -&gt; squash) 3</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ea37b52 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7f1a625 (main) 1</span>
</span></span></code></pre></div><p>지금 staged 파일들을 squash 커밋으로 만듭니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git commit --squash ea37b52
</span></span></code></pre></div><p>squash 커밋은 대상 커밋 메시지 앞에 &ldquo;squash!&ldquo;가 붙습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git --no-pager log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># d927a64 (HEAD -&gt; squash) squash! 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 399e2ef 3</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ea37b52 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7f1a625 (main) 1</span>
</span></span></code></pre></div><p>squash 커밋들은 커밋 메시지를 확인 후 squash and merge 합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git rebase -i --autosquash main
</span></span><span style="display:flex;"><span><span style="color:#0f0"># pick ea37b52 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># squash d927a64 squash! 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># pick 399e2ef 3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># [detached HEAD 6f530b5] 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  Date: Mon Jan 17 02:05:58 2022 +0900</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  2 files changed, 0 insertions(+), 0 deletions(-)</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  create mode 100644 b</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  create mode 100644 d</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Successfully rebased and updated refs/heads/squash.</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git --no-pager log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ea3b05e (HEAD -&gt; squash) 3 # 이후의 커밋들도 다시 저장한다.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 6f530b5 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7f1a625 (main) 1</span>
</span></span></code></pre></div><p><strong>fixup</strong>은 squash와 결과가 동일하지만,
기존 커밋 메시지만 남기고 <strong>fixup 커밋의 메시지들은 버립니다</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git --no-pager log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ffdc929 (HEAD -&gt; fixup) 3</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ea53497 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7f1a625 (main) 1</span>
</span></span></code></pre></div><p>지금 staged 파일들을 fixup 커밋으로 만듭니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git commit --fixup ea53497
</span></span></code></pre></div><p>fixup 커밋은 대상 커밋 메시지 앞에 &ldquo;fixup!&ldquo;이 붙습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git --no-pager log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 202953c (HEAD -&gt; fixup) fixup! 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ffdc929 3</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ea53497 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7f1a625 (main) 1</span>
</span></span></code></pre></div><p>fixup 커밋들은 자동으로 squash and merge 됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git rebase -i --autosquash main
</span></span><span style="display:flex;"><span><span style="color:#0f0"># pick ea53497 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># fixup 202953c fixup! 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># pick ffdc929 3</span>
</span></span></code></pre></div><p>fixup 커밋의 메시지들은 자동으로 버려집니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>Successfully rebased and updated refs/heads/fixup.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git --no-pager log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 449ed00 (HEAD -&gt; fixup) 3</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 000a709 2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7f1a625 (main) 1</span>
</span></span></code></pre></div><h2 id="cherry-pick">cherry-pick</h2>
<p>어느 브랜치든지 커밋의 체크섬을 알고 있다면 해당 커밋의 변경 사항들을 현재 <code>HEAD</code>에 반영합니다.
<strong>커밋 체크섬은 달라진다</strong>는 것에 유의합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git cherry-pick &lt;commit&gt;
</span></span></code></pre></div><p><code>--no-commit</code> 옵션은 커밋의 변경 내용만 가져오고 커밋하지 않습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git cherry-pick &lt;commit&gt; --no-commit
</span></span></code></pre></div><h2 id="stash">stash</h2>
<p>stash는 숨겨둔다는 뜻으로 현재 로컬 브랜치에서 수정한 데이터를 Stack에 임시로 저장해둘 수 있습니다.
stash에 저장한 데이터는 브랜치 별로 관리되기 때문에 작업 중에 브랜치를 자유롭게 변경할 수 있도록 해줍니다.</p>
<p>변경 사항을 Stack에 저장합니다.
아무런 하위 명령어를 입력하지 않으면 default 옵션입니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash push
</span></span></code></pre></div><p>Stack이기 때문에 <code>pop</code>은 <code>stash@{0}</code>부터 작업 데이터를 꺼낸 후 drop 합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash pop
</span></span></code></pre></div><p><code>apply</code>는 pop처럼 작업 데이터를 Stack에서 꺼내지만 Stack에서 drop하지 않습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash apply
</span></span></code></pre></div><p><code>drop</code>은 <code>stash@{0}</code>을 제거한다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash drop
</span></span></code></pre></div><p><code>clear</code>는 모든 stash 데이터를 제거합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash clear
</span></span></code></pre></div><p><code>list</code>는 stash 목록을 조회합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash list
</span></span></code></pre></div><p><code>show</code>는 <code>stash@{0}</code>과 <code>HEAD</code>의 diff를 보여줍니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash show
</span></span><span style="display:flex;"><span><span style="color:#0f0"># --patch 옵션은 stash@{2}와 HEAD의 diff를 보여줍니다.</span>
</span></span><span style="display:flex;"><span>git stash show -p[--patch] <span style="color:#f60">2</span>
</span></span></code></pre></div><p><code>save</code>는 현재 상태를 저장합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># git stash save &lt;message&gt;</span>
</span></span><span style="display:flex;"><span>git stash save <span style="color:#87ceeb">&#34;haha&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Saved working directory and index state On master: haha</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash list
</span></span><span style="display:flex;"><span><span style="color:#0f0"># stash@{0}: On master: haha</span>
</span></span></code></pre></div><p>기본적으로 untracked 파일이나 ignored 파일은 stash하지 않지만 옵션을 주면 stash 할 수 있습니다. (각각 <code>--include-untracked</code>, <code>--all</code>)</p>
<p><img src="/images/shell/git/git-stash-options.png" alt="git stash options"></p>
<p><em><a href="https://www.atlassian.com/git/tutorials/saving-changes/git-stash">git stash options</a></em></p>
<h3 id="how-git-stash-works">How git stash works</h3>
<p>stash된 상태는 실제로 로컬 저장소에 커밋 객체처럼 인코딩되어 저장됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline --graph stash@{0}
</span></span><span style="display:flex;"><span>*   3bd5af8 (refs/stash) On master: haha
</span></span><span style="display:flex;"><span>|<span style="color:#87ceeb">\
</span></span></span><span style="display:flex;"><span><span style="color:#87ceeb"></span>| * 09162cd index on master: 49ef168 test
</span></span><span style="display:flex;"><span>|/
</span></span><span style="display:flex;"><span>* 49ef168 (HEAD -&gt; master) test
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat .git/refs/stash
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 3bd5af85bcbfaf7b031972dc41b016c4eb463028</span>
</span></span></code></pre></div><h2 id="reset">reset</h2>
<p>HEAD를 특정 상태로 되돌립니다.
다양한 mode 옵션이 있습니다.</p>
<ul>
<li>
<p><code>--mixed</code> <strong>default 옵션</strong>입니다. 스테이징된 스냅샷이 지정한 커밋과 일치하도록 되돌리지만(Tracked → Untracked), 워킹 디렉토리에 영향을 주지 않습니다. <strong>되돌린 커밋 내용들은 Unstaged 상태로 남습니다</strong>.</p>
</li>
<li>
<p><code>--soft</code> 스테이징된 스냅샷과 워킹 디렉토리는 그대로 두고, 지정한 커밋까지 내용을 되돌립니다. <strong>되돌린 커밋 내용들은 Staged 상태로 남습니다</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git reset HEAD~1
</span></span><span style="display:flex;"><span>git reset --mixed HEAD~1
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Unstaged changes after reset:</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># M package-lock.json</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># M package.json</span>
</span></span></code></pre></div></li>
<li>
<p><code>--hard</code> 스테이징된 스냅샷과 워킹 디렉토리가 지정된 커밋과 일치하도록 되돌립니다. <strong>되돌린 커밋 내용들은 삭제됩니다</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git reset --hard HEAD~1
</span></span><span style="display:flex;"><span><span style="color:#0f0"># HEAD is now at 955b01b7 chore: renew mac certificates (#12)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 현재 작업 내용 전부 삭제</span>
</span></span><span style="display:flex;"><span>git reset --hard HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 첫 커밋 제외하고 전부 Hard Reset</span>
</span></span><span style="display:flex;"><span>git reset --hard <span style="color:#f00">$(</span>git rev-list --max-parents=<span style="color:#f60">0</span> HEAD<span style="color:#f00">)</span>
</span></span></code></pre></div></li>
<li>
<p><code>--merge</code> 워킹 트리에서 merge를 undo 할 수 있습니다. (Undo <code>merge</code>/<code>pull</code>)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git pull
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Auto-merging nitfol</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Merge made by recursive.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  nitfol                |   20 +++++----</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  ...</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git reset --merge ORIG_HEAD
</span></span></code></pre></div></li>
</ul>
<h2 id="restore">restore</h2>
<p>워킹 트리를 복구합니다.
<code>--staged</code> 옵션을 지정하면 스테이징된 스냅샷도 되돌릴 수 있습니다.</p>
<ul>
<li><a href="https://github.com/git/git/blob/v2.23.0/Documentation/RelNotes/2.23.0.txt#L61">git@v2.23.0</a> 부터 <code>checkout</code> 명령어에서 분리되었습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># git checkout -- ${file_name}</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># git restore --staged ${file_name}</span>
</span></span><span style="display:flex;"><span>git restore --staged * <span style="color:#0f0"># git reset --mixed HEAD</span>
</span></span></code></pre></div><h2 id="revert">revert</h2>
<p><code>reset</code>처럼 커밋을 되돌리지만 이력을 지우지 않고 변경 사항을 되돌리는 커밋을 생성합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># git revert &lt;commit&gt;</span>
</span></span><span style="display:flex;"><span>git revert 4ea42dbe
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># revert 커밋 메시지</span>
</span></span><span style="display:flex;"><span>Revert <span style="color:#87ceeb">&#34;이것은 4ea42dbe의 커밋 메시지입니다&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>This reverts commit 4ea42dbe6580e4f064091cd50b3c7cb2ab8b0e9b.
</span></span></code></pre></div><h2 id="git으로-버그-찾기">Git으로 버그 찾기</h2>
<h3 id="blame">blame</h3>
<p>파일의 라인마다 마지막 수정 정보를 확인할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git blame README.md
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 0f6d7dc1 (Changsu Im 2021-12-01 23:47:58 +0900 32) ### Bash</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dd2a98b2 (cxsu       2020-12-28 14:27:42 +0900 33) </span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dd2a98b2 (cxsu       2020-12-28 14:27:42 +0900 34) ```bash</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 69번째 라인의 변경 이력을 확인</span>
</span></span><span style="display:flex;"><span>git blame -L <span style="color:#f60">69</span> README.md
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 69번째 라인부터 82번째 라인까지의 변경 이력을 확인</span>
</span></span><span style="display:flex;"><span>git blame -L 69,82 README.md
</span></span></code></pre></div><h3 id="bisect">bisect</h3>
<ul>
<li><a href="https://www.metaltoad.com/blog/beginners-guide-git-bisect-process-elimination">A beginner&rsquo;s guide to GIT BISECT</a> - Tony Rost</li>
</ul>
<p>이분 탐색을 이용해 버그가 발생한 커밋을 찾습니다.
운영 환경에서 버그가 발생했는데 어디서부터 잘못된 건지 찾기 힘들 때가 있습니다.
이 때 bisect는 스냅샷 더미를 헤집고 다닐 수 있게 도와줍니다.</p>
<p>우선 아래 스크립트로 테스트용 프로젝트를 생성합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>mkdir git-bisect-tests
</span></span><span style="display:flex;"><span>cd git-bisect-tests
</span></span><span style="display:flex;"><span>git init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo row &gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding first row&#34;</span>
</span></span><span style="display:flex;"><span>echo row &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding second row&#34;</span>
</span></span><span style="display:flex;"><span>echo row &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding third row&#34;</span>
</span></span><span style="display:flex;"><span>echo your &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding the word &#39;your&#39;&#34;</span>
</span></span><span style="display:flex;"><span>echo boat &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding the word &#39;boat&#39;&#34;</span>
</span></span><span style="display:flex;"><span>echo gently &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding the word &#39;gently&#39;&#34;</span>
</span></span><span style="display:flex;"><span>sed -i -e <span style="color:#87ceeb">&#39;s/boat/bug/g&#39;</span> test.txt 
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Changing the word &#39;boat&#39; to &#39;bug&#39;&#34;</span>
</span></span><span style="display:flex;"><span>echo down &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding the word &#39;down&#39;&#34;</span>
</span></span><span style="display:flex;"><span>echo the &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding the word &#39;the&#39;&#34;</span>
</span></span><span style="display:flex;"><span>echo stream &gt;&gt; test.txt
</span></span><span style="display:flex;"><span>git add -A &amp;&amp; git commit -m <span style="color:#87ceeb">&#34;Adding the word &#39;stream&#39;&#34;</span>
</span></span></code></pre></div><p><code>test.txt</code> 파일에 삽입된 bug가 어디서 발생했는지 찾아볼 겁니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># test.txt</span>
</span></span><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>your
</span></span><span style="display:flex;"><span>bug <span style="color:#0f0"># HERE</span>
</span></span><span style="display:flex;"><span>gently
</span></span><span style="display:flex;"><span>down
</span></span><span style="display:flex;"><span>the
</span></span><span style="display:flex;"><span>stream
</span></span></code></pre></div><p><code>bisect</code>를 시작합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect start
</span></span></code></pre></div><p>가장 먼저 버그를 발견한 현재 커밋을 기록합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect bad
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>d4a701f (HEAD -&gt; master, refs/bisect/bad) Adding the word <span style="color:#87ceeb">&#39;stream&#39;</span>
</span></span><span style="display:flex;"><span>eedf347 Adding the word <span style="color:#87ceeb">&#39;the&#39;</span>
</span></span><span style="display:flex;"><span>9a12012 Adding the word <span style="color:#87ceeb">&#39;down&#39;</span>
</span></span><span style="display:flex;"><span>f937601 Changing the word <span style="color:#87ceeb">&#39;boat&#39;</span> to <span style="color:#87ceeb">&#39;bug&#39;</span>
</span></span><span style="display:flex;"><span>759ea63 Adding the word <span style="color:#87ceeb">&#39;gently&#39;</span>
</span></span><span style="display:flex;"><span>850323e Adding the word <span style="color:#87ceeb">&#39;boat&#39;</span>
</span></span><span style="display:flex;"><span>222f64a Adding the word <span style="color:#87ceeb">&#39;your&#39;</span>
</span></span><span style="display:flex;"><span>c608f80 Adding third row
</span></span><span style="display:flex;"><span>60532d0 Adding second row
</span></span><span style="display:flex;"><span>106eb10 Adding first row
</span></span></code></pre></div><p>버그 없이 멀쩡했던 커밋을 기록합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect good c608f80
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>Bisecting: <span style="color:#f60">3</span> revisions left to test after this (roughly <span style="color:#f60">2</span> steps)
</span></span><span style="display:flex;"><span>[759ea6356258b687ad8b12178b2934ab5ad830bf] Adding the word <span style="color:#87ceeb">&#39;gently&#39;</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p><img src="/images/shell/git/git-bisect.png" alt="git-bisect"></p>
<p><em><a href="https://www.datree.io/resources/git-bisect-debugging-with-git">Git bisect - debugging with git, Noaa Barki</a></em></p>
<p>이제부터 버그를 찾아나섭니다.
Git은 bad 커밋과 good 커밋의 중간 커밋(이진 탐색)을 자동으로 Checkout 해줍니다.
현재 커밋에서 테스트해보고 만약 버그가 계속 발생한다면 <code>bad</code>로 기록하고 <code>good</code> 커밋 방향으로 범위를 좁혀 갑니다.
버그가 없으면 <code>good</code>으로 기록하고 <code>bad</code> 커밋 방향으로 범위를 좁혀 갑니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 히스토리 확인</span>
</span></span><span style="display:flex;"><span>git log --oneline
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>759ea63 (HEAD) Adding the word <span style="color:#87ceeb">&#39;gently&#39;</span>
</span></span><span style="display:flex;"><span>850323e Adding the word <span style="color:#87ceeb">&#39;boat&#39;</span>
</span></span><span style="display:flex;"><span>222f64a Adding the word <span style="color:#87ceeb">&#39;your&#39;</span>
</span></span><span style="display:flex;"><span>c608f80 (refs/bisect/good-c608f8011e4bfa3d1f1e9f537cc148769f158669) Adding third row
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p><code>test.txt</code> 파일을 확인합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat test.txt
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>your
</span></span><span style="display:flex;"><span>boat
</span></span><span style="display:flex;"><span>gently
</span></span></code></pre></div><p>버그가 없으니 <code>good</code>으로 기록합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect good
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>Bisecting: <span style="color:#f60">1</span> revision left to test after this (roughly <span style="color:#f60">1</span> step)
</span></span><span style="display:flex;"><span>[9a120127fabd58d0f54786cf015528f77d9a9f17] Adding the word <span style="color:#87ceeb">&#39;down&#39;</span>
</span></span></code></pre></div><p><code>good</code>으로 기록하면 <code>bad</code> 커밋 방향으로 이분 탐색합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>9a12012 (HEAD) Adding the word <span style="color:#87ceeb">&#39;down&#39;</span>
</span></span><span style="display:flex;"><span>f937601 Changing the word <span style="color:#87ceeb">&#39;boat&#39;</span> to <span style="color:#87ceeb">&#39;bug&#39;</span>
</span></span><span style="display:flex;"><span>759ea63 (refs/bisect/good-759ea6356258b687ad8b12178b2934ab5ad830bf) Adding the word <span style="color:#87ceeb">&#39;gently&#39;</span>
</span></span><span style="display:flex;"><span>850323e Adding the word <span style="color:#87ceeb">&#39;boat&#39;</span>
</span></span><span style="display:flex;"><span>222f64a Adding the word <span style="color:#87ceeb">&#39;your&#39;</span>
</span></span><span style="display:flex;"><span>c608f80 (refs/bisect/good-c608f8011e4bfa3d1f1e9f537cc148769f158669) Adding third row
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ...</span>
</span></span></code></pre></div><p>계속해서 <code>test.txt</code> 파일을 확인합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat test.txt
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>row
</span></span><span style="display:flex;"><span>your
</span></span><span style="display:flex;"><span>bug <span style="color:#0f0"># 버그!!!</span>
</span></span><span style="display:flex;"><span>gently
</span></span><span style="display:flex;"><span>down
</span></span></code></pre></div><p>버그를 발견했으니 <code>bad</code>로 기록합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect bad
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Bisecting: 0 revisions left to test after this (roughly 0 steps)</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># [f9376015d4721390c942c0cd0064467b51495094] Changing the word &#39;boat&#39; to &#39;bug&#39;</span>
</span></span></code></pre></div><p><code>bad</code>로 기록하면 <code>good</code> 커밋 방향으로 이분 탐색합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># f937601 (HEAD) Changing the word &#39;boat&#39; to &#39;bug&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 759ea63 (refs/bisect/good-759ea6356258b687ad8b12178b2934ab5ad830bf) Adding the word &#39;gently&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 850323e Adding the word &#39;boat&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 222f64a Adding the word &#39;your&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># c608f80 (refs/bisect/good-c608f8011e4bfa3d1f1e9f537cc148769f158669) Adding third row</span>
</span></span></code></pre></div><p>그 다음 커밋도 <code>bad</code>로 기록하고
<code>good</code> 커밋(refs/bisect/good-759ea63) 사이에 더 이상 커밋이 남아있지 않다면
해당 <code>bad</code> 커밋이 버그가 발생한 커밋이라고 판단하고 탐색을 종료합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect bad
</span></span><span style="display:flex;"><span><span style="color:#0f0"># f9376015d4721390c942c0cd0064467b51495094 is the first bad commit</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># commit f9376015d4721390c942c0cd0064467b51495094</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Author: Changsu Im &lt;imcxsu@gmail.com&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Date:   Thu Feb 17 03:21:28 2022 +0900</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#     Changing the word &#39;boat&#39; to &#39;bug&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  test.txt | 2 +-</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  1 file changed, 1 insertion(+), 1 deletion(-)</span>
</span></span></code></pre></div><p>이분 탐색하는 동안 <code>.git</code> 디렉토리에 bisect를 위한 파일들이 생성됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat .git/BISECT_ANCESTORS_OK
</span></span><span style="display:flex;"><span>cat .git/BISECT_EXPECTED_REV
</span></span><span style="display:flex;"><span><span style="color:#0f0"># f9376015d4721390c942c0cd0064467b51495094</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat .git/BISECT_LOG
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect start
</span></span><span style="display:flex;"><span><span style="color:#0f0"># bad: [d4a701f370a2489c8976eb0ce9f7ccbc358e640d] Adding the word &#39;stream&#39;</span>
</span></span><span style="display:flex;"><span>git bisect bad d4a701f370a2489c8976eb0ce9f7ccbc358e640d
</span></span><span style="display:flex;"><span><span style="color:#0f0"># good: [c608f8011e4bfa3d1f1e9f537cc148769f158669] Adding third row</span>
</span></span><span style="display:flex;"><span>git bisect good c608f8011e4bfa3d1f1e9f537cc148769f158669
</span></span><span style="display:flex;"><span><span style="color:#0f0"># good: [759ea6356258b687ad8b12178b2934ab5ad830bf] Adding the word &#39;gently&#39;</span>
</span></span><span style="display:flex;"><span>git bisect good 759ea6356258b687ad8b12178b2934ab5ad830bf
</span></span><span style="display:flex;"><span><span style="color:#0f0"># bad: [9a120127fabd58d0f54786cf015528f77d9a9f17] Adding the word &#39;down&#39;</span>
</span></span><span style="display:flex;"><span>git bisect bad 9a120127fabd58d0f54786cf015528f77d9a9f17
</span></span><span style="display:flex;"><span><span style="color:#0f0"># bad: [f9376015d4721390c942c0cd0064467b51495094] Changing the word &#39;boat&#39; to &#39;bug&#39;</span>
</span></span><span style="display:flex;"><span>git bisect bad f9376015d4721390c942c0cd0064467b51495094
</span></span><span style="display:flex;"><span><span style="color:#0f0"># first bad commit: [f9376015d4721390c942c0cd0064467b51495094] Changing the word &#39;boat&#39; to &#39;bug&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat .git/BISECT_NAMES
</span></span><span style="display:flex;"><span>cat .git/BISECT_START
</span></span><span style="display:flex;"><span><span style="color:#0f0"># master</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat .git/BISECT_TERMS
</span></span><span style="display:flex;"><span><span style="color:#0f0"># bad</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># good</span>
</span></span></code></pre></div><p>bisect를 끝낼 때는 reset이라는 하위 명령어를 실행합니다.
그럼 <code>.git/BISECT_START</code>로 다시 checkout 합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git bisect reset
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Previous HEAD position was f937601 Changing the word &#39;boat&#39; to &#39;bug&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Switched to branch &#39;master&#39;</span>
</span></span></code></pre></div><h2 id="show">show</h2>
<p>Git Object를 확인합니다. (blob, tree, tag, commit)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git show <span style="color:#87ceeb">${</span><span style="color:#eedd82">object</span><span style="color:#87ceeb">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># tag</span>
</span></span><span style="display:flex;"><span>git show v1.0.0
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># tree</span>
</span></span><span style="display:flex;"><span>git show v1.0.0^{tree}
</span></span><span style="display:flex;"><span>git show v1.0.0^{tree}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># commit, blob, tree 등의 체크섬</span>
</span></span><span style="display:flex;"><span>git show 077b8fa429b57e299eb2db54ccf66ed6f1f993eb --oneline
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 어떤 커밋이 브랜치의 가장 최신 커밋이라면 간단히 브랜치 이름으로 커밋을 가리킬 수 있다.</span>
</span></span><span style="display:flex;"><span>git show master:README.md
</span></span></code></pre></div><h2 id="log">log</h2>
<p>커밋 이력을 조회합니다.</p>
<ul>
<li><a href="https://git-scm.com/docs/git-log#_pretty_formats">pretty formats</a>을 사용해서 출력 형식을 정할 수 있습니다.</li>
<li><code>--abbrev-commit</code> 짧고 중복되지 않는 해시 값을 보여줍니다. 앞 7자를 보여주고 해시 값이 중복되는 경우 더 긴 해시 값을 보여줍니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline --graph
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 날짜 출력</span>
</span></span><span style="display:flex;"><span>git log --graph --pretty=format:<span style="color:#87ceeb">&#39;%C(auto)%h%d (%cr) %cn &lt;%ce&gt; %s&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 모든 브랜치 로그 출력</span>
</span></span><span style="display:flex;"><span>git log --graph --format=format:<span style="color:#87ceeb">&#39;%C(bold blue)%h%C(reset) - %C(bold cyan)%aD %C(bold green)(%ar)%C(bold yellow)%d%C(reset)%n&#39;</span>L<span style="color:#87ceeb">&#39;          %C(white)%s %C(dim white)- %an&#39;</span> --all
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 보통 alias로 지정해서 사용한다.</span>
</span></span><span style="display:flex;"><span>git config --global alias.lg <span style="color:#87ceeb">&#34;log --graph --format=format:&#39;%C(bold blue)%h%C(reset) - %C(bold cyan)%aD %C(bold green)(%ar)%C(bold yellow)%d%C(reset)%n&#39;L&#39;          %C(white)%s %C(dim white)- %an&#39; --all&#34;</span>
</span></span><span style="display:flex;"><span>git lg
</span></span></code></pre></div><h3 id="triple-dot">Triple Dot(&hellip;)</h3>
<p>Triple Dot은 양쪽에 있는 두 refs 사이에서 공통으로 가지는 것을 제외하고 서로 다른 커밋만 보여줍니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log master...feature --oneline --left-right
</span></span><span style="display:flex;"><span>&gt; 2fe25f7 (HEAD -&gt; feature) q
</span></span><span style="display:flex;"><span>&gt; a611f28 feature commit message
</span></span><span style="display:flex;"><span>&lt; 106047f (master) first
</span></span></code></pre></div><h2 id="reflog-reference-logs">reflog: Reference logs</h2>
<p>Git은 자동으로 브랜치와 HEAD가 지난 몇 달 동안에 가리켰었던 커밋을 모두 기록하는데 이 로그를 <code>reflog</code>라고 부릅니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git reflog
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 734713b HEAD@{0}: commit: fixed refs handling, added gc auto, updated</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># d921970 HEAD@{1}: merge phedders/rdocs: Merge made by the &#39;recursive&#39; strategy.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 1c002dd HEAD@{2}: commit: added some blame and merge stuff</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 1c36188 HEAD@{3}: rebase -i (squash): updating HEAD</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 95df984 HEAD@{4}: commit: # This is a combination of two commits.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 1c36188 HEAD@{5}: rebase -i (squash): updating HEAD</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7e05da5 HEAD@{6}: rebase -i (pick): updating HEAD</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git reflog show HEAD@{0}
</span></span><span style="display:flex;"><span>git reflog show HEAD
</span></span></code></pre></div><p>특정 브랜치의 reflog만 확인할 수도 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># git reflog show main@{0}</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># git reflog show main</span>
</span></span><span style="display:flex;"><span>git reflog main
</span></span></code></pre></div><p>Git은 브랜치가 가리키는 것이 달라질 때마다 그 정보를 임시 영역에 저장합니다.
그래서 예전에 가리키던 것이 무엇인지 확인해 볼 수 있습니다.
<code>@{n}</code> 규칙을 사용하면 아래와 같이 HEAD가 5번 전에 가리켰던 것을 알 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git show HEAD@{5}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>commit a66e752aa1fccaefe115460dc761c0411d578ed5
</span></span><span style="display:flex;"><span>Author: Changsu Im &lt;imcxsu@gmail.com&gt;
</span></span><span style="display:flex;"><span>Date:   Wed Dec <span style="color:#f60">1</span> 23:51:01 <span style="color:#f60">2021</span> +0900
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>순서뿐 아니라 시간도 사용할 수 있습니다.
어제 날짜의 <code>master</code> 브랜치를 보고 싶으면 아래와 같이 명령어를 실행합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git show main@{1.minute.ago}
</span></span><span style="display:flex;"><span>git show main@{1.hour.ago}
</span></span><span style="display:flex;"><span>git show main@{1.day.ago}
</span></span><span style="display:flex;"><span>git show main@{yesterday}
</span></span><span style="display:flex;"><span>git show main@{1.week.ago}
</span></span><span style="display:flex;"><span>git show main@{1.month.ago}
</span></span><span style="display:flex;"><span>git show main@{1.year.ago}
</span></span><span style="display:flex;"><span>git show main@{2021-12-02.23:00:00}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>commit c23bcca5542f7eefa939dc47e3f843bb3b5b70f6 (HEAD -&gt; main, origin/main, origin/HEAD)
</span></span><span style="display:flex;"><span>Author: Changsu Im &lt;imcxsu@gmail.com&gt;
</span></span><span style="display:flex;"><span>Date:   Thu Dec <span style="color:#f60">2</span> 21:27:17 <span style="color:#f60">2021</span> +0900
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>이 명령은 특정 시간에 <code>main</code> 브랜치가 가리키고 있던 것이 무엇인지 보여줍니다.
reflog에 남아있을 때만 조회할 수 있기 때문에 너무 오래된 커밋은 조회할 수 없습니다.</p>
<table>
  <thead>
      <tr>
          <th>tilde</th>
          <th>caret</th>
          <th>at-sign (reflog)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>HEAD</td>
          <td>HEAD~0</td>
          <td>HEAD@{0}</td>
      </tr>
      <tr>
          <td>HEAD^</td>
          <td>HEAD~1</td>
          <td>HEAD@{1}</td>
      </tr>
      <tr>
          <td>HEAD^^</td>
          <td>HEAD~2</td>
          <td>HEAD@{4}</td>
      </tr>
  </tbody>
</table>
<h2 id="diff">diff</h2>
<p>변경 사항을 비교합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git diff &lt;before&gt; &lt;after&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 마지막 커밋과 그 전 커밋을 비교한다.</span>
</span></span><span style="display:flex;"><span>git diff HEAD~1 HEAD~0
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 현재 수정된 파일 내용(local)을 마지막 커밋 내용과 비교한다.</span>
</span></span><span style="display:flex;"><span>git diff HEAD^
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 직전 커밋과 비교해서 변경 사항을 확인한다.</span>
</span></span><span style="display:flex;"><span>git diff &lt;commit&gt;~ &lt;commit&gt;
</span></span></code></pre></div><h2 id="push">push</h2>
<p>local 저장소의 내용을 remote 저장소에 반영합니다.
히스토리가 일치하지 않으면 push할 수 없습니다.
rebase 등의 동작으로 히스토리가 변경되었다면 강제 푸시(force push)를 시도해 볼 수 있습니다.
다만 동료와 같이 작업 중인 브랜치라면 강제 푸시는 주의해서 사용해야 합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># origin 저장소의 main 브랜치로 push</span>
</span></span><span style="display:flex;"><span>git push origin main
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 현재 HEAD와 같은 브랜치로 push</span>
</span></span><span style="display:flex;"><span>git push origin HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># local에서 브랜치 생성 후 upstream에 push 및 upstream으로 지정</span>
</span></span><span style="display:flex;"><span>git push origin HEAD --set-upstream
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># 현재 브랜치의 upstream 브랜치 지정 및 push</span>
</span></span><span style="display:flex;"><span>git push --set-upstream origin feature/test-upstream
</span></span></code></pre></div><p>push 명령을 실행하면 다음 과정을 수행합니다.</p>
<ol>
<li>현재 브랜치를 확인한다.</li>
<li>설정 파일에 기본 원격 저장소가 존재하는지 탐색한다.</li>
<li>알고 있는 원격 저장소 URL과 추적 중인 heads(브랜치)를 가져온다.</li>
<li>원격지의 변화가 생긴 마지막 시간 이후에 변경된 내용이 있는지 확인한다.
<ol>
<li>원격 저장소로부터 reference 목록을 가져온다(<code>git ls-remote</code>).</li>
<li>로컬 저장소와 원격 저장소의 커밋 이력(history)을 확인한다. 만약 다르다면 fetch 혹은 pull을 수행한다.</li>
</ol>
</li>
</ol>
<p>remote 저장소에 동명의 브랜치가 없다면 아래와 같은 문구를 볼 수 있는데 저장소 이름과 브랜치 이름을 명시적으로 입력하면 push할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git push
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fatal: The upstream branch of your current branch does not match
</span></span><span style="display:flex;"><span>the name of your current branch.  To push to the upstream branch
</span></span><span style="display:flex;"><span>on the remote, use
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    git push origin HEAD:main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>To push to the branch of the same name on the remote, use
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    git push origin HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>To choose either option permanently, see push.default in <span style="color:#87ceeb">&#39;git help config&#39;</span>.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git push origin branch-name
</span></span></code></pre></div><h1 id="플러밍plumbing-명령어">플러밍(Plumbing) 명령어</h1>
<p>Git의 내부 동작을 제어하는 명령어입니다.
Git의 내부 데이터 구조를 조작하거나 확인하는 <strong>저수준 명령어</strong>입니다.</p>
<h2 id="rev-parse">rev-parse</h2>
<p>Git 데이터베이스에 있는 Object의 체크섬을 조회합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline -n <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 2fe25f7 (HEAD -&gt; feature) commit-msg</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git rev-parse feature
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 2fe25f72fca431a3b1aabb863b3ca6e04ddccb77</span>
</span></span></code></pre></div><h2 id="hash-object">hash-object</h2>
<p>데이터를 <code>.git</code> 디렉토리에 저장하고 체크섬을 계산합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git hash-object -w READM.me
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 76e579ae4c9106f3b62fb9203ec5b49d8014d87c</span>
</span></span></code></pre></div><h2 id="ls-tree">ls-tree</h2>
<p>tree 객체의 내용들을 보여줍니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># commit hash: ee85974962b9645d757bc71dd773effb67d3594f</span>
</span></span><span style="display:flex;"><span>git ls-tree ee85
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 blob 396865b39e3f04c5ca6369999fd886dbae7441d0  .gitignore</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 040000 tree 03ad58223967ba0494385bf1a1f9dc45783b860d  WebContent</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 040000 tree 4aefa5dd5e1e60eb883c4ba84d2a68a577692eb0  __test__</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 blob a823b374191cec985963bb821803a78a13ff89f2  jest.config.json</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 blob f496d9afc494b5312dd6efd73f43b5b5e40e5e63  pom.xml</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 040000 tree 59885985da5d1acf846d516fd9722daa1b2a4dd6  src</span>
</span></span></code></pre></div><h2 id="ls-files">ls-files</h2>
<p>index(스테이징된 파일)의 내용들을 체크섬과 함께 보여줍니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git ls-files -s
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 396865b39e3f04c5ca6369999fd886dbae7441d0 0 .gitignore</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ...</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 dcdb07b5dfb81d995509aecad3bf202ee3a1d690 0 __test__/price.test.js</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 a823b374191cec985963bb821803a78a13ff89f2 0 jest.config.json</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 f496d9afc494b5312dd6efd73f43b5b5e40e5e63 0 pom.xml</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 e148a4810619ea951091909d82ef0955fe3e0e8f 0 src/main/resources-dev/logback.xml</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 모든 파일 출력</span>
</span></span></code></pre></div><h2 id="cat-file">cat-file</h2>
<p>저장소에 저장된 객체의 내용, 타입, 사이즈 정보를 확인할 수 있습니다.</p>
<p><code>&lt;checksum&gt;</code>을 가진 객체의 타입을 알려줍니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git cat-file -t &lt;checksum&gt;
</span></span><span style="display:flex;"><span><span style="color:#0f0"># blob</span>
</span></span></code></pre></div><p><code>&lt;checksum&gt;</code>을 가진 객체의 사이즈를 알려줍니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git cat-file -s &lt;checksum&gt;
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 13 # bytes</span>
</span></span></code></pre></div><p>객체의 타입을 알고 있다면 파일의 내용을 표시해줍니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git cat-file &lt;type&gt; &lt;checksum&gt;
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 이것은 내용입니다.</span>
</span></span></code></pre></div><h2 id="write-tree">write-tree</h2>
<p>현재 index 내용으로 tree 객체를 생성하고 체크섬을 반환합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git write-tree
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 174592b10bb329e6f4664cbc03fd2c4869d12cdc</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git ls-tree <span style="color:#f60">17459</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 100644 blob d474e1b4d626dbf09a9776c778e9f8691bc8b406  a</span>
</span></span></code></pre></div><h2 id="commit-tree">commit-tree</h2>
<p>특정 tree 객체로 새로운 커밋을 만듭니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git commit-tree HEAD^{tree} -p main -m <span style="color:#87ceeb">&#34;test commit&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># d5fc19ea68a8556383d46a79177395b563a8a483</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git show d5fc
</span></span><span style="display:flex;"><span><span style="color:#0f0"># commit d5fc19ea68a8556383d46a79177395b563a8a483</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Author: Changsu Im &lt;imcxsu@gmail.com&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Date:   Sat Jan 15 22:59:25 2022 +0900</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#     test</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git merge --ff-only d5fc
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Updating 5fe0db6..d5fc19e</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Fast-forward</span>
</span></span></code></pre></div><h2 id="read-tree">read-tree</h2>
<p>특정 tree 객체를 index에 포함시킵니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git read-tree HEAD^
</span></span><span style="display:flex;"><span>git status
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Changes to be committed:</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git read-tree HEAD
</span></span><span style="display:flex;"><span>git status
</span></span><span style="display:flex;"><span><span style="color:#0f0"># nothing to commit, working tree clean</span>
</span></span></code></pre></div><h2 id="update-index">update-index</h2>
<p>woirking tree에서 기존 BLOB 또는 파일을 가져와 index를 업데이트합니다.</p>
<ul>
<li>
<p><code>update-ref</code> master 브랜치를 지정한 커밋 객체로 업데이트합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git update-ref refs/heads/master <span style="color:#f60">992379</span>
</span></span></code></pre></div></li>
<li>
<p><code>symbolic-ref</code> 또 다른 reference를 가리키도록 reference(일반적으로 HEAD)를 업데이트합니다.</p>
</li>
<li>
<p><code>ls-remote</code> 원격 저장소의 reference들을 나열합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git ls-remote
</span></span><span style="display:flex;"><span><span style="color:#0f0"># From .</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 2fe25f72fca431a3b1aabb863b3ca6e04ddccb77  HEAD</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 2fe25f72fca431a3b1aabb863b3ca6e04ddccb77  refs/heads/feature</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 106047f0f0c057c28417e790a4ac22aef2b8bcf2  refs/heads/master</span>
</span></span></code></pre></div></li>
</ul>
<h1 id="advanced">Advanced</h1>
<h2 id="git-hooks">Git Hooks</h2>
<p>Git 저장소에서 특정 이벤트가 발생할 때마다 자동으로 실행되는 스크립트입니다.
스크립트들은 기본적으로 <code>.git/hooks/*</code>에 위치합니다.</p>
<p><img src="/images/shell/git/hook-symlink-script.png" alt="Maintaining a hook using a symlink to version-controlled script"></p>
<p><em><a href="https://www.atlassian.com/git/tutorials/git-hooks">Maintaining a hook using a symlink to version-controlled script</a></em></p>
<p>예를 들어, 아래와 같은 <code>pre-push</code> hook은 <code>git push</code> 명령어를 실행시켰을 때 <code>push</code> 가 실행되기 전 <code>gradle test</code> 명령어가 먼저 실행됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#e5e5e5">#!/usr/bin/env bash
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 해당 스크립트의 실행 권한을 부여한다.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># chmod +x .githooks/pre-push</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># hooks 경로를 .githooks로 변경한다.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># git config core.hookspath .githooks</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># `pre-push` hook은 `git push` 전 항상 실행되는 스크립트다.</span>
</span></span><span style="display:flex;"><span>gradle test
</span></span></code></pre></div><h2 id="garbage-collection">Garbage Collection</h2>
<h3 id="packfiles">Packfiles</h3>
<p>Git이 처음 객체를 저장하는 형식은 loose objects라고 부릅니다.
여러 개의 loose objects를 Packfile(<code>./git/objects/pack/*</code>)이라 불리는 단일 바이너리 내에 압축(pack)합니다.
<code>git gc</code> 명령을 실행하면 <code>git repack</code>을 실행하고 <code>git pack-objects</code> 명령을 실행합니다.
<a href="https://git-scm.com/docs/git-pack-objects">pack-objects 명령</a>은 default로
zlib을 사용해서 packfile(<code>.pack</code>)과 pack의 index 파일(<code>.idx</code>)을 생성합니다.
packfile은 객체들을 효율적으로 주고받고, 빠르게 읽기 위해 사용합니다.
packfile은 다른 객체들과 다르게 clone, fetch, push, pull만 지원합니다.</p>
<table>
  <thead>
      <tr>
          <th>구현 측면</th>
          <th>프로세스 호출</th>
          <th>설명</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Server</td>
          <td>Upload-pack</td>
          <td>git fetch-pack에 의해 호출되며, 다른 측면에 없는 객체를 확인해 압축한 후 전송한다.</td>
      </tr>
      <tr>
          <td>Client</td>
          <td>Fetch-pack</td>
          <td>다른 저장소로부터 소실된 패키지를 능동적으로 받는다. 이 명령은 일반적으로 최종 사용자에 의해 호출되지 않고 이 명령을 상위 수준으로 감싼 git fetch가 실행된다.</td>
      </tr>
      <tr>
          <td>Server</td>
          <td>Receive-pack</td>
          <td>git send-pack에 의해 호출되며, 저장소 안에 push된 것들을 받는다.</td>
      </tr>
      <tr>
          <td>Client</td>
          <td>Send-pack</td>
          <td>다른 저장소에 대해 git 프로토콜을 이용해 객체들을 push한다. 이 명령은 일반적으로 최종 사용자에 의해 직접 호출되지 않고, 이 명령을 상위 수준으로 감싼 git push가 대신 실행된다.</td>
      </tr>
  </tbody>
</table>
<p>Packfile을 열어 압축한 내용을 확인해볼 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git verify-pack -v .git/objects/pack/pack-3c3fc80c28fbf38af5ca843ae8b714d22c06bdab.idx
</span></span><span style="display:flex;"><span><span style="color:#0f0"># ...</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># .git/objects/pack/pack-3c3fc80c28fbf38af5ca843ae8b714d22c06bdab.pack: ok</span>
</span></span></code></pre></div><h3 id="gc">gc</h3>
<p>Garbage Collection을 실행합니다.
Git에서 말하는 garbage는 접근할 수 없는 객체(orphan)입니다.
예를 들어 orphan 브랜치, 어떤 커밋에도 추가되지 않은 dangling 객체, 어떤 커밋도 가리키지 않고 압축되지 않은 blob 객체 등입니다.
<code>git prune</code>, <code>git repack</code>, <code>git pack</code>, <code>git rerere</code> 등 다른 내부 하위 명령어를 같이 실행합니다.
<code>git gc</code> 명령으로도 실행할 수 있지만 push, pull, merge, rebase, commit 명령에서 자동으로 실행됩니다.</p>
<p>2개의 커밋을 만들어서 reset 후 gc를 실행해봅니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># touch test and git add</span>
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#87ceeb">&#34;test&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># [master (root-commit) fd5e183] test</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># touch test2 and git add</span>
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#87ceeb">&#34;test2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># [master (root-commit) 291b5c6] test</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 291b5c6 (HEAD -&gt; master) test2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># fd5e183 test</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git reset --hard HEAD^
</span></span><span style="display:flex;"><span><span style="color:#0f0"># HEAD is now at fd5e183 test</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git gc
</span></span></code></pre></div><p>Garbage Collection을 실행하기 전에는 reset한 객체들을 복구할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git fsck --lost-found
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Checking object directories: 100% (256/256), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling commit 291b5c685acc9647ecf4330ec261d945078ac4d4</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git merge 291b5c6
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Updating fd5e183..291b5c6</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Fast-forward</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  test2 | 0</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  1 file changed, 0 insertions(+), 0 deletions(-)</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">#  create mode 100644 test2</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 291b5c6 (HEAD -&gt; master) test2</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># fd5e183 test</span>
</span></span></code></pre></div><p>orphan 브랜치를 만들어 gc를 실행해봅니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>touch test
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#87ceeb">&#34;test&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># [master (root-commit) c2864f0] test</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git switch --orphan empty
</span></span><span style="display:flex;"><span>Switched to a new branch <span style="color:#87ceeb">&#39;empty&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log
</span></span><span style="display:flex;"><span>fatal: your current branch <span style="color:#87ceeb">&#39;empty&#39;</span> does not have any commits yet
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git log --oneline --all
</span></span><span style="display:flex;"><span><span style="color:#0f0"># c2864f0 (master) test</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0f0"># git rm --cached -r .</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># git clean -f</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git commit --allow-empty -m <span style="color:#87ceeb">&#34;empty commit&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># [empty (root-commit) 02116ce] empty commit</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git gc
</span></span></code></pre></div><h2 id="prune">prune</h2>
<p>연결할 수 없는 orphan 객체를 제거합니다.
일반적으로 직접 실행되지 않고 <code>gc</code>의 하위 명령으로 gc의 기준에 따라 사용됩니다.</p>
<p><code>fsck</code> 명령으로 dangling 객체를 확인할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git fsck
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Checking object directories: 100% (256/256), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Checking objects: 100% (573/573), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob c319a9963957cb51e3cb692ac44a4831ea529992</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 4a8aaf3e4ce1c7e8da2764f8b6253a3029664d92</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 091349d97a6ecaeea819fac9fcb3f9d515c87a99</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 524b1128ed15bfb42eb1b71f93b3fd0fa77adab6</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 879b261622ca54bd28f8fa2be6330fe9ebfba814</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 7f3ced9d3dad92439949d98ad2d92125be07764c</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob bcfc949b6572079aa54db963abc59b48232813ed</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob f16c37ff355844ac388d101e5bba46e698a4deb8</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob f4d5466af82d891b81ad792b0e74e2341e46312f</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 0a56b32d98fea47ca5228e3b62ee1fc189408796</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 0e062ca2a9130d0bfb9ffcf29a0a43d6f1b65957</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 5ca654e778f2cceb0207dc9311c8961107caa17e</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># dangling blob 002f663c650d708e29d75524630bc5cf97403039</span>
</span></span></code></pre></div><p><code>--dry-run</code> 옵션을 사용하면 실제로 객체를 지우지 않고 어떤 것이 지워지는지 보여주기만 합니다.
확인해보면 위의 dangling blob 객체들이라는 것을 알 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git prune --dry-run --verbose
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 002f663c650d708e29d75524630bc5cf97403039 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 091349d97a6ecaeea819fac9fcb3f9d515c87a99 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 0a56b32d98fea47ca5228e3b62ee1fc189408796 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 0e062ca2a9130d0bfb9ffcf29a0a43d6f1b65957 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 4a8aaf3e4ce1c7e8da2764f8b6253a3029664d92 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 524b1128ed15bfb42eb1b71f93b3fd0fa77adab6 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 5ca654e778f2cceb0207dc9311c8961107caa17e blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 7f3ced9d3dad92439949d98ad2d92125be07764c blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 879b261622ca54bd28f8fa2be6330fe9ebfba814 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># bcfc949b6572079aa54db963abc59b48232813ed blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># c319a9963957cb51e3cb692ac44a4831ea529992 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># f16c37ff355844ac388d101e5bba46e698a4deb8 blob</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># f4d5466af82d891b81ad792b0e74e2341e46312f blob</span>
</span></span></code></pre></div><p><code>GIT_TRACE=true</code> 환경 변수와 함께 <code>gc</code>를 실행하면 <code>prune</code> 명령이 실행된다는 것을 알 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#eedd82">GIT_TRACE</span>=true git gc
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.368350 git.c:439               trace: built-in: git gc</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.368555 run-command.c:663       trace: run_command: git pack-refs --all --prune</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.369748 git.c:439               trace: built-in: git pack-refs --all --prune</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.376790 run-command.c:663       trace: run_command: git reflog expire --all</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.377979 git.c:439               trace: built-in: git reflog expire --all</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.383220 run-command.c:663       trace: run_command: git repack -d -l -A --unpack-unreachable=2.weeks.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.384183 git.c:439               trace: built-in: git repack -d -l -A --unpack-unreachable=2.weeks.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.384316 run-command.c:663       trace: run_command: GIT_REF_PARANOIA=1 git pack-objects --local --delta-base-offset .git/objects/pack/.tmp-57526-pack --keep-true-parents --honor-pack-keep --non-empty --all --reflog --indexed-objects --unpack-unreachable=2.weeks.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.385307 git.c:439               trace: built-in: git pack-objects --local --delta-base-offset .git/objects/pack/.tmp-57526-pack --keep-true-parents --honor-pack-keep --non-empty --all --reflog --indexed-objects --unpack-unreachable=2.weeks.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Enumerating objects: 573, done.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Counting objects: 100% (573/573), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Delta compression using up to 12 threads</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Compressing objects: 100% (256/256), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Writing objects: 100% (573/573), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># Total 573 (delta 133), reused 573 (delta 133)</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.402885 run-command.c:663       trace: run_command: git prune --expire 2.weeks.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.403766 git.c:439               trace: built-in: git prune --expire 2.weeks.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.407108 run-command.c:663       trace: run_command: git worktree prune --expire 3.months.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.408258 git.c:439               trace: built-in: git worktree prune --expire 3.months.ago</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.408495 run-command.c:663       trace: run_command: git rerere gc</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># 21:48:42.409708 git.c:439               trace: built-in: git rerere gc</span>
</span></span></code></pre></div><h1 id="git-server">Git Server</h1>
<h2 id="fork">Fork</h2>
<p>Fork는 서버에 저장소의 복사본을 만듭니다.</p>
<p><img src="/images/shell/git/fork-repository.svg" alt="fork-repository"></p>
<p><em><a href="https://flatironinstitute.github.io/sciware-git-collaborative/03-distributed/">Distributed version control and forking workflow</a></em></p>
<ul>
<li>fork를 사용하면 upstream 리포지토리에 영향을 주지 않고 마음대로 변경할 수 있습니다.
<ul>
<li>fork 리포지토리에서 <code>push --force</code>를 하든 말든 상관없습니다.</li>
<li>remote-local 리포지토리를 좀 더 적극적으로 관리할 수 있습니다.</li>
<li>공유지의 비극을 피할 수 있습니다.</li>
</ul>
</li>
<li>upstream 리포지토리의 메인테이너를 제한할 수 있습니다.</li>
<li>upstream 리포지토리의 안 쓰는 브랜치들을 따로 정리할 필요가 없습니다.</li>
<li>진정한 의미의 DVCS를 사용하는 것입니다.</li>
</ul>
<h2 id="브랜치-보호-규칙-정하기-branch-protection-rules">브랜치 보호 규칙 정하기: Branch protection rules</h2>
<p>GitHub 혹은 Bitbucket 등의 Git 저장소 서비스를 사용하면 브랜치 규칙을 정할 수 있습니다.
예를 들어, PR(Pull Request)을 통해서만 소스를 병합할 수 있도록 제한하거나 동료가 승인한 PR만 병합할 수 있도록 설정할 수 있습니다.
또한 force push를 제한할 수도 있습니다.
2024년 기준 모든 서비스에서 이 기능에 유료 모델을 도입했고, 유용한 규칙들을 적용하려면 비용을 지불해야 합니다.
(이게 참 안타깝습니다.)
만약 규칙을 어겼을 경우 아래와 같은 메시지를 만날 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2;display:grid;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git --no-optional-locks -c color.branch=false -c color.diff=false -c color.status=false -c diff.mnemonicprefix=false -c core.quotepath=false -c credential.helper=sourcetree push -v --tags origin refs/heads/develop:refs/heads/develop
</span></span><span style="display:flex;"><span>Pushing to https://bitbucket.markruler.com/scm/mark/test-pr.git
</span></span><span style="display:flex;"><span>POST git-receive-pack (<span style="color:#f60">990</span> bytes)
</span></span><span style="display:flex;"><span>remote:                             *%%%%%.
</span></span><span style="display:flex;"><span>remote:                         %%%         %%%
</span></span><span style="display:flex;"><span>remote:                      ,%#               %%
</span></span><span style="display:flex;"><span>remote:                     %%                   %%
</span></span><span style="display:flex;"><span>remote:                    %#                     %%
</span></span><span style="display:flex;"><span>remote:                   %%                       %
</span></span><span style="display:flex;"><span>remote:                   %(                       %%
</span></span><span style="display:flex;"><span>remote:                   %%%%%%%%%%%%%%%%%%%%%%%%%%%
</span></span><span style="display:flex;"><span>remote:                 %#%*%#///////%# %%///////%%%%%%
</span></span><span style="display:flex;"><span>remote:                ,% %*%%******%#   %%******%(%%,%
</span></span><span style="display:flex;"><span>remote:                  %%/ %%/**%%/%%%%%%%(**#%( %%#
</span></span><span style="display:flex;"><span>remote:                   %%          %%%          %(
</span></span><span style="display:flex;"><span>remote:                    %                      .%
</span></span><span style="display:flex;"><span>remote:                    *%        %%%%%       .%
</span></span><span style="display:flex;"><span>remote:                      %#                 %%
</span></span><span style="display:flex;"><span>remote:                       .%%            .%%
</span></span><span style="display:flex;"><span>remote:                       .%%.%%,     %%%.%%/
</span></span><span style="display:flex;"><span>remote:                 %%%%%%##%.  <span style="color:#0f0">#%%%%%.  .%((%%%%%%</span>
</span></span><span style="display:flex;"><span>remote:             %%#(((((((((%%,         <span style="color:#0f0">#%%(((((((((#%%.</span>
</span></span><span style="display:flex;"><span>remote:       %%%((((((((((((((((((%%%, .%%%((((((((((((((((((<span style="color:#0f0">#%%*</span>
</span></span><span style="display:flex;"><span>remote:     %%(((((((((((((((((((((((((%(((((((((((((((((((((((((<span style="color:#0f0">#%.</span>
</span></span><span style="display:flex;"><span>remote:   ,%(((((((((((((((((((((((((((((((((((((((((((((((((((((((%#
</span></span><span style="display:flex;"><span>remote:   %#((((((((((((((((((((((((((((((((((((((((((((((((((((((((%
</span></span><span style="display:flex;"><span>remote:   %%%%%%%%%%%%%(((((((((((((((((((((((((((((((((%%%%%%%%%%%%%
</span></span><span style="display:flex;"><span>remote:  %%            %####((((((<span style="color:#0f0">###%%%%%%%%#(((((((((%            ,%</span>
</span></span><span style="display:flex;"><span>remote: ,%             %%%%%%#.               %%%((((((%*            %%
</span></span><span style="display:flex;"><span>remote: <span style="color:#0f0">#%                                       %%%#                %%</span>
</span></span><span style="display:flex;"><span>remote: .%                             .%%%%%%%%%                    %#
</span></span><span style="display:flex;"><span>remote:  %                         <span style="color:#0f0">#%%%                              %</span>
</span></span><span style="display:flex;"><span>remote:  %                     %%%%                                  %*
</span></span><span style="display:flex;"><span>remote: /%************/#%%%%%%######%%*                        ..,*/(%%
</span></span><span style="display:flex;"><span>remote:               %%######(((((((<span style="color:#0f0">##################%%</span>
</span></span><span style="display:flex;"><span>remote:               %%######(((((((((((((((((((((((((%%
</span></span><span style="display:flex;"><span>remote: //////////////%%%%%%%%#########################%%/////////  ///
</span></span><span style="display:flex;"><span>remote: ----------------------------------------------------
</span></span><span style="display:flex;"><span>remote: Branch refs/heads/develop can only be modified through pull requests.
</span></span><span style="display:flex;"><span>remote: Check your branch permissions configuration with the project administrator.
</span></span><span style="display:flex;"><span>remote: ----------------------------------------------------
</span></span><span style="display:flex;"><span>remote:
</span></span><span style="display:flex;"><span>remote:
</span></span><span style="display:flex;"><span>To https://bitbucket.markruler.com/scm/mark/test-pr.git ! [remote rejected] develop -&gt; develop (pre-receive hook declined)
</span></span><span style="display:flex;"><span>error: failed to push some refs to <span style="color:#87ceeb">&#39;https://bitbucket.markruler.com/scm/mark/test-pr.git&#39;</span>
</span></span><span style="display:flex;"><span>Completed with errors, see above
</span></span></code></pre></div><h1 id="참고">참고</h1>
<ul>
<li>Books
<ul>
<li><a href="https://git-scm.com/book/en/v2">Pro Git</a> (2/e) - Scott Chacon, Ben Straub</li>
<li><a href="https://www.atlassian.com/git/tutorials">Git Tutorials</a> - Atlassian</li>
<li><a href="https://github.com/git-guides/">Git Guide</a> - GitHub</li>
<li><a href="https://www.aladin.co.kr/shop/wproduct.aspx?ISBN=9788960775473">Git을 이용한 버전 관리</a> - 라비산카 소마순다람</li>
</ul>
</li>
<li>Git Internal
<ul>
<li><a href="https://markruler.github.io/posts/shell/cs-visualized-useful-git-commands/">CS Visualized: 유용한 깃(Git) 명령어</a> - Lydia Hallie</li>
<li><a href="https://www.udemy.com/course/git-and-github-complete-guide/">The Complete Git Guide: Understand and master Git and GitHub</a> - Bogdan Stashchuk</li>
<li><a href="https://medium.com/swimm/a-visualized-intro-to-git-internals-objects-and-branches-68df85864037">A Visualized Intro to Git Internals — Objects and Branches</a> - Omer Rosenbaum</li>
<li><a href="https://medium.com/swimm/getting-hardcore-creating-a-repo-from-scratch-cc747edbb11c">Getting Hardcore — Creating a Repo From Scratch</a> - Omer Rosenbaum</li>
<li><a href="https://swimm.io/blog/a-hands-on-intro-to-git-internals-creating-a-repo-from-scratch/">A Hands-On Intro to Git Internals: Creating a Repo From Scratch</a> - swimm</li>
<li><a href="https://git-scm.com/docs/hash-function-transition/">Hash Function</a> - git-scm</li>
<li><a href="https://git-scm.com/book/ko/v2/Git%EC%9D%98-%EB%82%B4%EB%B6%80-Git-%EA%B0%9C%EC%B2%B4">objects</a> - git-scm</li>
</ul>
</li>
<li>refs
<ul>
<li><a href="https://git-scm.com/docs/gitrevisions">gitrevisions</a> - git-scm</li>
<li><a href="https://www.atlassian.com/git/tutorials/refs-and-the-reflog">Refs and the Reflog</a> - Atlassian</li>
</ul>
</li>
<li>index
<ul>
<li><a href="https://github.blog/2021-11-10-make-your-monorepo-feel-small-with-gits-sparse-index/">Make your monorepo feel small with Git&rsquo;s sparse index</a> - Derrick Stolee</li>
<li><a href="https://mincong.io/2018/04/28/git-index/">Git: Understanding the Index File</a> - Mincong Huang</li>
<li><a href="https://shafiul.github.io//gitbook/7_the_git_index.html">The Git Index</a></li>
</ul>
</li>
<li>config
<ul>
<li><a href="https://git-scm.com/docs/git-config">git-scm</a> - git-scm</li>
</ul>
</li>
<li>tag
<ul>
<li><a href="https://git-scm.com/book/ko/v2/Git%EC%9D%98-%EA%B8%B0%EC%B4%88-%ED%83%9C%EA%B7%B8">tag</a> - git-scm</li>
</ul>
</li>
<li>Commands
<ul>
<li><a href="https://github.com/git/git/blob/90d242d36e248acfae0033274b524bfa55a947fd/git.c#L487">struct cmd_struct commands[]</a></li>
</ul>
</li>
<li>submodule &amp; subtree
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/git-submodule">submodule</a> - Atlassian</li>
<li><a href="https://www.atlassian.com/git/tutorials/git-subtree">subtree</a> - Atlassian</li>
<li><a href="https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88">git-submodule</a> - git-scm</li>
<li><a href="https://www.atlassian.com/git/tutorials/git-subtree">Git subtree: the alternative to Git submodule</a> - Atlassian</li>
<li><a href="https://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/">Why your company shouldn&rsquo;t use Git submodules</a> - Amber</li>
<li><a href="https://openclassrooms.com/en/courses/5671626-manage-your-code-project-with-git-github/6152286-use-subtrees-and-submodules-to-add-a-public-repo-to-your-project">Use subtrees and submodules to add a public repo to your project</a> - OpenClassrooms</li>
<li><a href="https://blog.developer.atlassian.com/the-power-of-git-subtree/">The power of Git subtree</a> - Atlassian</li>
<li><a href="https://blog.rhostem.com/posts/2020-01-03-code-sharing-with-git-subtree">Git subtree를 활용한 코드 공유</a> - rhostem</li>
<li><a href="https://www.three-snakes.com/git/git-subtree">Subtree 사용법</a> - ThreeSnakes</li>
<li><a href="https://homoefficio.github.io/2015/07/18/git-subtree/">git subtree - 프로젝트 안의 또 다른 프로젝트</a> - HomoEfficio</li>
</ul>
</li>
<li>status
<ul>
<li><a href="https://github.com/git/git/blob/90d242d36e248acfae0033274b524bfa55a947fd/builtin/commit.c#L1475">int cmd_status(int argc, const char **argv, const char *prefix)</a></li>
<li><a href="https://github.com/git/git/blob/master/wt-status.c#L807">wt_status_collect(struct wt_status *s)</a></li>
<li><a href="https://kwoncheol.me/posts/git-rename-inference">git은 폴더경로가 변경된 것을 어떻게 알 수 있을까?</a> - kwoncheol</li>
</ul>
</li>
<li>fetch
<ul>
<li><a href="https://git-scm.com/docs/git-fetch">git-fetch</a> - git-scm</li>
<li><a href="https://www.atlassian.com/git/tutorials/syncing/git-fetch">git fetch</a> - Atlassian</li>
</ul>
</li>
<li>add
<ul>
<li><a href="https://github.com/git/git/blob/90d242d36e248acfae0033274b524bfa55a947fd/builtin/add.c#L491">int cmd_add(int argc, const char **argv, const char *prefix)</a></li>
</ul>
</li>
<li>merge
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging">Basic Branching and Merging</a> - git-scm</li>
<li><a href="https://youtu.be/J0W-WA0aYJI">3 way merge - 지옥에서 온 Git</a> - 생활코딩</li>
<li><a href="https://blog.plasticscm.com/2016/02/three-way-merging-look-under-hood.html">Three-way merging: A look under the hood</a> - Plastic SCM</li>
<li><a href="https://blog.npcode.com/2012/09/29/3-way-merge-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EC%97%90-%EB%8C%80%ED%95%B4/">3-way merge 알고리즘에 대해</a> - 이응준</li>
</ul>
</li>
<li>rebase
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Branching-Rebasing">Rebasing</a> - git-scm</li>
<li><a href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing">Merging vs. Rebasing</a> - Atlassian</li>
</ul>
</li>
<li>stash
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/saving-changes/git-stash#how-git-stash-works">git stash</a> - Atlassian</li>
<li><a href="https://github.com/git/git/blob/90d242d36e248acfae0033274b524bfa55a947fd/builtin/stash.c#L1769">int cmd_stash(int argc, const char **argv, const char *prefix)</a></li>
<li><a href="https://github.com/git/git/blob/90d242d36e248acfae0033274b524bfa55a947fd/builtin/stash.c#L1082">static int check_changes(const struct pathspec *ps, int include_untracked, struct strbuf *untracked_files)</a></li>
</ul>
</li>
<li>reset
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things">Undoing Things</a> - git-scm</li>
<li><a href="https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting">Resetting, Checking Out &amp; Reverting</a> - Atlassian</li>
</ul>
</li>
<li><a href="https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-Git%EC%9C%BC%EB%A1%9C-%EB%B2%84%EA%B7%B8-%EC%B0%BE%EA%B8%B0">Git으로 버그 찾기</a></li>
<li>reflog
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog">git reflog</a> - Atlassian</li>
<li><a href="https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-%EB%A6%AC%EB%B9%84%EC%A0%84-%EC%A1%B0%ED%9A%8C%ED%95%98%EA%B8%B0#_git_reflog">Revision Selection</a></li>
</ul>
</li>
<li>diff
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/saving-changes/git-diff">Git diff</a> - Atlassian</li>
<li><a href="https://git-scm.com/docs/git-diff">git-diff</a> - git-scm</li>
</ul>
</li>
<li>cherry-pick
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/cherry-pick">Git Cherry Pick</a> - Atlassian</li>
<li><a href="https://git-scm.com/docs/git-cherry-pick">git-cherry-pick</a> - git-scm</li>
</ul>
</li>
<li>push
<ul>
<li><a href="https://git-scm.com/docs/git-push">git-push</a> - git-scm</li>
<li><a href="https://www.atlassian.com/git/tutorials/syncing/git-push">git push</a> - Atlassian</li>
</ul>
</li>
<li>hooks
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/git-hooks">Git Hooks</a> - Atlassian</li>
<li><a href="https://git-scm.com/docs/githooks">githooks</a> - git-scm</li>
</ul>
</li>
<li>packfile
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Internals-Packfiles">Packfiles</a> - Pro Git</li>
<li><a href="http://shafiul.github.io/gitbook/7_the_packfile.html">The Packfile</a> - Git Community Book</li>
</ul>
</li>
<li>gc
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/git-gc">git gc</a> - Atlassian</li>
<li><a href="https://www.atlassian.com/git/tutorials/git-prune">git prune</a> - Atlassian</li>
</ul>
</li>
<li>orphan
<ul>
<li><a href="https://www.lainyzine.com/ko/article/how-to-create-git-orphan-branch/">Git 저장소에서 빈 고아 브랜치를 만드는 방법</a> - LainyZine</li>
</ul>
</li>
<li>fork
<ul>
<li><a href="https://www.atlassian.com/git/tutorials/comparing-workflows/forking-workflow">Forking Workflow</a></li>
<li><a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/about-forks">About forks</a></li>
<li><a href="https://blog.outsider.ne.kr/865">Github를 이용하는 전체 흐름 이해하기 #1</a> - 아웃사이더</li>
</ul>
</li>
</ul>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">최종 수정: 2024-12-29</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/java/java-timeout-monitoring/">
			다음글<br>모니터링과 타임아웃의 중요성
                </a>
                
                
                
                <a class="older-posts" href="/posts/container/building-container-images-in-go/">
			이전글<br>Go 언어로 컨테이너 이미지 빌드하기
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












            </div>

            





<section class="social-share">
  <ul class="share-icons">
    
    
    <li>
      <a href="https://twitter.com/intent/tweet?hashtags=markruler,dev&amp;url=https%3a%2f%2fmarkruler.github.io%2fposts%2fshell%2fgit-commands%2f&amp;text=%ea%b9%83%28Git%29%20CLI%20%ed%99%98%ea%b2%bd%ec%97%90%ec%84%9c%20%ec%86%8c%ec%8a%a4%20%ec%bd%94%eb%93%9c%20%ea%b4%80%eb%a6%ac%ed%95%98%ea%b8%b0" target="_blank" rel="noopener" aria-label="Share on Twitter" class="share-btn twitter">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" id="twitter" viewBox="0 0 48 48" overflow="hidden">
  <defs></defs>
  <g style="pointer-events:all">
    <title style="pointer-events:inherit">bg</title>
    <circle cx="24" cy="24" fill="#1CB7EB" r="24" style="pointer-events:inherit" id="svg_1"></circle>
    <path d="M36.8,15.4C35.9,15.9 34.8,16.2 33.8,16.3C34.9,15.6 35.7,14.5 36.1,13.2C35.1,13.8 34,14.3 32.7,14.6C31.7,13.5 30.4,12.8 28.9,12.8C26,12.8 23.6,15.3 23.6,18.5C23.6,18.9 23.6,19.4 23.7,19.8C19.3,19.6 15.4,17.3 12.8,13.9C12.3,14.7 12.1,15.7 12.1,16.8C12.1,18.8 13,20.5 14.4,21.5C13.5,21.5 12.7,21.2 12,20.8C12,20.8 12,20.9 12,20.9C12,23.6 13.8,25.9 16.2,26.5C15.8,26.6 15.3,26.7 14.8,26.7C14.5,26.7 14.1,26.7 13.8,26.6C14.5,28.9 16.4,30.5 18.7,30.5C16.9,32 14.6,32.9 12.2,32.9C11.8,32.9 11.4,32.9 10.9,32.8C13.2,34.4 16,35.4 19,35.4C28.7,35.4 34,26.8 34,19.3C34,19.1 34,18.8 34,18.6C35.2,17.6 36.1,16.6 36.8,15.4z" fill="#FFFFFF" style="pointer-events:inherit" id="svg_4"></path>
  </g>
</svg>
        <p>Twitter</p>
      </a>
    </li>
    

    
    
    <li>
      <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fmarkruler.github.io%2fposts%2fshell%2fgit-commands%2f" target="_blank" rel="noopener" aria-label="Share on Facebook" class="share-btn facebook">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 48 48" id="facebook" version="1.1" viewBox="0 0 48 48" xml:space="preserve">
  <circle cx="24" cy="24" fill="#4E71A8" r="24" />
  <path d="M29.9,19.5h-4v-2.6c0-1,0.7-1.2,1.1-1.2c0.5,0,2.8,0,2.8,0v-4.4l-3.9,0c-4.4,0-5.3,3.3-5.3,5.3v2.9h-2.5V24  h2.5c0,5.8,0,12.7,0,12.7h5.3c0,0,0-7,0-12.7h3.6L29.9,19.5z" fill="#FFFFFF" />
</svg>
        <p>Facebook</p>
        </a>
    </li>
    

    
    

    
    

    
    
    <li>
      <a href="mailto:?subject=%ec%9e%84%ec%b0%bd%ec%88%98 - %ea%b9%83%28Git%29%20CLI%20%ed%99%98%ea%b2%bd%ec%97%90%ec%84%9c%20%ec%86%8c%ec%8a%a4%20%ec%bd%94%eb%93%9c%20%ea%b4%80%eb%a6%ac%ed%95%98%ea%b8%b0.&amp;body=%ea%b9%83%28Git%29%20CLI%20%ed%99%98%ea%b2%bd%ec%97%90%ec%84%9c%20%ec%86%8c%ec%8a%a4%20%ec%bd%94%eb%93%9c%20%ea%b4%80%eb%a6%ac%ed%95%98%ea%b8%b0%2c%20by%20%ec%9e%84%ec%b0%bd%ec%88%98%0a%ec%9e%90%ec%a3%bc%20%ec%93%b0%eb%8a%94%20Git%20%eb%aa%85%eb%a0%b9%ec%96%b4%0a%0ahttps%3a%2f%2fmarkruler.github.io%2fposts%2fshell%2fgit-commands%2f%0a" target="_blank" class="share-btn email">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" id="email" overflow="hidden">
  <defs></defs>
  <g style="pointer-events:none">
    <title style="pointer-events:inherit">background</title>
    <rect x="-1" y="-1" width="582" height="402" id="canvas_background" fill="none" style="pointer-events:inherit"></rect>
  </g>
  <g style="pointer-events:all">
    <title style="pointer-events:inherit">Layer 1</title>
    <path d="M16,0C7.163,0 0,7.163 0,16C0,24.836 7.163,32 16,32S32,24.836 32,16C32,7.163 24.837,0 16,0z" fill="#333333" style="pointer-events:inherit" id="svg_2"></path>
    <polygon fill="#FFFFFF" points="6.518,21.815 11.707,15.291 6.518,12.119   " style="pointer-events:inherit" id="svg_4"></polygon>
    <polygon fill="#FFFFFF" points="19.5,15.746 15.989,17.908 12.472,15.758 7.11,22.5 24.867,22.5   " style="pointer-events:inherit" id="svg_5"></polygon>
    <polygon fill="#FFFFFF" points="15.988,16.864 25.482,11.017 25.482,9.5 6.518,9.5 6.518,11.076   " style="pointer-events:inherit" id="svg_6"></polygon>
    <polygon fill="#FFFFFF" points="20.263,15.276 25.482,21.843 25.482,12.062   " style="pointer-events:inherit" id="svg_7"></polygon>
  </g>
</svg>
        <p>Email</p>
      </a>
    </li>
  </ul>
</section>


        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://markruler.github.io/">
    
        <div class="nav-title">
            임창수
        </div>
        
        <div class="nav-subtitle">
            What, Why, How.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                About
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Posts
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
        <div
            class="read-random a-block nav-link-item false"
            data-target-prefix="/posts">
            Navigate to Random Post
        </div>
    </div>

    <div class="nav-footer">
        


Hugo Theme <a style="color: #0054B8; text-decoration: underline;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
by <a style="color: #0054B8; text-decoration: underline;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0054B8; text-decoration: underline;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s
<a style="color: #0054B8; text-decoration: underline;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu | Since 2020
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 목차 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#git-internal" class="nav-git-internal">
									Git Internal
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ec%b0%a8%ec%9d%b4%ea%b0%80-%ec%95%84%eb%8b%88%eb%9d%bc-%ec%8a%a4%eb%83%85%ec%83%b7" class="nav-차이가-아니라-스냅샷">
									차이가 아니라 스냅샷
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9d%98-%eb%ac%b4%ea%b2%b0%ec%84%b1" class="nav-데이터의-무결성">
									데이터의 무결성
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#git-%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%ec%9d%98-%ec%84%b8-%ea%b0%80%ec%a7%80-%eb%8b%a8%ea%b3%84" class="nav-git-프로젝트의-세-가지-단계">
									Git 프로젝트의 세 가지 단계
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#git-directory" class="nav-git-directory">
									Git directory
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#head" class="nav-head">
									HEAD
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#refs" class="nav-refs">
									refs
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#info" class="nav-info">
									info
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#objects" class="nav-objects">
									objects
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#tree" class="nav-tree">
									tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#blob-binary-large-object" class="nav-blob-binary-large-object">
									blob (binary large object)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#commit" class="nav-commit">
									commit
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#tag" class="nav-tag">
									tag
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#index" class="nav-index">
									index
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#hash-function" class="nav-hash-function">
									Hash Function
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#config" class="nav-config">
									config
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#scm-source-code-management" class="nav-scm-source-code-management">
									SCM: Source Code Management
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ed%8f%ac%ec%85%80%eb%a6%b0porcelain-%eb%aa%85%eb%a0%b9%ec%96%b4" class="nav-포셀린porcelain-명령어">
									포셀린(Porcelain) 명령어
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#init" class="nav-init">
									init
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#clone" class="nav-clone">
									clone
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#submodule" class="nav-submodule">
									submodule
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#subtree" class="nav-subtree">
									subtree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#branch" class="nav-branch">
									branch
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#xargs" class="nav-xargs">
									xargs
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#tag-1" class="nav-tag-1">
									tag
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#switch" class="nav-switch">
									switch
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#upstream" class="nav-upstream">
									upstream
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#status" class="nav-status">
									status
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#add" class="nav-add">
									add
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#fetch" class="nav-fetch">
									fetch
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#commit-1" class="nav-commit-1">
									commit
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#merge" class="nav-merge">
									merge
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#pull" class="nav-pull">
									pull
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#rebase" class="nav-rebase">
									rebase
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#squash%ec%99%80-fixup" class="nav-squash와-fixup">
									squash와 fixup
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#cherry-pick" class="nav-cherry-pick">
									cherry-pick
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#stash" class="nav-stash">
									stash
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#how-git-stash-works" class="nav-how-git-stash-works">
									How git stash works
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#reset" class="nav-reset">
									reset
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#restore" class="nav-restore">
									restore
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#revert" class="nav-revert">
									revert
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#git%ec%9c%bc%eb%a1%9c-%eb%b2%84%ea%b7%b8-%ec%b0%be%ea%b8%b0" class="nav-git으로-버그-찾기">
									Git으로 버그 찾기
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#blame" class="nav-blame">
									blame
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#bisect" class="nav-bisect">
									bisect
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#show" class="nav-show">
									show
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#log" class="nav-log">
									log
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#triple-dot" class="nav-triple-dot">
									Triple Dot(…)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#reflog-reference-logs" class="nav-reflog-reference-logs">
									reflog: Reference logs
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#diff" class="nav-diff">
									diff
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#push" class="nav-push">
									push
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%ed%94%8c%eb%9f%ac%eb%b0%8dplumbing-%eb%aa%85%eb%a0%b9%ec%96%b4" class="nav-플러밍plumbing-명령어">
									플러밍(Plumbing) 명령어
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#rev-parse" class="nav-rev-parse">
									rev-parse
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#hash-object" class="nav-hash-object">
									hash-object
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#ls-tree" class="nav-ls-tree">
									ls-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#ls-files" class="nav-ls-files">
									ls-files
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#cat-file" class="nav-cat-file">
									cat-file
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#write-tree" class="nav-write-tree">
									write-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#commit-tree" class="nav-commit-tree">
									commit-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#read-tree" class="nav-read-tree">
									read-tree
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#update-index" class="nav-update-index">
									update-index
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#advanced" class="nav-advanced">
									Advanced
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#git-hooks" class="nav-git-hooks">
									Git Hooks
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#garbage-collection" class="nav-garbage-collection">
									Garbage Collection
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#packfiles" class="nav-packfiles">
									Packfiles
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#gc" class="nav-gc">
									gc
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#prune" class="nav-prune">
									prune
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#git-server" class="nav-git-server">
									Git Server
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#fork" class="nav-fork">
									Fork
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%eb%b8%8c%eb%9e%9c%ec%b9%98-%eb%b3%b4%ed%98%b8-%ea%b7%9c%ec%b9%99-%ec%a0%95%ed%95%98%ea%b8%b0-branch-protection-rules" class="nav-브랜치-보호-규칙-정하기-branch-protection-rules">
									브랜치 보호 규칙 정하기: Branch protection rules
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%ec%b0%b8%ea%b3%a0" class="nav-참고">
									참고
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            🔝
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="pagination-action-icon" id="darkModeToggleIcon">
                🌙
            </span>
        </a>
        
        
    </div>
</div>

<div id="single-column-footer">


Hugo Theme <a style="color: #0054B8; text-decoration: underline;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a>
by <a style="color: #0054B8; text-decoration: underline;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0054B8; text-decoration: underline;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s
<a style="color: #0054B8; text-decoration: underline;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu | Since 2020
	
</div>
            </div>
    
    <script defer src="/js/journal.js"></script><script defer src="/js/read-random.js"></script>

    <script>
        
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('/js/sw.js')
            .then(registration => {
              console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch(error => {
              console.log('Service Worker registration failed:', error);
            });
        }
      </script>
    </body>
</html>
