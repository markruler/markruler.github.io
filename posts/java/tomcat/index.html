<!DOCTYPE html>
<html lang="ko"><head>
<title>Tomcat 이해하기</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="G-FFMDWZ27TN">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5, user-scalable=5" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="Servlet Container">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="Tomcat 이해하기" />
<meta property="og:description" content="Servlet Container" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://markruler.github.io/posts/java/tomcat/" /><meta property="og:image" content="https://markruler.github.io/images/java/http-servlet-request-flow.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-23T02:45:00+09:00" />
<meta property="article:modified_time" content="2022-08-23T02:45:00+09:00" />






<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://markruler.github.io/images/java/http-servlet-request-flow.png"/>

<meta name="twitter:title" content="Tomcat 이해하기"/>
<meta name="twitter:description" content="Servlet Container"/>







<script async src="https://www.googletagmanager.com/gtag/js?id=G-FFMDWZ27TN"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-FFMDWZ27TN', { 'anonymize_ip': false });
}
</script>







  




<link rel="icon" href="https://markruler.github.io/images/favicon.ico">



      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.02a482ebb330e36958a54ca8d1e6175b37fb0742710c08f013d129155839e07c.css" integrity="sha256-AqSC67Mw42lYpUyo0eYXWzf7B0JxDAjwE9EpFVg54Hw=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">



















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    About
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Posts
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 목차 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#architecture" class="nav-architecture">
									Architecture
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#server" class="nav-server">
									Server
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#service" class="nav-service">
									Service
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#connector" class="nav-connector">
									Connector
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#container" class="nav-container">
									Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#engine-container" class="nav-engine-container">
									Engine Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#host-container" class="nav-host-container">
									Host Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#context-container" class="nav-context-container">
									Context Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#valve" class="nav-valve">
									Valve
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#spring-application%ec%97%90%ec%84%9c-httprequest%ec%9d%98-%ed%9d%90%eb%a6%84" class="nav-spring-application에서-httprequest의-흐름">
									Spring application에서 HttpRequest의 흐름
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#versions" class="nav-versions">
									Versions
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#ajp-apache-jserv-protocol" class="nav-ajp-apache-jserv-protocol">
									AJP: Apache JServ Protocol
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#jmx-java-management-extensions" class="nav-jmx-java-management-extensions">
									JMX: Java Management eXtensions
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ec%b0%b8%ec%a1%b0" class="nav-참조">
									참조
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ea%b0%81%ec%a3%bc" class="nav-각주">
									각주
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://markruler.github.io/">
            임창수
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://markruler.github.io/">
        <div class="single-column-header-title">임창수</div>
        
        <div class="single-column-header-subtitle">What, Why, How.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://markruler.github.io/images/java/http-servlet-request-flow.png')"
                    
                
            >
                <div class="post-title">
                    Tomcat 이해하기
                    
                    <div class="post-subtitle">
                        Servlet Container
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-08-23 02:45
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/">[note]</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/web">web</a>
                                &nbsp;
                            
                                <a href="/tags/java">java</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="architecture">Architecture</h1>
<p><img src="/images/java/tomcat-architecture.png" alt="Tomcat Architecture"></p>
<p><em><a href="https://www.datadoghq.com/blog/tomcat-architecture-and-performance/">이미지 출처 - Datadog</a></em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-xml" data-lang="xml"><span style="color:#6272a4">&lt;!-- server.xml --&gt;</span>
<span style="color:#ff79c6">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<span style="color:#ff79c6">&lt;Server</span> <span style="color:#50fa7b">port=</span><span style="color:#f1fa8c">&#34;8005&#34;</span> <span style="color:#50fa7b">shutdown=</span><span style="color:#f1fa8c">&#34;SHUTDOWN&#34;</span><span style="color:#ff79c6">&gt;</span>
  <span style="color:#ff79c6">&lt;Listener</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.core.AprLifecycleListener&#34;</span> <span style="color:#50fa7b">SSLEngine=</span><span style="color:#f1fa8c">&#34;on&#34;</span> <span style="color:#ff79c6">/&gt;</span>
  <span style="color:#ff79c6">&lt;Listener</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.core.JasperListener&#34;</span> <span style="color:#ff79c6">/&gt;</span>
  <span style="color:#ff79c6">&lt;Listener</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.core.JreMemoryLeakPreventionListener&#34;</span> <span style="color:#ff79c6">/&gt;</span>
  <span style="color:#ff79c6">&lt;Listener</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&#34;</span> <span style="color:#ff79c6">/&gt;</span>
  <span style="color:#ff79c6">&lt;Listener</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.core.ThreadLocalLeakPreventionListener&#34;</span> <span style="color:#ff79c6">/&gt;</span>
  <span style="color:#ff79c6">&lt;GlobalNamingResources&gt;</span>
    <span style="color:#ff79c6">&lt;Resource</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;UserDatabase&#34;</span>
              <span style="color:#50fa7b">auth=</span><span style="color:#f1fa8c">&#34;Container&#34;</span>
              <span style="color:#50fa7b">type=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.UserDatabase&#34;</span>
              <span style="color:#50fa7b">description=</span><span style="color:#f1fa8c">&#34;User database that can be updated and saved&#34;</span>
              <span style="color:#50fa7b">factory=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.users.MemoryUserDatabaseFactory&#34;</span>
              <span style="color:#50fa7b">pathname=</span><span style="color:#f1fa8c">&#34;conf/tomcat-users.xml&#34;</span> <span style="color:#ff79c6">/&gt;</span>
  <span style="color:#ff79c6">&lt;/GlobalNamingResources&gt;</span>
  <span style="color:#ff79c6">&lt;Service</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;Catalina&#34;</span><span style="color:#ff79c6">&gt;</span>
    <span style="color:#ff79c6">&lt;Connector</span> <span style="color:#50fa7b">port=</span><span style="color:#f1fa8c">&#34;8080&#34;</span> <span style="color:#50fa7b">protocol=</span><span style="color:#f1fa8c">&#34;HTTP/1.1&#34;</span> <span style="color:#50fa7b">redirectPort=</span><span style="color:#f1fa8c">&#34;8443&#34;</span> <span style="color:#50fa7b">connectionTimeout=</span><span style="color:#f1fa8c">&#34;20000&#34;</span> <span style="color:#ff79c6">/&gt;</span>
    <span style="color:#ff79c6">&lt;Connector</span> <span style="color:#50fa7b">port=</span><span style="color:#f1fa8c">&#34;8009&#34;</span> <span style="color:#50fa7b">protocol=</span><span style="color:#f1fa8c">&#34;AJP/1.3&#34;</span> <span style="color:#50fa7b">redirectPort=</span><span style="color:#f1fa8c">&#34;8443&#34;</span> <span style="color:#ff79c6">/&gt;</span>
    <span style="color:#ff79c6">&lt;Engine</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;Catalina&#34;</span> <span style="color:#50fa7b">defaultHost=</span><span style="color:#f1fa8c">&#34;localhost&#34;</span><span style="color:#ff79c6">&gt;</span>
      <span style="color:#ff79c6">&lt;Realm</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.realm.LockOutRealm&#34;</span><span style="color:#ff79c6">&gt;</span>
        <span style="color:#ff79c6">&lt;Realm</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.realm.UserDatabaseRealm&#34;</span> <span style="color:#50fa7b">resourceName=</span><span style="color:#f1fa8c">&#34;UserDatabase&#34;</span><span style="color:#ff79c6">/&gt;</span>
      <span style="color:#ff79c6">&lt;/Realm&gt;</span>
      <span style="color:#ff79c6">&lt;Host</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;localhost&#34;</span>  <span style="color:#50fa7b">appBase=</span><span style="color:#f1fa8c">&#34;webapps&#34;</span>
            <span style="color:#50fa7b">unpackWARs=</span><span style="color:#f1fa8c">&#34;true&#34;</span> <span style="color:#50fa7b">autoDeploy=</span><span style="color:#f1fa8c">&#34;true&#34;</span><span style="color:#ff79c6">&gt;</span>
        <span style="color:#ff79c6">&lt;Valve</span> <span style="color:#50fa7b">className=</span><span style="color:#f1fa8c">&#34;org.apache.catalina.valves.AccessLogValve&#34;</span>
              <span style="color:#50fa7b">directory=</span><span style="color:#f1fa8c">&#34;logs&#34;</span>
              <span style="color:#50fa7b">prefix=</span><span style="color:#f1fa8c">&#34;localhost_access_log.&#34;</span> <span style="color:#50fa7b">suffix=</span><span style="color:#f1fa8c">&#34;.txt&#34;</span>
              <span style="color:#50fa7b">pattern=</span><span style="color:#f1fa8c">&#34;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&#34;</span> <span style="color:#ff79c6">/&gt;</span>
      <span style="color:#ff79c6">&lt;/Host&gt;</span>
    <span style="color:#ff79c6">&lt;/Engine&gt;</span>
  <span style="color:#ff79c6">&lt;/Service&gt;</span>
<span style="color:#ff79c6">&lt;/Server&gt;</span>
</code></pre></div><h2 id="server">Server</h2>
<p>카탈리나 서버(Catalina Server)는 Tomcat 아키텍처 전체를 나타내며 서블릿 컨테이너를 말한다.
즉, 서블릿을 실행하기 위한 환경을 제공한다.
이러한 카탈리나 서버에는 하나 이상의 서비스(Service)가 포함된다.</p>
<h2 id="service">Service</h2>
<p>1개의 서비스는 1개 이상의 <a href="#connector">커넥터</a>와 1개의 <a href="#engine-container">엔진</a>를 포함한다.</p>
<h2 id="connector">Connector</h2>
<p>코요테(<a href="https://tomcat.apache.org/tomcat-8.5-doc/config/http.html">Coyote</a>) 커넥터는
클라이언트와 Tomcat 사이의 통신을 관리한다.
TCP 포트에서 요청을 수신 대기(listen)한다.
그리고 해당 요청을 처리하고 응답을 만들기 위해 엔진(Engine)으로 보낸다.
기본 구성으로 <code>HTTP/1.1</code> 와 <code>AJP/1.3</code>(Apache JServ Protocol) 커넥터가 포함된다.</p>
<h2 id="container">Container</h2>
<h3 id="engine-container">Engine Container</h3>
<p>Engine은 웹 애플리케이션의 라우팅을 담당한다.
여러 개의 <a href="#host-container">Host</a>를 가질 수 있으며, 클라이언트의 요청을 적절한 Host로 전달한다.</p>
<p>Tomcat은 <a href="https://tomcat.apache.org/tomcat-8.5-doc/jasper-howto.html">재스퍼(Jasper) 엔진</a>을 사용하여
JSP 파일을 서블릿(Servlet)으로 변환하여 클라이언트의 HTML 페이지로 렌더링한다.</p>
<ul>
<li><code>org.apache.catalina.LifecycleListener</code> 를 구현한 구현체는 해당 엔진이 언제 시작되고 중지되는지 감시하기 위한 컴포넌트다.
설정하면 엔진의 수명 주기(Lifecycle) 이벤트 발생을 감지할 수 있다.</li>
<li>줄리(JULI: <code>java.util.logging</code>) 패키지를 사용해서 로깅(Logging)을 수행한다.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></li>
</ul>
<h3 id="host-container">Host Container</h3>
<p>Host 요소는 실행 중인 Tomcat 서버의 개별 가상 호스트를 나타낸다.
클라이언트가 네트워크 이름을 사용하여 Tomcat 서버에 연결하려면
이 이름이 사용자가 속한 인터넷 도메인을 관리하는 DNS(도메인 이름 서비스) 서버에 등록되어 있어야 한다.
만약 Apache HTTP Server, NGINX와 같은 웹 프록시 서버를 사용한다면 불필요할 수 있다.
— 기본적으로 <code>localhost</code> 로 입력되어 있다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-json" data-lang="json">GET http:<span style="color:#6272a4">//www.testwebapp.com/sample/
</span><span style="color:#6272a4"></span>
Request Headers:
Connection: keep-alive
Host: www.testwebapp.com
User-Agent: Apache-HttpClient/<span style="color:#bd93f9">4.5</span>.<span style="color:#bd93f9">5</span> (Java/<span style="color:#bd93f9">10.0</span>.<span style="color:#bd93f9">1</span>)
</code></pre></div><p>위와 같은 HTTP 요청은 <code>Host</code> 헤더와 일치하는 호스트에 매핑한다.</p>
<p><code>CATALINA_BASE</code> 변수를 사용하여 여러 Tomcat 인스턴스를 구성한 경우<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>가 아니라면
<code>CATALINA_BASE</code> 는 Tomcat을 설치한 디렉토리인 <code>CATALINA_HOME</code> 의 값으로 설정된다.</p>
<h3 id="context-container">Context Container</h3>
<p>Context 요소는 특정 가상 호스트(Host Container) 내에서 실행되는 웹 애플리케이션을 나타낸다.
단순하게 바라보면 <code>webapp/</code> 디렉토리로 구분되는 것이 하나의 컨텍스트다.
<code>Host</code>는 각각 고유한 경로를 가진 여러 <code>Context</code>를 포함할 수 있다.
<code>Context</code> 인터페이스를 구현한 <a href="https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/core/StandardContext.html"><code>StandardContext</code></a>가
주로 사용된다.</p>
<p>서블릿 리스너인 <code>javax.servlet.ServletContextListener</code> 와 <code>javax.servlet.HttpSessionListener</code> 등은
<code>javax.servlet.ServletContextEvent</code> 를 관리하는 <code>java.util.EventListener</code> 를 구현한다.
— 엔진의 수명 주기를 관리하는 <code>LifecycleListener</code> 와 다르다.
<code>LifecycleListener</code> 를 구현한 <code>JasperListener</code> 를 사용해서 Jasper 엔진을 관리하고,
Jasper 엔진을 사용해서 servlet을 관리한다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">final</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">MyServletListener</span> <span style="color:#8be9fd;font-style:italic">implements</span> ServletContextListener <span style="color:#ff79c6">{</span>
    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">addLifeCycleListener</span><span style="color:#ff79c6">(</span>ServletContextEvent event<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        ApplicationContextFacade source <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>ApplicationContextFacade<span style="color:#ff79c6">)</span> event<span style="color:#ff79c6">.</span><span style="color:#50fa7b">getSource</span><span style="color:#ff79c6">();</span>
        ApplicationContext applicationContext <span style="color:#ff79c6">=</span> get<span style="color:#ff79c6">(</span>source<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;context&#34;</span><span style="color:#ff79c6">);</span>
        StandardContext standardContext <span style="color:#ff79c6">=</span> get<span style="color:#ff79c6">(</span>applicationContext<span style="color:#ff79c6">,</span> <span style="color:#f1fa8c">&#34;context&#34;</span><span style="color:#ff79c6">);</span>
        standardContext<span style="color:#ff79c6">.</span><span style="color:#50fa7b">addLifecycleListener</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> LifecycleListenerImpl<span style="color:#ff79c6">());</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="valve">Valve</h3>
<p>밸브(Valve)는 컨테이너에 들어오는 HTTP 요청을 가로채는 필터다.
밸브는 톰캣에서만 쓸 수 있는 기술이고,
서블릿 필터(Servlet Filter)는 톰캣 이외의 다른 서블릿 컨테이너에서도 사용할 수 있는 기술이다.<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></p>
<h1 id="spring-application에서-httprequest의-흐름">Spring application에서 HttpRequest의 흐름</h1>
<p><img src="/images/java/http-servlet-request-flow.png" alt="HTTP Servlet Request"></p>
<p><em><a href="https://github.com/xpdojo/java/blob/main/request-lifecycle-servlet/">Demonstration</a></em></p>
<h1 id="versions">Versions</h1>
<p><a href="https://tomcat.apache.org/whichversion.html">출처 문서</a></p>
<table>
<thead>
<tr>
<th>Servlet Spec</th>
<th>JSP Spec</th>
<th>EL Spec</th>
<th>WebSocket Spec</th>
<th>Authentication (JASPIC) Spec</th>
<th>Apache Tomcat Version</th>
<th>Supported Java Versions</th>
</tr>
</thead>
<tbody>
<tr>
<td>6.0</td>
<td>3.1</td>
<td>5.0</td>
<td>2.1</td>
<td>3.0</td>
<td>10.1.x</td>
<td>11 and later</td>
</tr>
<tr>
<td>5.0</td>
<td>3.0</td>
<td>4.0</td>
<td>2.0</td>
<td>2.0</td>
<td>10.0.x</td>
<td>8 and later</td>
</tr>
<tr>
<td>4.0</td>
<td>2.3</td>
<td>3.0</td>
<td>1.1</td>
<td>1.1</td>
<td>9.0.x</td>
<td>8 and later</td>
</tr>
<tr>
<td>3.1</td>
<td>2.3</td>
<td>3.0</td>
<td>1.1</td>
<td>1.1</td>
<td>8.5.x</td>
<td>7 and later</td>
</tr>
<tr>
<td>3.1</td>
<td>2.3</td>
<td>3.0</td>
<td>1.1</td>
<td>N/A</td>
<td>8.0.x (superseded)</td>
<td>7 and later</td>
</tr>
<tr>
<td>3.0</td>
<td>2.2</td>
<td>2.2</td>
<td>1.1</td>
<td>N/A</td>
<td>7.0.x (archived)</td>
<td>6 and later (7 and later for WebSocket)</td>
</tr>
<tr>
<td>2.5</td>
<td>2.1</td>
<td>2.1</td>
<td>N/A</td>
<td>N/A</td>
<td>6.0.x (archived)</td>
<td>5 and later</td>
</tr>
<tr>
<td>2.4</td>
<td>2.0</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>5.5.x (archived)</td>
<td>1.4 and later</td>
</tr>
<tr>
<td>2.3</td>
<td>1.2</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>4.1.x (archived)</td>
<td>1.3 and later</td>
</tr>
<tr>
<td>2.2</td>
<td>1.1</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>3.3.x (archived)</td>
<td>1.1 and later</td>
</tr>
</tbody>
</table>
<h1 id="ajp-apache-jserv-protocol">AJP: Apache JServ Protocol</h1>
<p>웹 서버(httpd)의 인바운드 요청을
애플리케이션 서버(Tomcat)로 프록시할 수 있는 바이너리 프로토콜이다.<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup></p>
<h1 id="jmx-java-management-extensions"><strong>JMX:</strong> Java Management eXtensions</h1>
<p>애플리케이션을 관리하고 모니터링하기 위한 Java API다. <sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup></p>
<p><img src="/images/java/jmx-architecture.png" alt="JMX Architecture"></p>
<p>Probe Level의 MBean(Managed Bean)은 JMX에서 관리되는 객체다.
모니터링 및 관리할 수 있는 속성, 연산 및 알림을 제공한다.
Standard MBean, Dynamic MBean과 추가적으로 Model MBean, Open MBean, Monitor MBean으로 구분되며
이를 통해 구현할 수 있다.</p>
<p>MBean Server는 MBean을 관리하고 제공하는 JMX 인프라의 핵심 구성 요소다.
애플리케이션은 MBean Server에 등록된 MBean을 조회하고 조작할 수 있다.
MBean Server는 MBean의 생명주기를 관리하고,
MBean의 속성 및 연산에 대한 액세스를 제공하며,
알림을 수신하는 등의 작업을 수행한다.</p>
<p>JMX 에이전트는 JMX 서비스의 일부로, 애플리케이션을 관리하기 위한 JMX 인터페이스를 외부로 노출한다.
에이전트는 MBean Server와 통신하고, 원격 액세스를 허용하며,
MBean Server를 통해 애플리케이션의 관리 작업을 수행한다.
JMX 에이전트는 Java 애플리케이션 내부에 포함되거나, 별도의 프로세스로 실행될 수 있다.</p>
<h1 id="참조">참조</h1>
<ul>
<li><a href="https://tomcat.apache.org/tomcat-8.5-doc/architecture/overview.html">Apache Tomcat 8 Architecture</a>
<ul>
<li><a href="https://tomcat.apache.org/tomcat-8.5-doc/config/server.html">Server</a></li>
<li><a href="https://tomcat.apache.org/tomcat-8.5-doc/config/service.html">Service</a></li>
<li><a href="https://tomcat.apache.org/tomcat-8.5-doc/config/http.html">Connectors - HTTP/1.1</a></li>
<li><a href="https://tomcat.apache.org/tomcat-8.5-doc/config/engine.html">Engine</a></li>
<li><a href="https://tomcat.apache.org/tomcat-8.5-doc/config/host.html">Host</a></li>
<li><a href="https://tomcat.apache.org/tomcat-8.5-doc/config/context.html">Context</a></li>
</ul>
</li>
<li><a href="https://howtodoinjava.com/tomcat/tomcats-architecture-and-server-xml-configuration-tutorial/">Tomcat – Architecture and server.xml configuration</a> - HowToDoInJava
<ul>
<li><a href="https://howtodoinjava.com/tomcat/a-birds-eye-view-on-how-web-servers-work/">How web servers work?</a> - HowToDoInJava</li>
</ul>
</li>
<li><a href="https://www.geeksforgeeks.org/servlet-flow-of-execution/">Servlet – Flow Of Execution</a> - GeeksforGeeks</li>
<li><a href="https://www.datadoghq.com/blog/tomcat-architecture-and-performance/">Key metrics for monitoring Tomcat</a> - Datadog</li>
<li><a href="https://www.digitalocean.com/community/tutorials/servletcontextlistener-servlet-listener-example">ServletContextListener Servlet Listener Example</a> - DigitalOcean</li>
<li>&lt;자바 고양이 톰캣(Tomcat) 이야기&gt; - 최진식</li>
<li>&lt;아파치 톰캣 7 따라잡기&gt; - Tanuj Khare</li>
<li>&lt;톰캣 최종 분석&gt; (톰캣4, 5) - Budi Kurniawan, Paul Deck</li>
<li><a href="https://www.lesstif.com/linux-core/linux-web-server-web-application/nginx-apache-tomcat">nginx 와 apache tomcat 연동하기</a> - lessif</li>
<li><a href="https://ehdvudee.tistory.com/20">AJP 프로토콜 모든 것을 분석 해보자</a> - ehdvudee</li>
<li><a href="https://cheershennah.tistory.com/142">아파치Apache - 톰캣 Tomcat  연동하는 이유?  AJP란?</a> - cheersHena</li>
</ul>
<h2 id="각주">각주</h2>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="https://tomcat.apache.org/tomcat-8.5-doc/logging.html">Logging in Tomcat</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://howtodoinjava.com/tomcat/running-multiple-instances-of-tomcat-with-single-server-installation/">Running multiple instances of Tomcat with single server installation</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p><a href="http://i5on9i.blogspot.com/2014/07/tomcat-valve-servlet-filter.html">Tomcat 의 Valve 와 Servlet Filter</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4" role="doc-endnote">
<p><a href="https://en.wikipedia.org/wiki/Apache_JServ_Protocol">AJP: Apache JServ Protocol</a> - Wikipedia&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5" role="doc-endnote">
<p><a href="https://en.wikipedia.org/wiki/Java_Management_Extensions">JMX: Java Management Extensions</a> - Wikipedia&#160;<a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">최종 수정: 2022-08-23</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/ci/jenkins-workspace-concurrency/">
			다음글<br>Jenkins Workspace 동시성 문제
                </a>
                
                
                
                <a class="older-posts" href="/posts/gui/x-based-desktop/">
			이전글<br>X Window System
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












            </div>
        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://markruler.github.io/">
    
        <div class="nav-title">
            임창수
        </div>
        
        <div class="nav-subtitle">
            What, Why, How.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                About
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Posts
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a style="color: #0080ff;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a style="color: #0080ff;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0080ff;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a style="color: #0080ff;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu 2020 - 2024
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 목차 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#architecture" class="nav-architecture">
									Architecture
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#server" class="nav-server">
									Server
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#service" class="nav-service">
									Service
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#connector" class="nav-connector">
									Connector
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#container" class="nav-container">
									Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#engine-container" class="nav-engine-container">
									Engine Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#host-container" class="nav-host-container">
									Host Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#context-container" class="nav-context-container">
									Context Container
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#valve" class="nav-valve">
									Valve
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#spring-application%ec%97%90%ec%84%9c-httprequest%ec%9d%98-%ed%9d%90%eb%a6%84" class="nav-spring-application에서-httprequest의-흐름">
									Spring application에서 HttpRequest의 흐름
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#versions" class="nav-versions">
									Versions
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#ajp-apache-jserv-protocol" class="nav-ajp-apache-jserv-protocol">
									AJP: Apache JServ Protocol
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#jmx-java-management-extensions" class="nav-jmx-java-management-extensions">
									JMX: Java Management eXtensions
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%ec%b0%b8%ec%a1%b0" class="nav-참조">
									참조
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%ea%b0%81%ec%a3%bc" class="nav-각주">
									각주
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>

<div id="single-column-footer">
Hugo Theme <a style="color: #0080ff;" href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a style="color: #0080ff;" href="https://risehere.net/">Rise</a>
<br>
Ported from <a style="color: #0080ff;" href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a style="color: #0080ff;" href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Im Changsu 2020 - 2024
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
